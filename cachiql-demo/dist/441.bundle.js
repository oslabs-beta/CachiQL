"use strict";(self.webpackChunkcachiql_demo=self.webpackChunkcachiql_demo||[]).push([[441],{50045:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "C": () => (/* binding */ CharacterStream),\n/* harmony export */   "P": () => (/* binding */ Position),\n/* harmony export */   "R": () => (/* binding */ Range)\n/* harmony export */ });\nvar __defProp = Object.defineProperty;\nvar __name = (target, value) => __defProp(target, "name", { value, configurable: true });\nclass CharacterStream {\n  constructor(sourceText) {\n    this.getStartOfToken = () => this._start;\n    this.getCurrentPosition = () => this._pos;\n    this.eol = () => this._sourceText.length === this._pos;\n    this.sol = () => this._pos === 0;\n    this.peek = () => {\n      return this._sourceText.charAt(this._pos) ? this._sourceText.charAt(this._pos) : null;\n    };\n    this.next = () => {\n      const char = this._sourceText.charAt(this._pos);\n      this._pos++;\n      return char;\n    };\n    this.eat = (pattern) => {\n      const isMatched = this._testNextCharacter(pattern);\n      if (isMatched) {\n        this._start = this._pos;\n        this._pos++;\n        return this._sourceText.charAt(this._pos - 1);\n      }\n      return void 0;\n    };\n    this.eatWhile = (match) => {\n      let isMatched = this._testNextCharacter(match);\n      let didEat = false;\n      if (isMatched) {\n        didEat = isMatched;\n        this._start = this._pos;\n      }\n      while (isMatched) {\n        this._pos++;\n        isMatched = this._testNextCharacter(match);\n        didEat = true;\n      }\n      return didEat;\n    };\n    this.eatSpace = () => this.eatWhile(/[\\s\\u00a0]/);\n    this.skipToEnd = () => {\n      this._pos = this._sourceText.length;\n    };\n    this.skipTo = (position) => {\n      this._pos = position;\n    };\n    this.match = (pattern, consume = true, caseFold = false) => {\n      let token = null;\n      let match = null;\n      if (typeof pattern === "string") {\n        const regex = new RegExp(pattern, caseFold ? "i" : "g");\n        match = regex.test(this._sourceText.substr(this._pos, pattern.length));\n        token = pattern;\n      } else if (pattern instanceof RegExp) {\n        match = this._sourceText.slice(this._pos).match(pattern);\n        token = match === null || match === void 0 ? void 0 : match[0];\n      }\n      if (match != null) {\n        if (typeof pattern === "string" || match instanceof Array && this._sourceText.startsWith(match[0], this._pos)) {\n          if (consume) {\n            this._start = this._pos;\n            if (token && token.length) {\n              this._pos += token.length;\n            }\n          }\n          return match;\n        }\n      }\n      return false;\n    };\n    this.backUp = (num) => {\n      this._pos -= num;\n    };\n    this.column = () => this._pos;\n    this.indentation = () => {\n      const match = this._sourceText.match(/\\s*/);\n      let indent = 0;\n      if (match && match.length !== 0) {\n        const whiteSpaces = match[0];\n        let pos = 0;\n        while (whiteSpaces.length > pos) {\n          if (whiteSpaces.charCodeAt(pos) === 9) {\n            indent += 2;\n          } else {\n            indent++;\n          }\n          pos++;\n        }\n      }\n      return indent;\n    };\n    this.current = () => this._sourceText.slice(this._start, this._pos);\n    this._start = 0;\n    this._pos = 0;\n    this._sourceText = sourceText;\n  }\n  _testNextCharacter(pattern) {\n    const character = this._sourceText.charAt(this._pos);\n    let isMatched = false;\n    if (typeof pattern === "string") {\n      isMatched = character === pattern;\n    } else {\n      isMatched = pattern instanceof RegExp ? pattern.test(character) : pattern(character);\n    }\n    return isMatched;\n  }\n}\n__name(CharacterStream, "CharacterStream");\nclass Range {\n  constructor(start, end) {\n    this.containsPosition = (position) => {\n      if (this.start.line === position.line) {\n        return this.start.character <= position.character;\n      } else if (this.end.line === position.line) {\n        return this.end.character >= position.character;\n      } else {\n        return this.start.line <= position.line && this.end.line >= position.line;\n      }\n    };\n    this.start = start;\n    this.end = end;\n  }\n  setStart(line, character) {\n    this.start = new Position(line, character);\n  }\n  setEnd(line, character) {\n    this.end = new Position(line, character);\n  }\n}\n__name(Range, "Range");\nclass Position {\n  constructor(line, character) {\n    this.lessThanOrEqualTo = (position) => this.line < position.line || this.line === position.line && this.character <= position.character;\n    this.line = line;\n    this.character = character;\n  }\n  setLine(line) {\n    this.line = line;\n  }\n  setCharacter(character) {\n    this.character = character;\n  }\n}\n__name(Position, "Position");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAwNDUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBLDREQUE0RCwyQkFBMkI7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzJEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FjaGlxbC1kZW1vLy4vbm9kZV9tb2R1bGVzL0BncmFwaGlxbC9yZWFjdC9kaXN0L1JhbmdlLmVzLmpzPzA4MTMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX25hbWUgPSAodGFyZ2V0LCB2YWx1ZSkgPT4gX19kZWZQcm9wKHRhcmdldCwgXCJuYW1lXCIsIHsgdmFsdWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcbmNsYXNzIENoYXJhY3RlclN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKHNvdXJjZVRleHQpIHtcbiAgICB0aGlzLmdldFN0YXJ0T2ZUb2tlbiA9ICgpID0+IHRoaXMuX3N0YXJ0O1xuICAgIHRoaXMuZ2V0Q3VycmVudFBvc2l0aW9uID0gKCkgPT4gdGhpcy5fcG9zO1xuICAgIHRoaXMuZW9sID0gKCkgPT4gdGhpcy5fc291cmNlVGV4dC5sZW5ndGggPT09IHRoaXMuX3BvcztcbiAgICB0aGlzLnNvbCA9ICgpID0+IHRoaXMuX3BvcyA9PT0gMDtcbiAgICB0aGlzLnBlZWsgPSAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fc291cmNlVGV4dC5jaGFyQXQodGhpcy5fcG9zKSA/IHRoaXMuX3NvdXJjZVRleHQuY2hhckF0KHRoaXMuX3BvcykgOiBudWxsO1xuICAgIH07XG4gICAgdGhpcy5uZXh0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgY2hhciA9IHRoaXMuX3NvdXJjZVRleHQuY2hhckF0KHRoaXMuX3Bvcyk7XG4gICAgICB0aGlzLl9wb3MrKztcbiAgICAgIHJldHVybiBjaGFyO1xuICAgIH07XG4gICAgdGhpcy5lYXQgPSAocGF0dGVybikgPT4ge1xuICAgICAgY29uc3QgaXNNYXRjaGVkID0gdGhpcy5fdGVzdE5leHRDaGFyYWN0ZXIocGF0dGVybik7XG4gICAgICBpZiAoaXNNYXRjaGVkKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0ID0gdGhpcy5fcG9zO1xuICAgICAgICB0aGlzLl9wb3MrKztcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NvdXJjZVRleHQuY2hhckF0KHRoaXMuX3BvcyAtIDEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9O1xuICAgIHRoaXMuZWF0V2hpbGUgPSAobWF0Y2gpID0+IHtcbiAgICAgIGxldCBpc01hdGNoZWQgPSB0aGlzLl90ZXN0TmV4dENoYXJhY3RlcihtYXRjaCk7XG4gICAgICBsZXQgZGlkRWF0ID0gZmFsc2U7XG4gICAgICBpZiAoaXNNYXRjaGVkKSB7XG4gICAgICAgIGRpZEVhdCA9IGlzTWF0Y2hlZDtcbiAgICAgICAgdGhpcy5fc3RhcnQgPSB0aGlzLl9wb3M7XG4gICAgICB9XG4gICAgICB3aGlsZSAoaXNNYXRjaGVkKSB7XG4gICAgICAgIHRoaXMuX3BvcysrO1xuICAgICAgICBpc01hdGNoZWQgPSB0aGlzLl90ZXN0TmV4dENoYXJhY3RlcihtYXRjaCk7XG4gICAgICAgIGRpZEVhdCA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGlkRWF0O1xuICAgIH07XG4gICAgdGhpcy5lYXRTcGFjZSA9ICgpID0+IHRoaXMuZWF0V2hpbGUoL1tcXHNcXHUwMGEwXS8pO1xuICAgIHRoaXMuc2tpcFRvRW5kID0gKCkgPT4ge1xuICAgICAgdGhpcy5fcG9zID0gdGhpcy5fc291cmNlVGV4dC5sZW5ndGg7XG4gICAgfTtcbiAgICB0aGlzLnNraXBUbyA9IChwb3NpdGlvbikgPT4ge1xuICAgICAgdGhpcy5fcG9zID0gcG9zaXRpb247XG4gICAgfTtcbiAgICB0aGlzLm1hdGNoID0gKHBhdHRlcm4sIGNvbnN1bWUgPSB0cnVlLCBjYXNlRm9sZCA9IGZhbHNlKSA9PiB7XG4gICAgICBsZXQgdG9rZW4gPSBudWxsO1xuICAgICAgbGV0IG1hdGNoID0gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAocGF0dGVybiwgY2FzZUZvbGQgPyBcImlcIiA6IFwiZ1wiKTtcbiAgICAgICAgbWF0Y2ggPSByZWdleC50ZXN0KHRoaXMuX3NvdXJjZVRleHQuc3Vic3RyKHRoaXMuX3BvcywgcGF0dGVybi5sZW5ndGgpKTtcbiAgICAgICAgdG9rZW4gPSBwYXR0ZXJuO1xuICAgICAgfSBlbHNlIGlmIChwYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgIG1hdGNoID0gdGhpcy5fc291cmNlVGV4dC5zbGljZSh0aGlzLl9wb3MpLm1hdGNoKHBhdHRlcm4pO1xuICAgICAgICB0b2tlbiA9IG1hdGNoID09PSBudWxsIHx8IG1hdGNoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtYXRjaFswXTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXRjaCAhPSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gXCJzdHJpbmdcIiB8fCBtYXRjaCBpbnN0YW5jZW9mIEFycmF5ICYmIHRoaXMuX3NvdXJjZVRleHQuc3RhcnRzV2l0aChtYXRjaFswXSwgdGhpcy5fcG9zKSkge1xuICAgICAgICAgIGlmIChjb25zdW1lKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydCA9IHRoaXMuX3BvcztcbiAgICAgICAgICAgIGlmICh0b2tlbiAmJiB0b2tlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcG9zICs9IHRva2VuLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICB0aGlzLmJhY2tVcCA9IChudW0pID0+IHtcbiAgICAgIHRoaXMuX3BvcyAtPSBudW07XG4gICAgfTtcbiAgICB0aGlzLmNvbHVtbiA9ICgpID0+IHRoaXMuX3BvcztcbiAgICB0aGlzLmluZGVudGF0aW9uID0gKCkgPT4ge1xuICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLl9zb3VyY2VUZXh0Lm1hdGNoKC9cXHMqLyk7XG4gICAgICBsZXQgaW5kZW50ID0gMDtcbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgY29uc3Qgd2hpdGVTcGFjZXMgPSBtYXRjaFswXTtcbiAgICAgICAgbGV0IHBvcyA9IDA7XG4gICAgICAgIHdoaWxlICh3aGl0ZVNwYWNlcy5sZW5ndGggPiBwb3MpIHtcbiAgICAgICAgICBpZiAod2hpdGVTcGFjZXMuY2hhckNvZGVBdChwb3MpID09PSA5KSB7XG4gICAgICAgICAgICBpbmRlbnQgKz0gMjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5kZW50Kys7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBvcysrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5kZW50O1xuICAgIH07XG4gICAgdGhpcy5jdXJyZW50ID0gKCkgPT4gdGhpcy5fc291cmNlVGV4dC5zbGljZSh0aGlzLl9zdGFydCwgdGhpcy5fcG9zKTtcbiAgICB0aGlzLl9zdGFydCA9IDA7XG4gICAgdGhpcy5fcG9zID0gMDtcbiAgICB0aGlzLl9zb3VyY2VUZXh0ID0gc291cmNlVGV4dDtcbiAgfVxuICBfdGVzdE5leHRDaGFyYWN0ZXIocGF0dGVybikge1xuICAgIGNvbnN0IGNoYXJhY3RlciA9IHRoaXMuX3NvdXJjZVRleHQuY2hhckF0KHRoaXMuX3Bvcyk7XG4gICAgbGV0IGlzTWF0Y2hlZCA9IGZhbHNlO1xuICAgIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgaXNNYXRjaGVkID0gY2hhcmFjdGVyID09PSBwYXR0ZXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICBpc01hdGNoZWQgPSBwYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwID8gcGF0dGVybi50ZXN0KGNoYXJhY3RlcikgOiBwYXR0ZXJuKGNoYXJhY3Rlcik7XG4gICAgfVxuICAgIHJldHVybiBpc01hdGNoZWQ7XG4gIH1cbn1cbl9fbmFtZShDaGFyYWN0ZXJTdHJlYW0sIFwiQ2hhcmFjdGVyU3RyZWFtXCIpO1xuY2xhc3MgUmFuZ2Uge1xuICBjb25zdHJ1Y3RvcihzdGFydCwgZW5kKSB7XG4gICAgdGhpcy5jb250YWluc1Bvc2l0aW9uID0gKHBvc2l0aW9uKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdGFydC5saW5lID09PSBwb3NpdGlvbi5saW5lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0LmNoYXJhY3RlciA8PSBwb3NpdGlvbi5jaGFyYWN0ZXI7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZW5kLmxpbmUgPT09IHBvc2l0aW9uLmxpbmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kLmNoYXJhY3RlciA+PSBwb3NpdGlvbi5jaGFyYWN0ZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydC5saW5lIDw9IHBvc2l0aW9uLmxpbmUgJiYgdGhpcy5lbmQubGluZSA+PSBwb3NpdGlvbi5saW5lO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICB9XG4gIHNldFN0YXJ0KGxpbmUsIGNoYXJhY3Rlcikge1xuICAgIHRoaXMuc3RhcnQgPSBuZXcgUG9zaXRpb24obGluZSwgY2hhcmFjdGVyKTtcbiAgfVxuICBzZXRFbmQobGluZSwgY2hhcmFjdGVyKSB7XG4gICAgdGhpcy5lbmQgPSBuZXcgUG9zaXRpb24obGluZSwgY2hhcmFjdGVyKTtcbiAgfVxufVxuX19uYW1lKFJhbmdlLCBcIlJhbmdlXCIpO1xuY2xhc3MgUG9zaXRpb24ge1xuICBjb25zdHJ1Y3RvcihsaW5lLCBjaGFyYWN0ZXIpIHtcbiAgICB0aGlzLmxlc3NUaGFuT3JFcXVhbFRvID0gKHBvc2l0aW9uKSA9PiB0aGlzLmxpbmUgPCBwb3NpdGlvbi5saW5lIHx8IHRoaXMubGluZSA9PT0gcG9zaXRpb24ubGluZSAmJiB0aGlzLmNoYXJhY3RlciA8PSBwb3NpdGlvbi5jaGFyYWN0ZXI7XG4gICAgdGhpcy5saW5lID0gbGluZTtcbiAgICB0aGlzLmNoYXJhY3RlciA9IGNoYXJhY3RlcjtcbiAgfVxuICBzZXRMaW5lKGxpbmUpIHtcbiAgICB0aGlzLmxpbmUgPSBsaW5lO1xuICB9XG4gIHNldENoYXJhY3RlcihjaGFyYWN0ZXIpIHtcbiAgICB0aGlzLmNoYXJhY3RlciA9IGNoYXJhY3RlcjtcbiAgfVxufVxuX19uYW1lKFBvc2l0aW9uLCBcIlBvc2l0aW9uXCIpO1xuZXhwb3J0IHsgQ2hhcmFjdGVyU3RyZWFtIGFzIEMsIFBvc2l0aW9uIGFzIFAsIFJhbmdlIGFzIFIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///50045\n')},71441:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97480);\n/* harmony import */ var _show_hint_es_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(26079);\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(90398);\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(77304);\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(84275);\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(52433);\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(45397);\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(90316);\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(97359);\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(99878);\n/* harmony import */ var _index_es_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59361);\n/* harmony import */ var _Range_es_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(50045);\n/* harmony import */ var _onlineParser_es_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(98007);\n/* harmony import */ var _introspection_es_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(92584);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(67294);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73935);\nvar __defProp = Object.defineProperty;\nvar __name = (target, value) => __defProp(target, "name", { value, configurable: true });\n\n\n\n\n\n\n\n\n\nfunction getDefinitionState(tokenState) {\n  let definitionState;\n  forEachState(tokenState, (state) => {\n    switch (state.kind) {\n      case "Query":\n      case "ShortQuery":\n      case "Mutation":\n      case "Subscription":\n      case "FragmentDefinition":\n        definitionState = state;\n        break;\n    }\n  });\n  return definitionState;\n}\n__name(getDefinitionState, "getDefinitionState");\nfunction getFieldDef(schema, type, fieldName) {\n  if (fieldName === _introspection_es_js__WEBPACK_IMPORTED_MODULE_5__.S.name && schema.getQueryType() === type) {\n    return _introspection_es_js__WEBPACK_IMPORTED_MODULE_5__.S;\n  }\n  if (fieldName === _introspection_es_js__WEBPACK_IMPORTED_MODULE_5__.T.name && schema.getQueryType() === type) {\n    return _introspection_es_js__WEBPACK_IMPORTED_MODULE_5__.T;\n  }\n  if (fieldName === _introspection_es_js__WEBPACK_IMPORTED_MODULE_5__.a.name && (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isCompositeType */ .Gv)(type)) {\n    return _introspection_es_js__WEBPACK_IMPORTED_MODULE_5__.a;\n  }\n  if ("getFields" in type) {\n    return type.getFields()[fieldName];\n  }\n  return null;\n}\n__name(getFieldDef, "getFieldDef");\nfunction forEachState(stack, fn) {\n  const reverseStateStack = [];\n  let state = stack;\n  while (state === null || state === void 0 ? void 0 : state.kind) {\n    reverseStateStack.push(state);\n    state = state.prevState;\n  }\n  for (let i = reverseStateStack.length - 1; i >= 0; i--) {\n    fn(reverseStateStack[i]);\n  }\n}\n__name(forEachState, "forEachState");\nfunction objectValues(object) {\n  const keys = Object.keys(object);\n  const len = keys.length;\n  const values = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    values[i] = object[keys[i]];\n  }\n  return values;\n}\n__name(objectValues, "objectValues");\nfunction hintList(token, list) {\n  return filterAndSortList(list, normalizeText(token.string));\n}\n__name(hintList, "hintList");\nfunction filterAndSortList(list, text) {\n  if (!text) {\n    return filterNonEmpty(list, (entry) => !entry.isDeprecated);\n  }\n  const byProximity = list.map((entry) => ({\n    proximity: getProximity(normalizeText(entry.label), text),\n    entry\n  }));\n  return filterNonEmpty(filterNonEmpty(byProximity, (pair) => pair.proximity <= 2), (pair) => !pair.entry.isDeprecated).sort((a, b) => (a.entry.isDeprecated ? 1 : 0) - (b.entry.isDeprecated ? 1 : 0) || a.proximity - b.proximity || a.entry.label.length - b.entry.label.length).map((pair) => pair.entry);\n}\n__name(filterAndSortList, "filterAndSortList");\nfunction filterNonEmpty(array, predicate) {\n  const filtered = array.filter(predicate);\n  return filtered.length === 0 ? array : filtered;\n}\n__name(filterNonEmpty, "filterNonEmpty");\nfunction normalizeText(text) {\n  return text.toLowerCase().replace(/\\W/g, "");\n}\n__name(normalizeText, "normalizeText");\nfunction getProximity(suggestion, text) {\n  let proximity = lexicalDistance(text, suggestion);\n  if (suggestion.length > text.length) {\n    proximity -= suggestion.length - text.length - 1;\n    proximity += suggestion.indexOf(text) === 0 ? 0 : 0.5;\n  }\n  return proximity;\n}\n__name(getProximity, "getProximity");\nfunction lexicalDistance(a, b) {\n  let i;\n  let j;\n  const d = [];\n  const aLength = a.length;\n  const bLength = b.length;\n  for (i = 0; i <= aLength; i++) {\n    d[i] = [i];\n  }\n  for (j = 1; j <= bLength; j++) {\n    d[0][j] = j;\n  }\n  for (i = 1; i <= aLength; i++) {\n    for (j = 1; j <= bLength; j++) {\n      const cost = a[i - 1] === b[j - 1] ? 0 : 1;\n      d[i][j] = Math.min(d[i - 1][j] + 1, d[i][j - 1] + 1, d[i - 1][j - 1] + cost);\n      if (i > 1 && j > 1 && a[i - 1] === b[j - 2] && a[i - 2] === b[j - 1]) {\n        d[i][j] = Math.min(d[i][j], d[i - 2][j - 2] + cost);\n      }\n    }\n  }\n  return d[aLength][bLength];\n}\n__name(lexicalDistance, "lexicalDistance");\nconst SuggestionCommand = {\n  command: "editor.action.triggerSuggest",\n  title: "Suggestions"\n};\nconst collectFragmentDefs = /* @__PURE__ */ __name((op) => {\n  const externalFragments = [];\n  if (op) {\n    try {\n      (0,graphql__WEBPACK_IMPORTED_MODULE_9__/* .visit */ .Vn)((0,graphql__WEBPACK_IMPORTED_MODULE_10__/* .parse */ .Qc)(op), {\n        FragmentDefinition(def) {\n          externalFragments.push(def);\n        }\n      });\n    } catch (_a) {\n      return [];\n    }\n  }\n  return externalFragments;\n}, "collectFragmentDefs");\nfunction getAutocompleteSuggestions(schema, queryText, cursor, contextToken, fragmentDefs, options) {\n  var _a;\n  const opts = Object.assign(Object.assign({}, options), { schema });\n  const token = contextToken || getTokenAtPosition(queryText, cursor);\n  const state = token.state.kind === "Invalid" ? token.state.prevState : token.state;\n  if (!state) {\n    return [];\n  }\n  const kind = state.kind;\n  const step = state.step;\n  const typeInfo = getTypeInfo(schema, token.state);\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.DOCUMENT) {\n    return hintList(token, [\n      { label: "query", kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Function },\n      { label: "mutation", kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Function },\n      { label: "subscription", kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Function },\n      { label: "fragment", kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Function },\n      { label: "{", kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Constructor }\n    ]);\n  }\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.IMPLEMENTS || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.NAMED_TYPE && ((_a = state.prevState) === null || _a === void 0 ? void 0 : _a.kind) === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.IMPLEMENTS) {\n    return getSuggestionsForImplements(token, state, schema, queryText, typeInfo);\n  }\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.SELECTION_SET || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FIELD || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ALIASED_FIELD) {\n    return getSuggestionsForFieldNames(token, typeInfo, opts);\n  }\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ARGUMENTS || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ARGUMENT && step === 0) {\n    const argDefs = typeInfo.argDefs;\n    if (argDefs) {\n      return hintList(token, argDefs.map((argDef) => {\n        var _a2;\n        return {\n          label: argDef.name,\n          insertText: argDef.name + ": ",\n          command: SuggestionCommand,\n          detail: String(argDef.type),\n          documentation: (_a2 = argDef.description) !== null && _a2 !== void 0 ? _a2 : void 0,\n          kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Variable,\n          type: argDef.type\n        };\n      }));\n    }\n  }\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.OBJECT_VALUE || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.OBJECT_FIELD && step === 0) {\n    if (typeInfo.objectFieldDefs) {\n      const objectFields = objectValues(typeInfo.objectFieldDefs);\n      const completionKind = kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.OBJECT_VALUE ? _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Value : _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Field;\n      return hintList(token, objectFields.map((field) => {\n        var _a2;\n        return {\n          label: field.name,\n          detail: String(field.type),\n          documentation: (_a2 = field.description) !== null && _a2 !== void 0 ? _a2 : void 0,\n          kind: completionKind,\n          type: field.type\n        };\n      }));\n    }\n  }\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ENUM_VALUE || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.LIST_VALUE && step === 1 || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.OBJECT_FIELD && step === 2 || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ARGUMENT && step === 2) {\n    return getSuggestionsForInputValues(token, typeInfo, queryText, schema);\n  }\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.VARIABLE && step === 1) {\n    const namedInputType = (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .getNamedType */ .xC)(typeInfo.inputType);\n    const variableDefinitions = getVariableCompletions(queryText, schema, token);\n    return hintList(token, variableDefinitions.filter((v) => v.detail === (namedInputType === null || namedInputType === void 0 ? void 0 : namedInputType.name)));\n  }\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.TYPE_CONDITION && step === 1 || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.NAMED_TYPE && state.prevState != null && state.prevState.kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.TYPE_CONDITION) {\n    return getSuggestionsForFragmentTypeConditions(token, typeInfo, schema);\n  }\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FRAGMENT_SPREAD && step === 1) {\n    return getSuggestionsForFragmentSpread(token, typeInfo, schema, queryText, Array.isArray(fragmentDefs) ? fragmentDefs : collectFragmentDefs(fragmentDefs));\n  }\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.VARIABLE_DEFINITION && step === 2 || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.LIST_TYPE && step === 1 || kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.NAMED_TYPE && state.prevState && (state.prevState.kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.VARIABLE_DEFINITION || state.prevState.kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.LIST_TYPE || state.prevState.kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.NON_NULL_TYPE)) {\n    return getSuggestionsForVariableDefinition(token, schema);\n  }\n  if (kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.DIRECTIVE) {\n    return getSuggestionsForDirective(token, state, schema);\n  }\n  return [];\n}\n__name(getAutocompleteSuggestions, "getAutocompleteSuggestions");\nconst insertSuffix = ` {\n  $1\n}`;\nconst getInsertText = /* @__PURE__ */ __name((field) => {\n  const type = field.type;\n  if ((0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isCompositeType */ .Gv)(type)) {\n    return insertSuffix;\n  }\n  if ((0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isListType */ .HG)(type) && (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isCompositeType */ .Gv)(type.ofType)) {\n    return insertSuffix;\n  }\n  if ((0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isNonNullType */ .zM)(type)) {\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isCompositeType */ .Gv)(type.ofType)) {\n      return insertSuffix;\n    }\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isListType */ .HG)(type.ofType) && (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isCompositeType */ .Gv)(type.ofType.ofType)) {\n      return insertSuffix;\n    }\n  }\n  return null;\n}, "getInsertText");\nfunction getSuggestionsForFieldNames(token, typeInfo, options) {\n  var _a;\n  if (typeInfo.parentType) {\n    const parentType = typeInfo.parentType;\n    let fields = [];\n    if ("getFields" in parentType) {\n      fields = objectValues(parentType.getFields());\n    }\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isCompositeType */ .Gv)(parentType)) {\n      fields.push(graphql__WEBPACK_IMPORTED_MODULE_11__/* .TypeNameMetaFieldDef */ .hU);\n    }\n    if (parentType === ((_a = options === null || options === void 0 ? void 0 : options.schema) === null || _a === void 0 ? void 0 : _a.getQueryType())) {\n      fields.push(graphql__WEBPACK_IMPORTED_MODULE_11__/* .SchemaMetaFieldDef */ .Az, graphql__WEBPACK_IMPORTED_MODULE_11__/* .TypeMetaFieldDef */ .tF);\n    }\n    return hintList(token, fields.map((field, index) => {\n      var _a2;\n      const suggestion = {\n        sortText: String(index) + field.name,\n        label: field.name,\n        detail: String(field.type),\n        documentation: (_a2 = field.description) !== null && _a2 !== void 0 ? _a2 : void 0,\n        deprecated: Boolean(field.deprecationReason),\n        isDeprecated: Boolean(field.deprecationReason),\n        deprecationReason: field.deprecationReason,\n        kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Field,\n        type: field.type\n      };\n      const insertText = getInsertText(field);\n      if (insertText) {\n        suggestion.insertText = field.name + insertText;\n        suggestion.insertTextFormat = _index_es_js__WEBPACK_IMPORTED_MODULE_2__.I.Snippet;\n        suggestion.command = SuggestionCommand;\n      }\n      return suggestion;\n    }));\n  }\n  return [];\n}\n__name(getSuggestionsForFieldNames, "getSuggestionsForFieldNames");\nfunction getSuggestionsForInputValues(token, typeInfo, queryText, schema) {\n  const namedInputType = (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .getNamedType */ .xC)(typeInfo.inputType);\n  const queryVariables = getVariableCompletions(queryText, schema, token).filter((v) => v.detail === namedInputType.name);\n  if (namedInputType instanceof graphql__WEBPACK_IMPORTED_MODULE_8__/* .GraphQLEnumType */ .mR) {\n    const values = namedInputType.getValues();\n    return hintList(token, values.map((value) => {\n      var _a;\n      return {\n        label: value.name,\n        detail: String(namedInputType),\n        documentation: (_a = value.description) !== null && _a !== void 0 ? _a : void 0,\n        deprecated: Boolean(value.deprecationReason),\n        isDeprecated: Boolean(value.deprecationReason),\n        deprecationReason: value.deprecationReason,\n        kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.EnumMember,\n        type: namedInputType\n      };\n    }).concat(queryVariables));\n  } else if (namedInputType === graphql__WEBPACK_IMPORTED_MODULE_12__/* .GraphQLBoolean */ .EZ) {\n    return hintList(token, queryVariables.concat([\n      {\n        label: "true",\n        detail: String(graphql__WEBPACK_IMPORTED_MODULE_12__/* .GraphQLBoolean */ .EZ),\n        documentation: "Not false.",\n        kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Variable,\n        type: graphql__WEBPACK_IMPORTED_MODULE_12__/* .GraphQLBoolean */ .EZ\n      },\n      {\n        label: "false",\n        detail: String(graphql__WEBPACK_IMPORTED_MODULE_12__/* .GraphQLBoolean */ .EZ),\n        documentation: "Not true.",\n        kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Variable,\n        type: graphql__WEBPACK_IMPORTED_MODULE_12__/* .GraphQLBoolean */ .EZ\n      }\n    ]));\n  }\n  return queryVariables;\n}\n__name(getSuggestionsForInputValues, "getSuggestionsForInputValues");\nfunction getSuggestionsForImplements(token, tokenState, schema, documentText, typeInfo) {\n  if (tokenState.needsSeparator) {\n    return [];\n  }\n  const typeMap = schema.getTypeMap();\n  const schemaInterfaces = objectValues(typeMap).filter(graphql__WEBPACK_IMPORTED_MODULE_8__/* .isInterfaceType */ .oT);\n  const schemaInterfaceNames = schemaInterfaces.map(({ name }) => name);\n  const inlineInterfaces = /* @__PURE__ */ new Set();\n  runOnlineParser(documentText, (_, state) => {\n    var _a, _b, _c, _d, _e;\n    if (state.name) {\n      if (state.kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.INTERFACE_DEF && !schemaInterfaceNames.includes(state.name)) {\n        inlineInterfaces.add(state.name);\n      }\n      if (state.kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.NAMED_TYPE && ((_a = state.prevState) === null || _a === void 0 ? void 0 : _a.kind) === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.IMPLEMENTS) {\n        if (typeInfo.interfaceDef) {\n          const existingType = (_b = typeInfo.interfaceDef) === null || _b === void 0 ? void 0 : _b.getInterfaces().find(({ name }) => name === state.name);\n          if (existingType) {\n            return;\n          }\n          const type = schema.getType(state.name);\n          const interfaceConfig = (_c = typeInfo.interfaceDef) === null || _c === void 0 ? void 0 : _c.toConfig();\n          typeInfo.interfaceDef = new graphql__WEBPACK_IMPORTED_MODULE_8__/* .GraphQLInterfaceType */ .oW(Object.assign(Object.assign({}, interfaceConfig), { interfaces: [\n            ...interfaceConfig.interfaces,\n            type || new graphql__WEBPACK_IMPORTED_MODULE_8__/* .GraphQLInterfaceType */ .oW({ name: state.name, fields: {} })\n          ] }));\n        } else if (typeInfo.objectTypeDef) {\n          const existingType = (_d = typeInfo.objectTypeDef) === null || _d === void 0 ? void 0 : _d.getInterfaces().find(({ name }) => name === state.name);\n          if (existingType) {\n            return;\n          }\n          const type = schema.getType(state.name);\n          const objectTypeConfig = (_e = typeInfo.objectTypeDef) === null || _e === void 0 ? void 0 : _e.toConfig();\n          typeInfo.objectTypeDef = new graphql__WEBPACK_IMPORTED_MODULE_8__/* .GraphQLObjectType */ .h6(Object.assign(Object.assign({}, objectTypeConfig), { interfaces: [\n            ...objectTypeConfig.interfaces,\n            type || new graphql__WEBPACK_IMPORTED_MODULE_8__/* .GraphQLInterfaceType */ .oW({ name: state.name, fields: {} })\n          ] }));\n        }\n      }\n    }\n  });\n  const currentTypeToExtend = typeInfo.interfaceDef || typeInfo.objectTypeDef;\n  const siblingInterfaces = (currentTypeToExtend === null || currentTypeToExtend === void 0 ? void 0 : currentTypeToExtend.getInterfaces()) || [];\n  const siblingInterfaceNames = siblingInterfaces.map(({ name }) => name);\n  const possibleInterfaces = schemaInterfaces.concat([...inlineInterfaces].map((name) => ({ name }))).filter(({ name }) => name !== (currentTypeToExtend === null || currentTypeToExtend === void 0 ? void 0 : currentTypeToExtend.name) && !siblingInterfaceNames.includes(name));\n  return hintList(token, possibleInterfaces.map((type) => {\n    const result = {\n      label: type.name,\n      kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Interface,\n      type\n    };\n    if (type === null || type === void 0 ? void 0 : type.description) {\n      result.documentation = type.description;\n    }\n    return result;\n  }));\n}\n__name(getSuggestionsForImplements, "getSuggestionsForImplements");\nfunction getSuggestionsForFragmentTypeConditions(token, typeInfo, schema, _kind) {\n  let possibleTypes;\n  if (typeInfo.parentType) {\n    if ((0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isAbstractType */ .m0)(typeInfo.parentType)) {\n      const abstractType = (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .assertAbstractType */ .fU)(typeInfo.parentType);\n      const possibleObjTypes = schema.getPossibleTypes(abstractType);\n      const possibleIfaceMap = /* @__PURE__ */ Object.create(null);\n      possibleObjTypes.forEach((type) => {\n        type.getInterfaces().forEach((iface) => {\n          possibleIfaceMap[iface.name] = iface;\n        });\n      });\n      possibleTypes = possibleObjTypes.concat(objectValues(possibleIfaceMap));\n    } else {\n      possibleTypes = [typeInfo.parentType];\n    }\n  } else {\n    const typeMap = schema.getTypeMap();\n    possibleTypes = objectValues(typeMap).filter(graphql__WEBPACK_IMPORTED_MODULE_8__/* .isCompositeType */ .Gv);\n  }\n  return hintList(token, possibleTypes.map((type) => {\n    const namedType = (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .getNamedType */ .xC)(type);\n    return {\n      label: String(type),\n      documentation: (namedType === null || namedType === void 0 ? void 0 : namedType.description) || "",\n      kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Field\n    };\n  }));\n}\n__name(getSuggestionsForFragmentTypeConditions, "getSuggestionsForFragmentTypeConditions");\nfunction getSuggestionsForFragmentSpread(token, typeInfo, schema, queryText, fragmentDefs) {\n  if (!queryText) {\n    return [];\n  }\n  const typeMap = schema.getTypeMap();\n  const defState = getDefinitionState(token.state);\n  const fragments = getFragmentDefinitions(queryText);\n  if (fragmentDefs && fragmentDefs.length > 0) {\n    fragments.push(...fragmentDefs);\n  }\n  const relevantFrags = fragments.filter((frag) => typeMap[frag.typeCondition.name.value] && !(defState && defState.kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FRAGMENT_DEFINITION && defState.name === frag.name.value) && (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isCompositeType */ .Gv)(typeInfo.parentType) && (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .isCompositeType */ .Gv)(typeMap[frag.typeCondition.name.value]) && (0,graphql__WEBPACK_IMPORTED_MODULE_13__/* .doTypesOverlap */ .zR)(schema, typeInfo.parentType, typeMap[frag.typeCondition.name.value]));\n  return hintList(token, relevantFrags.map((frag) => ({\n    label: frag.name.value,\n    detail: String(typeMap[frag.typeCondition.name.value]),\n    documentation: `fragment ${frag.name.value} on ${frag.typeCondition.name.value}`,\n    kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Field,\n    type: typeMap[frag.typeCondition.name.value]\n  })));\n}\n__name(getSuggestionsForFragmentSpread, "getSuggestionsForFragmentSpread");\nconst getParentDefinition = /* @__PURE__ */ __name((state, kind) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n  if (((_a = state.prevState) === null || _a === void 0 ? void 0 : _a.kind) === kind) {\n    return state.prevState;\n  }\n  if (((_c = (_b = state.prevState) === null || _b === void 0 ? void 0 : _b.prevState) === null || _c === void 0 ? void 0 : _c.kind) === kind) {\n    return state.prevState.prevState;\n  }\n  if (((_f = (_e = (_d = state.prevState) === null || _d === void 0 ? void 0 : _d.prevState) === null || _e === void 0 ? void 0 : _e.prevState) === null || _f === void 0 ? void 0 : _f.kind) === kind) {\n    return state.prevState.prevState.prevState;\n  }\n  if (((_k = (_j = (_h = (_g = state.prevState) === null || _g === void 0 ? void 0 : _g.prevState) === null || _h === void 0 ? void 0 : _h.prevState) === null || _j === void 0 ? void 0 : _j.prevState) === null || _k === void 0 ? void 0 : _k.kind) === kind) {\n    return state.prevState.prevState.prevState.prevState;\n  }\n}, "getParentDefinition");\nfunction getVariableCompletions(queryText, schema, token) {\n  let variableName = null;\n  let variableType;\n  const definitions = /* @__PURE__ */ Object.create({});\n  runOnlineParser(queryText, (_, state) => {\n    if ((state === null || state === void 0 ? void 0 : state.kind) === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.VARIABLE && state.name) {\n      variableName = state.name;\n    }\n    if ((state === null || state === void 0 ? void 0 : state.kind) === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.NAMED_TYPE && variableName) {\n      const parentDefinition = getParentDefinition(state, _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.TYPE);\n      if (parentDefinition === null || parentDefinition === void 0 ? void 0 : parentDefinition.type) {\n        variableType = schema.getType(parentDefinition === null || parentDefinition === void 0 ? void 0 : parentDefinition.type);\n      }\n    }\n    if (variableName && variableType) {\n      if (!definitions[variableName]) {\n        definitions[variableName] = {\n          detail: variableType.toString(),\n          insertText: token.string === "$" ? variableName : "$" + variableName,\n          label: variableName,\n          type: variableType,\n          kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Variable\n        };\n        variableName = null;\n        variableType = null;\n      }\n    }\n  });\n  return objectValues(definitions);\n}\n__name(getVariableCompletions, "getVariableCompletions");\nfunction getFragmentDefinitions(queryText) {\n  const fragmentDefs = [];\n  runOnlineParser(queryText, (_, state) => {\n    if (state.kind === _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FRAGMENT_DEFINITION && state.name && state.type) {\n      fragmentDefs.push({\n        kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FRAGMENT_DEFINITION,\n        name: {\n          kind: graphql__WEBPACK_IMPORTED_MODULE_14__/* .Kind.NAME */ .h.NAME,\n          value: state.name\n        },\n        selectionSet: {\n          kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.SELECTION_SET,\n          selections: []\n        },\n        typeCondition: {\n          kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.NAMED_TYPE,\n          name: {\n            kind: graphql__WEBPACK_IMPORTED_MODULE_14__/* .Kind.NAME */ .h.NAME,\n            value: state.type\n          }\n        }\n      });\n    }\n  });\n  return fragmentDefs;\n}\n__name(getFragmentDefinitions, "getFragmentDefinitions");\nfunction getSuggestionsForVariableDefinition(token, schema, _kind) {\n  const inputTypeMap = schema.getTypeMap();\n  const inputTypes = objectValues(inputTypeMap).filter(graphql__WEBPACK_IMPORTED_MODULE_8__/* .isInputType */ .j$);\n  return hintList(token, inputTypes.map((type) => ({\n    label: type.name,\n    documentation: type.description,\n    kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Variable\n  })));\n}\n__name(getSuggestionsForVariableDefinition, "getSuggestionsForVariableDefinition");\nfunction getSuggestionsForDirective(token, state, schema, _kind) {\n  var _a;\n  if ((_a = state.prevState) === null || _a === void 0 ? void 0 : _a.kind) {\n    const directives = schema.getDirectives().filter((directive) => canUseDirective(state.prevState, directive));\n    return hintList(token, directives.map((directive) => ({\n      label: directive.name,\n      documentation: directive.description || "",\n      kind: _index_es_js__WEBPACK_IMPORTED_MODULE_2__.C.Function\n    })));\n  }\n  return [];\n}\n__name(getSuggestionsForDirective, "getSuggestionsForDirective");\nfunction getTokenAtPosition(queryText, cursor) {\n  let styleAtCursor = null;\n  let stateAtCursor = null;\n  let stringAtCursor = null;\n  const token = runOnlineParser(queryText, (stream, state, style, index) => {\n    if (index === cursor.line) {\n      if (stream.getCurrentPosition() >= cursor.character) {\n        styleAtCursor = style;\n        stateAtCursor = Object.assign({}, state);\n        stringAtCursor = stream.current();\n        return "BREAK";\n      }\n    }\n  });\n  return {\n    start: token.start,\n    end: token.end,\n    string: stringAtCursor || token.string,\n    state: stateAtCursor || token.state,\n    style: styleAtCursor || token.style\n  };\n}\n__name(getTokenAtPosition, "getTokenAtPosition");\nfunction runOnlineParser(queryText, callback) {\n  const lines = queryText.split("\\n");\n  const parser = (0,_onlineParser_es_js__WEBPACK_IMPORTED_MODULE_4__.o)();\n  let state = parser.startState();\n  let style = "";\n  let stream = new _Range_es_js__WEBPACK_IMPORTED_MODULE_3__.C("");\n  for (let i = 0; i < lines.length; i++) {\n    stream = new _Range_es_js__WEBPACK_IMPORTED_MODULE_3__.C(lines[i]);\n    while (!stream.eol()) {\n      style = parser.token(stream, state);\n      const code = callback(stream, state, style, i);\n      if (code === "BREAK") {\n        break;\n      }\n    }\n    callback(stream, state, style, i);\n    if (!state.kind) {\n      state = parser.startState();\n    }\n  }\n  return {\n    start: stream.getStartOfToken(),\n    end: stream.getCurrentPosition(),\n    string: stream.current(),\n    state,\n    style\n  };\n}\n__name(runOnlineParser, "runOnlineParser");\nfunction canUseDirective(state, directive) {\n  var _a;\n  if (!state || !state.kind) {\n    return false;\n  }\n  const kind = state.kind;\n  const locations = directive.locations;\n  switch (kind) {\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.QUERY:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.QUERY */ .B.QUERY) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.MUTATION:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.MUTATION */ .B.MUTATION) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.SUBSCRIPTION:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.SUBSCRIPTION */ .B.SUBSCRIPTION) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FIELD:\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ALIASED_FIELD:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.FIELD */ .B.FIELD) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FRAGMENT_DEFINITION:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.FRAGMENT_DEFINITION */ .B.FRAGMENT_DEFINITION) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FRAGMENT_SPREAD:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.FRAGMENT_SPREAD */ .B.FRAGMENT_SPREAD) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.INLINE_FRAGMENT:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.INLINE_FRAGMENT */ .B.INLINE_FRAGMENT) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.SCHEMA_DEF:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.SCHEMA */ .B.SCHEMA) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.SCALAR_DEF:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.SCALAR */ .B.SCALAR) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.OBJECT_TYPE_DEF:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.OBJECT */ .B.OBJECT) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FIELD_DEF:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.FIELD_DEFINITION */ .B.FIELD_DEFINITION) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.INTERFACE_DEF:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.INTERFACE */ .B.INTERFACE) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.UNION_DEF:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.UNION */ .B.UNION) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ENUM_DEF:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.ENUM */ .B.ENUM) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ENUM_VALUE:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.ENUM_VALUE */ .B.ENUM_VALUE) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.INPUT_DEF:\n      return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.INPUT_OBJECT */ .B.INPUT_OBJECT) !== -1;\n    case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.INPUT_VALUE_DEF:\n      const prevStateKind = (_a = state.prevState) === null || _a === void 0 ? void 0 : _a.kind;\n      switch (prevStateKind) {\n        case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ARGUMENTS_DEF:\n          return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.ARGUMENT_DEFINITION */ .B.ARGUMENT_DEFINITION) !== -1;\n        case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.INPUT_DEF:\n          return locations.indexOf(graphql__WEBPACK_IMPORTED_MODULE_15__/* .DirectiveLocation.INPUT_FIELD_DEFINITION */ .B.INPUT_FIELD_DEFINITION) !== -1;\n      }\n  }\n  return false;\n}\n__name(canUseDirective, "canUseDirective");\nfunction getTypeInfo(schema, tokenState) {\n  let argDef;\n  let argDefs;\n  let directiveDef;\n  let enumValue;\n  let fieldDef;\n  let inputType;\n  let objectTypeDef;\n  let objectFieldDefs;\n  let parentType;\n  let type;\n  let interfaceDef;\n  forEachState(tokenState, (state) => {\n    var _a;\n    switch (state.kind) {\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.QUERY:\n      case "ShortQuery":\n        type = schema.getQueryType();\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.MUTATION:\n        type = schema.getMutationType();\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.SUBSCRIPTION:\n        type = schema.getSubscriptionType();\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.INLINE_FRAGMENT:\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FRAGMENT_DEFINITION:\n        if (state.type) {\n          type = schema.getType(state.type);\n        }\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FIELD:\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ALIASED_FIELD: {\n        if (!type || !state.name) {\n          fieldDef = null;\n        } else {\n          fieldDef = parentType ? getFieldDef(schema, parentType, state.name) : null;\n          type = fieldDef ? fieldDef.type : null;\n        }\n        break;\n      }\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.SELECTION_SET:\n        parentType = (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .getNamedType */ .xC)(type);\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.DIRECTIVE:\n        directiveDef = state.name ? schema.getDirective(state.name) : null;\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.INTERFACE_DEF:\n        if (state.name) {\n          objectTypeDef = null;\n          interfaceDef = new graphql__WEBPACK_IMPORTED_MODULE_8__/* .GraphQLInterfaceType */ .oW({\n            name: state.name,\n            interfaces: [],\n            fields: {}\n          });\n        }\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.OBJECT_TYPE_DEF:\n        if (state.name) {\n          interfaceDef = null;\n          objectTypeDef = new graphql__WEBPACK_IMPORTED_MODULE_8__/* .GraphQLObjectType */ .h6({\n            name: state.name,\n            interfaces: [],\n            fields: {}\n          });\n        }\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ARGUMENTS: {\n        if (!state.prevState) {\n          argDefs = null;\n        } else {\n          switch (state.prevState.kind) {\n            case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.FIELD:\n              argDefs = fieldDef && fieldDef.args;\n              break;\n            case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.DIRECTIVE:\n              argDefs = directiveDef && directiveDef.args;\n              break;\n            case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ALIASED_FIELD: {\n              const name = (_a = state.prevState) === null || _a === void 0 ? void 0 : _a.name;\n              if (!name) {\n                argDefs = null;\n                break;\n              }\n              const field = parentType ? getFieldDef(schema, parentType, name) : null;\n              if (!field) {\n                argDefs = null;\n                break;\n              }\n              argDefs = field.args;\n              break;\n            }\n            default:\n              argDefs = null;\n              break;\n          }\n        }\n        break;\n      }\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ARGUMENT:\n        if (argDefs) {\n          for (let i = 0; i < argDefs.length; i++) {\n            if (argDefs[i].name === state.name) {\n              argDef = argDefs[i];\n              break;\n            }\n          }\n        }\n        inputType = argDef === null || argDef === void 0 ? void 0 : argDef.type;\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.ENUM_VALUE:\n        const enumType = (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .getNamedType */ .xC)(inputType);\n        enumValue = enumType instanceof graphql__WEBPACK_IMPORTED_MODULE_8__/* .GraphQLEnumType */ .mR ? enumType.getValues().find((val) => val.value === state.name) : null;\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.LIST_VALUE:\n        const nullableType = (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .getNullableType */ .tf)(inputType);\n        inputType = nullableType instanceof graphql__WEBPACK_IMPORTED_MODULE_8__/* .GraphQLList */ .p2 ? nullableType.ofType : null;\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.OBJECT_VALUE:\n        const objectType = (0,graphql__WEBPACK_IMPORTED_MODULE_8__/* .getNamedType */ .xC)(inputType);\n        objectFieldDefs = objectType instanceof graphql__WEBPACK_IMPORTED_MODULE_8__/* .GraphQLInputObjectType */ .sR ? objectType.getFields() : null;\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.OBJECT_FIELD:\n        const objectField = state.name && objectFieldDefs ? objectFieldDefs[state.name] : null;\n        inputType = objectField === null || objectField === void 0 ? void 0 : objectField.type;\n        break;\n      case _index_es_js__WEBPACK_IMPORTED_MODULE_2__.R.NAMED_TYPE:\n        if (state.name) {\n          type = schema.getType(state.name);\n        }\n        break;\n    }\n  });\n  return {\n    argDef,\n    argDefs,\n    directiveDef,\n    enumValue,\n    fieldDef,\n    inputType,\n    objectFieldDefs,\n    parentType,\n    type,\n    interfaceDef,\n    objectTypeDef\n  };\n}\n__name(getTypeInfo, "getTypeInfo");\n_codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__.C.registerHelper("hint", "graphql", (editor, options) => {\n  const schema = options.schema;\n  if (!schema) {\n    return;\n  }\n  const cur = editor.getCursor();\n  const token = editor.getTokenAt(cur);\n  const tokenStart = token.type !== null && /"|\\w/.test(token.string[0]) ? token.start : token.end;\n  const position = new _Range_es_js__WEBPACK_IMPORTED_MODULE_3__.P(cur.line, tokenStart);\n  const rawResults = getAutocompleteSuggestions(schema, editor.getValue(), position, token, options.externalFragments);\n  const results = {\n    list: rawResults.map((item) => ({\n      text: item.label,\n      type: item.type,\n      description: item.documentation,\n      isDeprecated: item.isDeprecated,\n      deprecationReason: item.deprecationReason\n    })),\n    from: { line: cur.line, ch: tokenStart },\n    to: { line: cur.line, ch: token.end }\n  };\n  if ((results === null || results === void 0 ? void 0 : results.list) && results.list.length > 0) {\n    results.from = _codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__.C.Pos(results.from.line, results.from.ch);\n    results.to = _codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__.C.Pos(results.to.line, results.to.ch);\n    _codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__.C.signal(editor, "hasCompletion", editor, results, token);\n  }\n  return results;\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxpQkFBaUIseURBQXVCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9EQUFrQjtBQUM3QjtBQUNBLDBCQUEwQixvQkFBb0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsc0RBQW9CO0FBQy9CLHlCQUF5QiwrREFBWTtBQUNyQyx3Q0FBd0MsOERBQWU7QUFDdkQ7QUFDQSxXQUFXLHNEQUFvQjtBQUMvQiw2QkFBNkIsa0VBQWU7QUFDNUMsNENBQTRDLDBEQUFXO0FBQ3ZEO0FBQ0EsV0FBVyx3REFBc0I7QUFDakMsMkJBQTJCLCtEQUFZO0FBQ3ZDLGdEQUFnRCxxRUFBc0I7QUFDdEU7QUFDQSxXQUFXLHdEQUFzQjtBQUNqQztBQUNBO0FBQ0E7QUFDQSxXQUFXLHNEQUFvQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwyQ0FBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVksZ0NBQWdDO0FBQzVDLFVBQVU7QUFDVjtBQUNBO0FBQ0EsbUJBQW1CLG9EQUFjO0FBQ2pDLGlCQUFpQixvREFBYztBQUMvQixJQUFJLHVEQUFpQjtBQUNyQjtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NhY2hpcWwtZGVtby8uL25vZGVfbW9kdWxlcy9AZ3JhcGhpcWwvcmVhY3QvZGlzdC9oaW50LmVzLmpzPzdjMjAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX25hbWUgPSAodGFyZ2V0LCB2YWx1ZSkgPT4gX19kZWZQcm9wKHRhcmdldCwgXCJuYW1lXCIsIHsgdmFsdWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcbmltcG9ydCB7IEMgYXMgQ29kZU1pcnJvciB9IGZyb20gXCIuL2NvZGVtaXJyb3IuZXMuanNcIjtcbmltcG9ydCBcIi4vc2hvdy1oaW50LmVzLmpzXCI7XG5pbXBvcnQgeyBpc0NvbXBvc2l0ZVR5cGUsIGdldE5hbWVkVHlwZSwgVHlwZU5hbWVNZXRhRmllbGREZWYgYXMgVHlwZU5hbWVNZXRhRmllbGREZWYkMSwgU2NoZW1hTWV0YUZpZWxkRGVmIGFzIFNjaGVtYU1ldGFGaWVsZERlZiQxLCBUeXBlTWV0YUZpZWxkRGVmIGFzIFR5cGVNZXRhRmllbGREZWYkMSwgR3JhcGhRTEVudW1UeXBlLCBHcmFwaFFMQm9vbGVhbiwgaXNJbnRlcmZhY2VUeXBlLCBpc0Fic3RyYWN0VHlwZSwgYXNzZXJ0QWJzdHJhY3RUeXBlLCBkb1R5cGVzT3ZlcmxhcCwgaXNJbnB1dFR5cGUsIERpcmVjdGl2ZUxvY2F0aW9uLCB2aXNpdCwgcGFyc2UsIGlzTGlzdFR5cGUsIGlzTm9uTnVsbFR5cGUsIEdyYXBoUUxJbnRlcmZhY2VUeXBlLCBHcmFwaFFMT2JqZWN0VHlwZSwgS2luZCwgR3JhcGhRTElucHV0T2JqZWN0VHlwZSwgZ2V0TnVsbGFibGVUeXBlLCBHcmFwaFFMTGlzdCB9IGZyb20gXCJncmFwaHFsXCI7XG5pbXBvcnQgeyBSIGFzIFJ1bGVLaW5kcywgQyBhcyBDb21wbGV0aW9uSXRlbUtpbmQsIEkgYXMgSW5zZXJ0VGV4dEZvcm1hdCB9IGZyb20gXCIuL2luZGV4LmVzLmpzXCI7XG5pbXBvcnQgeyBDIGFzIENoYXJhY3RlclN0cmVhbSwgUCBhcyBQb3NpdGlvbiB9IGZyb20gXCIuL1JhbmdlLmVzLmpzXCI7XG5pbXBvcnQgeyBvIGFzIG9ubGluZVBhcnNlciB9IGZyb20gXCIuL29ubGluZVBhcnNlci5lcy5qc1wiO1xuaW1wb3J0IHsgUyBhcyBTY2hlbWFNZXRhRmllbGREZWYsIFQgYXMgVHlwZU1ldGFGaWVsZERlZiwgYSBhcyBUeXBlTmFtZU1ldGFGaWVsZERlZiB9IGZyb20gXCIuL2ludHJvc3BlY3Rpb24uZXMuanNcIjtcbmltcG9ydCBcInJlYWN0XCI7XG5pbXBvcnQgXCJyZWFjdC1kb21cIjtcbmZ1bmN0aW9uIGdldERlZmluaXRpb25TdGF0ZSh0b2tlblN0YXRlKSB7XG4gIGxldCBkZWZpbml0aW9uU3RhdGU7XG4gIGZvckVhY2hTdGF0ZSh0b2tlblN0YXRlLCAoc3RhdGUpID0+IHtcbiAgICBzd2l0Y2ggKHN0YXRlLmtpbmQpIHtcbiAgICAgIGNhc2UgXCJRdWVyeVwiOlxuICAgICAgY2FzZSBcIlNob3J0UXVlcnlcIjpcbiAgICAgIGNhc2UgXCJNdXRhdGlvblwiOlxuICAgICAgY2FzZSBcIlN1YnNjcmlwdGlvblwiOlxuICAgICAgY2FzZSBcIkZyYWdtZW50RGVmaW5pdGlvblwiOlxuICAgICAgICBkZWZpbml0aW9uU3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGRlZmluaXRpb25TdGF0ZTtcbn1cbl9fbmFtZShnZXREZWZpbml0aW9uU3RhdGUsIFwiZ2V0RGVmaW5pdGlvblN0YXRlXCIpO1xuZnVuY3Rpb24gZ2V0RmllbGREZWYoc2NoZW1hLCB0eXBlLCBmaWVsZE5hbWUpIHtcbiAgaWYgKGZpZWxkTmFtZSA9PT0gU2NoZW1hTWV0YUZpZWxkRGVmLm5hbWUgJiYgc2NoZW1hLmdldFF1ZXJ5VHlwZSgpID09PSB0eXBlKSB7XG4gICAgcmV0dXJuIFNjaGVtYU1ldGFGaWVsZERlZjtcbiAgfVxuICBpZiAoZmllbGROYW1lID09PSBUeXBlTWV0YUZpZWxkRGVmLm5hbWUgJiYgc2NoZW1hLmdldFF1ZXJ5VHlwZSgpID09PSB0eXBlKSB7XG4gICAgcmV0dXJuIFR5cGVNZXRhRmllbGREZWY7XG4gIH1cbiAgaWYgKGZpZWxkTmFtZSA9PT0gVHlwZU5hbWVNZXRhRmllbGREZWYubmFtZSAmJiBpc0NvbXBvc2l0ZVR5cGUodHlwZSkpIHtcbiAgICByZXR1cm4gVHlwZU5hbWVNZXRhRmllbGREZWY7XG4gIH1cbiAgaWYgKFwiZ2V0RmllbGRzXCIgaW4gdHlwZSkge1xuICAgIHJldHVybiB0eXBlLmdldEZpZWxkcygpW2ZpZWxkTmFtZV07XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5fX25hbWUoZ2V0RmllbGREZWYsIFwiZ2V0RmllbGREZWZcIik7XG5mdW5jdGlvbiBmb3JFYWNoU3RhdGUoc3RhY2ssIGZuKSB7XG4gIGNvbnN0IHJldmVyc2VTdGF0ZVN0YWNrID0gW107XG4gIGxldCBzdGF0ZSA9IHN0YWNrO1xuICB3aGlsZSAoc3RhdGUgPT09IG51bGwgfHwgc3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0YXRlLmtpbmQpIHtcbiAgICByZXZlcnNlU3RhdGVTdGFjay5wdXNoKHN0YXRlKTtcbiAgICBzdGF0ZSA9IHN0YXRlLnByZXZTdGF0ZTtcbiAgfVxuICBmb3IgKGxldCBpID0gcmV2ZXJzZVN0YXRlU3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBmbihyZXZlcnNlU3RhdGVTdGFja1tpXSk7XG4gIH1cbn1cbl9fbmFtZShmb3JFYWNoU3RhdGUsIFwiZm9yRWFjaFN0YXRlXCIpO1xuZnVuY3Rpb24gb2JqZWN0VmFsdWVzKG9iamVjdCkge1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgY29uc3QgbGVuID0ga2V5cy5sZW5ndGg7XG4gIGNvbnN0IHZhbHVlcyA9IG5ldyBBcnJheShsZW4pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFsdWVzW2ldID0gb2JqZWN0W2tleXNbaV1dO1xuICB9XG4gIHJldHVybiB2YWx1ZXM7XG59XG5fX25hbWUob2JqZWN0VmFsdWVzLCBcIm9iamVjdFZhbHVlc1wiKTtcbmZ1bmN0aW9uIGhpbnRMaXN0KHRva2VuLCBsaXN0KSB7XG4gIHJldHVybiBmaWx0ZXJBbmRTb3J0TGlzdChsaXN0LCBub3JtYWxpemVUZXh0KHRva2VuLnN0cmluZykpO1xufVxuX19uYW1lKGhpbnRMaXN0LCBcImhpbnRMaXN0XCIpO1xuZnVuY3Rpb24gZmlsdGVyQW5kU29ydExpc3QobGlzdCwgdGV4dCkge1xuICBpZiAoIXRleHQpIHtcbiAgICByZXR1cm4gZmlsdGVyTm9uRW1wdHkobGlzdCwgKGVudHJ5KSA9PiAhZW50cnkuaXNEZXByZWNhdGVkKTtcbiAgfVxuICBjb25zdCBieVByb3hpbWl0eSA9IGxpc3QubWFwKChlbnRyeSkgPT4gKHtcbiAgICBwcm94aW1pdHk6IGdldFByb3hpbWl0eShub3JtYWxpemVUZXh0KGVudHJ5LmxhYmVsKSwgdGV4dCksXG4gICAgZW50cnlcbiAgfSkpO1xuICByZXR1cm4gZmlsdGVyTm9uRW1wdHkoZmlsdGVyTm9uRW1wdHkoYnlQcm94aW1pdHksIChwYWlyKSA9PiBwYWlyLnByb3hpbWl0eSA8PSAyKSwgKHBhaXIpID0+ICFwYWlyLmVudHJ5LmlzRGVwcmVjYXRlZCkuc29ydCgoYSwgYikgPT4gKGEuZW50cnkuaXNEZXByZWNhdGVkID8gMSA6IDApIC0gKGIuZW50cnkuaXNEZXByZWNhdGVkID8gMSA6IDApIHx8IGEucHJveGltaXR5IC0gYi5wcm94aW1pdHkgfHwgYS5lbnRyeS5sYWJlbC5sZW5ndGggLSBiLmVudHJ5LmxhYmVsLmxlbmd0aCkubWFwKChwYWlyKSA9PiBwYWlyLmVudHJ5KTtcbn1cbl9fbmFtZShmaWx0ZXJBbmRTb3J0TGlzdCwgXCJmaWx0ZXJBbmRTb3J0TGlzdFwiKTtcbmZ1bmN0aW9uIGZpbHRlck5vbkVtcHR5KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgY29uc3QgZmlsdGVyZWQgPSBhcnJheS5maWx0ZXIocHJlZGljYXRlKTtcbiAgcmV0dXJuIGZpbHRlcmVkLmxlbmd0aCA9PT0gMCA/IGFycmF5IDogZmlsdGVyZWQ7XG59XG5fX25hbWUoZmlsdGVyTm9uRW1wdHksIFwiZmlsdGVyTm9uRW1wdHlcIik7XG5mdW5jdGlvbiBub3JtYWxpemVUZXh0KHRleHQpIHtcbiAgcmV0dXJuIHRleHQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXFcvZywgXCJcIik7XG59XG5fX25hbWUobm9ybWFsaXplVGV4dCwgXCJub3JtYWxpemVUZXh0XCIpO1xuZnVuY3Rpb24gZ2V0UHJveGltaXR5KHN1Z2dlc3Rpb24sIHRleHQpIHtcbiAgbGV0IHByb3hpbWl0eSA9IGxleGljYWxEaXN0YW5jZSh0ZXh0LCBzdWdnZXN0aW9uKTtcbiAgaWYgKHN1Z2dlc3Rpb24ubGVuZ3RoID4gdGV4dC5sZW5ndGgpIHtcbiAgICBwcm94aW1pdHkgLT0gc3VnZ2VzdGlvbi5sZW5ndGggLSB0ZXh0Lmxlbmd0aCAtIDE7XG4gICAgcHJveGltaXR5ICs9IHN1Z2dlc3Rpb24uaW5kZXhPZih0ZXh0KSA9PT0gMCA/IDAgOiAwLjU7XG4gIH1cbiAgcmV0dXJuIHByb3hpbWl0eTtcbn1cbl9fbmFtZShnZXRQcm94aW1pdHksIFwiZ2V0UHJveGltaXR5XCIpO1xuZnVuY3Rpb24gbGV4aWNhbERpc3RhbmNlKGEsIGIpIHtcbiAgbGV0IGk7XG4gIGxldCBqO1xuICBjb25zdCBkID0gW107XG4gIGNvbnN0IGFMZW5ndGggPSBhLmxlbmd0aDtcbiAgY29uc3QgYkxlbmd0aCA9IGIubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDw9IGFMZW5ndGg7IGkrKykge1xuICAgIGRbaV0gPSBbaV07XG4gIH1cbiAgZm9yIChqID0gMTsgaiA8PSBiTGVuZ3RoOyBqKyspIHtcbiAgICBkWzBdW2pdID0gajtcbiAgfVxuICBmb3IgKGkgPSAxOyBpIDw9IGFMZW5ndGg7IGkrKykge1xuICAgIGZvciAoaiA9IDE7IGogPD0gYkxlbmd0aDsgaisrKSB7XG4gICAgICBjb25zdCBjb3N0ID0gYVtpIC0gMV0gPT09IGJbaiAtIDFdID8gMCA6IDE7XG4gICAgICBkW2ldW2pdID0gTWF0aC5taW4oZFtpIC0gMV1bal0gKyAxLCBkW2ldW2ogLSAxXSArIDEsIGRbaSAtIDFdW2ogLSAxXSArIGNvc3QpO1xuICAgICAgaWYgKGkgPiAxICYmIGogPiAxICYmIGFbaSAtIDFdID09PSBiW2ogLSAyXSAmJiBhW2kgLSAyXSA9PT0gYltqIC0gMV0pIHtcbiAgICAgICAgZFtpXVtqXSA9IE1hdGgubWluKGRbaV1bal0sIGRbaSAtIDJdW2ogLSAyXSArIGNvc3QpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZFthTGVuZ3RoXVtiTGVuZ3RoXTtcbn1cbl9fbmFtZShsZXhpY2FsRGlzdGFuY2UsIFwibGV4aWNhbERpc3RhbmNlXCIpO1xuY29uc3QgU3VnZ2VzdGlvbkNvbW1hbmQgPSB7XG4gIGNvbW1hbmQ6IFwiZWRpdG9yLmFjdGlvbi50cmlnZ2VyU3VnZ2VzdFwiLFxuICB0aXRsZTogXCJTdWdnZXN0aW9uc1wiXG59O1xuY29uc3QgY29sbGVjdEZyYWdtZW50RGVmcyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKG9wKSA9PiB7XG4gIGNvbnN0IGV4dGVybmFsRnJhZ21lbnRzID0gW107XG4gIGlmIChvcCkge1xuICAgIHRyeSB7XG4gICAgICB2aXNpdChwYXJzZShvcCksIHtcbiAgICAgICAgRnJhZ21lbnREZWZpbml0aW9uKGRlZikge1xuICAgICAgICAgIGV4dGVybmFsRnJhZ21lbnRzLnB1c2goZGVmKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoX2EpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGV4dGVybmFsRnJhZ21lbnRzO1xufSwgXCJjb2xsZWN0RnJhZ21lbnREZWZzXCIpO1xuZnVuY3Rpb24gZ2V0QXV0b2NvbXBsZXRlU3VnZ2VzdGlvbnMoc2NoZW1hLCBxdWVyeVRleHQsIGN1cnNvciwgY29udGV4dFRva2VuLCBmcmFnbWVudERlZnMsIG9wdGlvbnMpIHtcbiAgdmFyIF9hO1xuICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgeyBzY2hlbWEgfSk7XG4gIGNvbnN0IHRva2VuID0gY29udGV4dFRva2VuIHx8IGdldFRva2VuQXRQb3NpdGlvbihxdWVyeVRleHQsIGN1cnNvcik7XG4gIGNvbnN0IHN0YXRlID0gdG9rZW4uc3RhdGUua2luZCA9PT0gXCJJbnZhbGlkXCIgPyB0b2tlbi5zdGF0ZS5wcmV2U3RhdGUgOiB0b2tlbi5zdGF0ZTtcbiAgaWYgKCFzdGF0ZSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBjb25zdCBraW5kID0gc3RhdGUua2luZDtcbiAgY29uc3Qgc3RlcCA9IHN0YXRlLnN0ZXA7XG4gIGNvbnN0IHR5cGVJbmZvID0gZ2V0VHlwZUluZm8oc2NoZW1hLCB0b2tlbi5zdGF0ZSk7XG4gIGlmIChraW5kID09PSBSdWxlS2luZHMuRE9DVU1FTlQpIHtcbiAgICByZXR1cm4gaGludExpc3QodG9rZW4sIFtcbiAgICAgIHsgbGFiZWw6IFwicXVlcnlcIiwga2luZDogQ29tcGxldGlvbkl0ZW1LaW5kLkZ1bmN0aW9uIH0sXG4gICAgICB7IGxhYmVsOiBcIm11dGF0aW9uXCIsIGtpbmQ6IENvbXBsZXRpb25JdGVtS2luZC5GdW5jdGlvbiB9LFxuICAgICAgeyBsYWJlbDogXCJzdWJzY3JpcHRpb25cIiwga2luZDogQ29tcGxldGlvbkl0ZW1LaW5kLkZ1bmN0aW9uIH0sXG4gICAgICB7IGxhYmVsOiBcImZyYWdtZW50XCIsIGtpbmQ6IENvbXBsZXRpb25JdGVtS2luZC5GdW5jdGlvbiB9LFxuICAgICAgeyBsYWJlbDogXCJ7XCIsIGtpbmQ6IENvbXBsZXRpb25JdGVtS2luZC5Db25zdHJ1Y3RvciB9XG4gICAgXSk7XG4gIH1cbiAgaWYgKGtpbmQgPT09IFJ1bGVLaW5kcy5JTVBMRU1FTlRTIHx8IGtpbmQgPT09IFJ1bGVLaW5kcy5OQU1FRF9UWVBFICYmICgoX2EgPSBzdGF0ZS5wcmV2U3RhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5raW5kKSA9PT0gUnVsZUtpbmRzLklNUExFTUVOVFMpIHtcbiAgICByZXR1cm4gZ2V0U3VnZ2VzdGlvbnNGb3JJbXBsZW1lbnRzKHRva2VuLCBzdGF0ZSwgc2NoZW1hLCBxdWVyeVRleHQsIHR5cGVJbmZvKTtcbiAgfVxuICBpZiAoa2luZCA9PT0gUnVsZUtpbmRzLlNFTEVDVElPTl9TRVQgfHwga2luZCA9PT0gUnVsZUtpbmRzLkZJRUxEIHx8IGtpbmQgPT09IFJ1bGVLaW5kcy5BTElBU0VEX0ZJRUxEKSB7XG4gICAgcmV0dXJuIGdldFN1Z2dlc3Rpb25zRm9yRmllbGROYW1lcyh0b2tlbiwgdHlwZUluZm8sIG9wdHMpO1xuICB9XG4gIGlmIChraW5kID09PSBSdWxlS2luZHMuQVJHVU1FTlRTIHx8IGtpbmQgPT09IFJ1bGVLaW5kcy5BUkdVTUVOVCAmJiBzdGVwID09PSAwKSB7XG4gICAgY29uc3QgYXJnRGVmcyA9IHR5cGVJbmZvLmFyZ0RlZnM7XG4gICAgaWYgKGFyZ0RlZnMpIHtcbiAgICAgIHJldHVybiBoaW50TGlzdCh0b2tlbiwgYXJnRGVmcy5tYXAoKGFyZ0RlZikgPT4ge1xuICAgICAgICB2YXIgX2EyO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxhYmVsOiBhcmdEZWYubmFtZSxcbiAgICAgICAgICBpbnNlcnRUZXh0OiBhcmdEZWYubmFtZSArIFwiOiBcIixcbiAgICAgICAgICBjb21tYW5kOiBTdWdnZXN0aW9uQ29tbWFuZCxcbiAgICAgICAgICBkZXRhaWw6IFN0cmluZyhhcmdEZWYudHlwZSksXG4gICAgICAgICAgZG9jdW1lbnRhdGlvbjogKF9hMiA9IGFyZ0RlZi5kZXNjcmlwdGlvbikgIT09IG51bGwgJiYgX2EyICE9PSB2b2lkIDAgPyBfYTIgOiB2b2lkIDAsXG4gICAgICAgICAga2luZDogQ29tcGxldGlvbkl0ZW1LaW5kLlZhcmlhYmxlLFxuICAgICAgICAgIHR5cGU6IGFyZ0RlZi50eXBlXG4gICAgICAgIH07XG4gICAgICB9KSk7XG4gICAgfVxuICB9XG4gIGlmIChraW5kID09PSBSdWxlS2luZHMuT0JKRUNUX1ZBTFVFIHx8IGtpbmQgPT09IFJ1bGVLaW5kcy5PQkpFQ1RfRklFTEQgJiYgc3RlcCA9PT0gMCkge1xuICAgIGlmICh0eXBlSW5mby5vYmplY3RGaWVsZERlZnMpIHtcbiAgICAgIGNvbnN0IG9iamVjdEZpZWxkcyA9IG9iamVjdFZhbHVlcyh0eXBlSW5mby5vYmplY3RGaWVsZERlZnMpO1xuICAgICAgY29uc3QgY29tcGxldGlvbktpbmQgPSBraW5kID09PSBSdWxlS2luZHMuT0JKRUNUX1ZBTFVFID8gQ29tcGxldGlvbkl0ZW1LaW5kLlZhbHVlIDogQ29tcGxldGlvbkl0ZW1LaW5kLkZpZWxkO1xuICAgICAgcmV0dXJuIGhpbnRMaXN0KHRva2VuLCBvYmplY3RGaWVsZHMubWFwKChmaWVsZCkgPT4ge1xuICAgICAgICB2YXIgX2EyO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxhYmVsOiBmaWVsZC5uYW1lLFxuICAgICAgICAgIGRldGFpbDogU3RyaW5nKGZpZWxkLnR5cGUpLFxuICAgICAgICAgIGRvY3VtZW50YXRpb246IChfYTIgPSBmaWVsZC5kZXNjcmlwdGlvbikgIT09IG51bGwgJiYgX2EyICE9PSB2b2lkIDAgPyBfYTIgOiB2b2lkIDAsXG4gICAgICAgICAga2luZDogY29tcGxldGlvbktpbmQsXG4gICAgICAgICAgdHlwZTogZmllbGQudHlwZVxuICAgICAgICB9O1xuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuICBpZiAoa2luZCA9PT0gUnVsZUtpbmRzLkVOVU1fVkFMVUUgfHwga2luZCA9PT0gUnVsZUtpbmRzLkxJU1RfVkFMVUUgJiYgc3RlcCA9PT0gMSB8fCBraW5kID09PSBSdWxlS2luZHMuT0JKRUNUX0ZJRUxEICYmIHN0ZXAgPT09IDIgfHwga2luZCA9PT0gUnVsZUtpbmRzLkFSR1VNRU5UICYmIHN0ZXAgPT09IDIpIHtcbiAgICByZXR1cm4gZ2V0U3VnZ2VzdGlvbnNGb3JJbnB1dFZhbHVlcyh0b2tlbiwgdHlwZUluZm8sIHF1ZXJ5VGV4dCwgc2NoZW1hKTtcbiAgfVxuICBpZiAoa2luZCA9PT0gUnVsZUtpbmRzLlZBUklBQkxFICYmIHN0ZXAgPT09IDEpIHtcbiAgICBjb25zdCBuYW1lZElucHV0VHlwZSA9IGdldE5hbWVkVHlwZSh0eXBlSW5mby5pbnB1dFR5cGUpO1xuICAgIGNvbnN0IHZhcmlhYmxlRGVmaW5pdGlvbnMgPSBnZXRWYXJpYWJsZUNvbXBsZXRpb25zKHF1ZXJ5VGV4dCwgc2NoZW1hLCB0b2tlbik7XG4gICAgcmV0dXJuIGhpbnRMaXN0KHRva2VuLCB2YXJpYWJsZURlZmluaXRpb25zLmZpbHRlcigodikgPT4gdi5kZXRhaWwgPT09IChuYW1lZElucHV0VHlwZSA9PT0gbnVsbCB8fCBuYW1lZElucHV0VHlwZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmFtZWRJbnB1dFR5cGUubmFtZSkpKTtcbiAgfVxuICBpZiAoa2luZCA9PT0gUnVsZUtpbmRzLlRZUEVfQ09ORElUSU9OICYmIHN0ZXAgPT09IDEgfHwga2luZCA9PT0gUnVsZUtpbmRzLk5BTUVEX1RZUEUgJiYgc3RhdGUucHJldlN0YXRlICE9IG51bGwgJiYgc3RhdGUucHJldlN0YXRlLmtpbmQgPT09IFJ1bGVLaW5kcy5UWVBFX0NPTkRJVElPTikge1xuICAgIHJldHVybiBnZXRTdWdnZXN0aW9uc0ZvckZyYWdtZW50VHlwZUNvbmRpdGlvbnModG9rZW4sIHR5cGVJbmZvLCBzY2hlbWEpO1xuICB9XG4gIGlmIChraW5kID09PSBSdWxlS2luZHMuRlJBR01FTlRfU1BSRUFEICYmIHN0ZXAgPT09IDEpIHtcbiAgICByZXR1cm4gZ2V0U3VnZ2VzdGlvbnNGb3JGcmFnbWVudFNwcmVhZCh0b2tlbiwgdHlwZUluZm8sIHNjaGVtYSwgcXVlcnlUZXh0LCBBcnJheS5pc0FycmF5KGZyYWdtZW50RGVmcykgPyBmcmFnbWVudERlZnMgOiBjb2xsZWN0RnJhZ21lbnREZWZzKGZyYWdtZW50RGVmcykpO1xuICB9XG4gIGlmIChraW5kID09PSBSdWxlS2luZHMuVkFSSUFCTEVfREVGSU5JVElPTiAmJiBzdGVwID09PSAyIHx8IGtpbmQgPT09IFJ1bGVLaW5kcy5MSVNUX1RZUEUgJiYgc3RlcCA9PT0gMSB8fCBraW5kID09PSBSdWxlS2luZHMuTkFNRURfVFlQRSAmJiBzdGF0ZS5wcmV2U3RhdGUgJiYgKHN0YXRlLnByZXZTdGF0ZS5raW5kID09PSBSdWxlS2luZHMuVkFSSUFCTEVfREVGSU5JVElPTiB8fCBzdGF0ZS5wcmV2U3RhdGUua2luZCA9PT0gUnVsZUtpbmRzLkxJU1RfVFlQRSB8fCBzdGF0ZS5wcmV2U3RhdGUua2luZCA9PT0gUnVsZUtpbmRzLk5PTl9OVUxMX1RZUEUpKSB7XG4gICAgcmV0dXJuIGdldFN1Z2dlc3Rpb25zRm9yVmFyaWFibGVEZWZpbml0aW9uKHRva2VuLCBzY2hlbWEpO1xuICB9XG4gIGlmIChraW5kID09PSBSdWxlS2luZHMuRElSRUNUSVZFKSB7XG4gICAgcmV0dXJuIGdldFN1Z2dlc3Rpb25zRm9yRGlyZWN0aXZlKHRva2VuLCBzdGF0ZSwgc2NoZW1hKTtcbiAgfVxuICByZXR1cm4gW107XG59XG5fX25hbWUoZ2V0QXV0b2NvbXBsZXRlU3VnZ2VzdGlvbnMsIFwiZ2V0QXV0b2NvbXBsZXRlU3VnZ2VzdGlvbnNcIik7XG5jb25zdCBpbnNlcnRTdWZmaXggPSBgIHtcbiAgJDFcbn1gO1xuY29uc3QgZ2V0SW5zZXJ0VGV4dCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGZpZWxkKSA9PiB7XG4gIGNvbnN0IHR5cGUgPSBmaWVsZC50eXBlO1xuICBpZiAoaXNDb21wb3NpdGVUeXBlKHR5cGUpKSB7XG4gICAgcmV0dXJuIGluc2VydFN1ZmZpeDtcbiAgfVxuICBpZiAoaXNMaXN0VHlwZSh0eXBlKSAmJiBpc0NvbXBvc2l0ZVR5cGUodHlwZS5vZlR5cGUpKSB7XG4gICAgcmV0dXJuIGluc2VydFN1ZmZpeDtcbiAgfVxuICBpZiAoaXNOb25OdWxsVHlwZSh0eXBlKSkge1xuICAgIGlmIChpc0NvbXBvc2l0ZVR5cGUodHlwZS5vZlR5cGUpKSB7XG4gICAgICByZXR1cm4gaW5zZXJ0U3VmZml4O1xuICAgIH1cbiAgICBpZiAoaXNMaXN0VHlwZSh0eXBlLm9mVHlwZSkgJiYgaXNDb21wb3NpdGVUeXBlKHR5cGUub2ZUeXBlLm9mVHlwZSkpIHtcbiAgICAgIHJldHVybiBpbnNlcnRTdWZmaXg7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufSwgXCJnZXRJbnNlcnRUZXh0XCIpO1xuZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnNGb3JGaWVsZE5hbWVzKHRva2VuLCB0eXBlSW5mbywgb3B0aW9ucykge1xuICB2YXIgX2E7XG4gIGlmICh0eXBlSW5mby5wYXJlbnRUeXBlKSB7XG4gICAgY29uc3QgcGFyZW50VHlwZSA9IHR5cGVJbmZvLnBhcmVudFR5cGU7XG4gICAgbGV0IGZpZWxkcyA9IFtdO1xuICAgIGlmIChcImdldEZpZWxkc1wiIGluIHBhcmVudFR5cGUpIHtcbiAgICAgIGZpZWxkcyA9IG9iamVjdFZhbHVlcyhwYXJlbnRUeXBlLmdldEZpZWxkcygpKTtcbiAgICB9XG4gICAgaWYgKGlzQ29tcG9zaXRlVHlwZShwYXJlbnRUeXBlKSkge1xuICAgICAgZmllbGRzLnB1c2goVHlwZU5hbWVNZXRhRmllbGREZWYkMSk7XG4gICAgfVxuICAgIGlmIChwYXJlbnRUeXBlID09PSAoKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNjaGVtYSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFF1ZXJ5VHlwZSgpKSkge1xuICAgICAgZmllbGRzLnB1c2goU2NoZW1hTWV0YUZpZWxkRGVmJDEsIFR5cGVNZXRhRmllbGREZWYkMSk7XG4gICAgfVxuICAgIHJldHVybiBoaW50TGlzdCh0b2tlbiwgZmllbGRzLm1hcCgoZmllbGQsIGluZGV4KSA9PiB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgY29uc3Qgc3VnZ2VzdGlvbiA9IHtcbiAgICAgICAgc29ydFRleHQ6IFN0cmluZyhpbmRleCkgKyBmaWVsZC5uYW1lLFxuICAgICAgICBsYWJlbDogZmllbGQubmFtZSxcbiAgICAgICAgZGV0YWlsOiBTdHJpbmcoZmllbGQudHlwZSksXG4gICAgICAgIGRvY3VtZW50YXRpb246IChfYTIgPSBmaWVsZC5kZXNjcmlwdGlvbikgIT09IG51bGwgJiYgX2EyICE9PSB2b2lkIDAgPyBfYTIgOiB2b2lkIDAsXG4gICAgICAgIGRlcHJlY2F0ZWQ6IEJvb2xlYW4oZmllbGQuZGVwcmVjYXRpb25SZWFzb24pLFxuICAgICAgICBpc0RlcHJlY2F0ZWQ6IEJvb2xlYW4oZmllbGQuZGVwcmVjYXRpb25SZWFzb24pLFxuICAgICAgICBkZXByZWNhdGlvblJlYXNvbjogZmllbGQuZGVwcmVjYXRpb25SZWFzb24sXG4gICAgICAgIGtpbmQ6IENvbXBsZXRpb25JdGVtS2luZC5GaWVsZCxcbiAgICAgICAgdHlwZTogZmllbGQudHlwZVxuICAgICAgfTtcbiAgICAgIGNvbnN0IGluc2VydFRleHQgPSBnZXRJbnNlcnRUZXh0KGZpZWxkKTtcbiAgICAgIGlmIChpbnNlcnRUZXh0KSB7XG4gICAgICAgIHN1Z2dlc3Rpb24uaW5zZXJ0VGV4dCA9IGZpZWxkLm5hbWUgKyBpbnNlcnRUZXh0O1xuICAgICAgICBzdWdnZXN0aW9uLmluc2VydFRleHRGb3JtYXQgPSBJbnNlcnRUZXh0Rm9ybWF0LlNuaXBwZXQ7XG4gICAgICAgIHN1Z2dlc3Rpb24uY29tbWFuZCA9IFN1Z2dlc3Rpb25Db21tYW5kO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN1Z2dlc3Rpb247XG4gICAgfSkpO1xuICB9XG4gIHJldHVybiBbXTtcbn1cbl9fbmFtZShnZXRTdWdnZXN0aW9uc0ZvckZpZWxkTmFtZXMsIFwiZ2V0U3VnZ2VzdGlvbnNGb3JGaWVsZE5hbWVzXCIpO1xuZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnNGb3JJbnB1dFZhbHVlcyh0b2tlbiwgdHlwZUluZm8sIHF1ZXJ5VGV4dCwgc2NoZW1hKSB7XG4gIGNvbnN0IG5hbWVkSW5wdXRUeXBlID0gZ2V0TmFtZWRUeXBlKHR5cGVJbmZvLmlucHV0VHlwZSk7XG4gIGNvbnN0IHF1ZXJ5VmFyaWFibGVzID0gZ2V0VmFyaWFibGVDb21wbGV0aW9ucyhxdWVyeVRleHQsIHNjaGVtYSwgdG9rZW4pLmZpbHRlcigodikgPT4gdi5kZXRhaWwgPT09IG5hbWVkSW5wdXRUeXBlLm5hbWUpO1xuICBpZiAobmFtZWRJbnB1dFR5cGUgaW5zdGFuY2VvZiBHcmFwaFFMRW51bVR5cGUpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSBuYW1lZElucHV0VHlwZS5nZXRWYWx1ZXMoKTtcbiAgICByZXR1cm4gaGludExpc3QodG9rZW4sIHZhbHVlcy5tYXAoKHZhbHVlKSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsYWJlbDogdmFsdWUubmFtZSxcbiAgICAgICAgZGV0YWlsOiBTdHJpbmcobmFtZWRJbnB1dFR5cGUpLFxuICAgICAgICBkb2N1bWVudGF0aW9uOiAoX2EgPSB2YWx1ZS5kZXNjcmlwdGlvbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdm9pZCAwLFxuICAgICAgICBkZXByZWNhdGVkOiBCb29sZWFuKHZhbHVlLmRlcHJlY2F0aW9uUmVhc29uKSxcbiAgICAgICAgaXNEZXByZWNhdGVkOiBCb29sZWFuKHZhbHVlLmRlcHJlY2F0aW9uUmVhc29uKSxcbiAgICAgICAgZGVwcmVjYXRpb25SZWFzb246IHZhbHVlLmRlcHJlY2F0aW9uUmVhc29uLFxuICAgICAgICBraW5kOiBDb21wbGV0aW9uSXRlbUtpbmQuRW51bU1lbWJlcixcbiAgICAgICAgdHlwZTogbmFtZWRJbnB1dFR5cGVcbiAgICAgIH07XG4gICAgfSkuY29uY2F0KHF1ZXJ5VmFyaWFibGVzKSk7XG4gIH0gZWxzZSBpZiAobmFtZWRJbnB1dFR5cGUgPT09IEdyYXBoUUxCb29sZWFuKSB7XG4gICAgcmV0dXJuIGhpbnRMaXN0KHRva2VuLCBxdWVyeVZhcmlhYmxlcy5jb25jYXQoW1xuICAgICAge1xuICAgICAgICBsYWJlbDogXCJ0cnVlXCIsXG4gICAgICAgIGRldGFpbDogU3RyaW5nKEdyYXBoUUxCb29sZWFuKSxcbiAgICAgICAgZG9jdW1lbnRhdGlvbjogXCJOb3QgZmFsc2UuXCIsXG4gICAgICAgIGtpbmQ6IENvbXBsZXRpb25JdGVtS2luZC5WYXJpYWJsZSxcbiAgICAgICAgdHlwZTogR3JhcGhRTEJvb2xlYW5cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGxhYmVsOiBcImZhbHNlXCIsXG4gICAgICAgIGRldGFpbDogU3RyaW5nKEdyYXBoUUxCb29sZWFuKSxcbiAgICAgICAgZG9jdW1lbnRhdGlvbjogXCJOb3QgdHJ1ZS5cIixcbiAgICAgICAga2luZDogQ29tcGxldGlvbkl0ZW1LaW5kLlZhcmlhYmxlLFxuICAgICAgICB0eXBlOiBHcmFwaFFMQm9vbGVhblxuICAgICAgfVxuICAgIF0pKTtcbiAgfVxuICByZXR1cm4gcXVlcnlWYXJpYWJsZXM7XG59XG5fX25hbWUoZ2V0U3VnZ2VzdGlvbnNGb3JJbnB1dFZhbHVlcywgXCJnZXRTdWdnZXN0aW9uc0ZvcklucHV0VmFsdWVzXCIpO1xuZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnNGb3JJbXBsZW1lbnRzKHRva2VuLCB0b2tlblN0YXRlLCBzY2hlbWEsIGRvY3VtZW50VGV4dCwgdHlwZUluZm8pIHtcbiAgaWYgKHRva2VuU3RhdGUubmVlZHNTZXBhcmF0b3IpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgdHlwZU1hcCA9IHNjaGVtYS5nZXRUeXBlTWFwKCk7XG4gIGNvbnN0IHNjaGVtYUludGVyZmFjZXMgPSBvYmplY3RWYWx1ZXModHlwZU1hcCkuZmlsdGVyKGlzSW50ZXJmYWNlVHlwZSk7XG4gIGNvbnN0IHNjaGVtYUludGVyZmFjZU5hbWVzID0gc2NoZW1hSW50ZXJmYWNlcy5tYXAoKHsgbmFtZSB9KSA9PiBuYW1lKTtcbiAgY29uc3QgaW5saW5lSW50ZXJmYWNlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIHJ1bk9ubGluZVBhcnNlcihkb2N1bWVudFRleHQsIChfLCBzdGF0ZSkgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgaWYgKHN0YXRlLm5hbWUpIHtcbiAgICAgIGlmIChzdGF0ZS5raW5kID09PSBSdWxlS2luZHMuSU5URVJGQUNFX0RFRiAmJiAhc2NoZW1hSW50ZXJmYWNlTmFtZXMuaW5jbHVkZXMoc3RhdGUubmFtZSkpIHtcbiAgICAgICAgaW5saW5lSW50ZXJmYWNlcy5hZGQoc3RhdGUubmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUua2luZCA9PT0gUnVsZUtpbmRzLk5BTUVEX1RZUEUgJiYgKChfYSA9IHN0YXRlLnByZXZTdGF0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmtpbmQpID09PSBSdWxlS2luZHMuSU1QTEVNRU5UUykge1xuICAgICAgICBpZiAodHlwZUluZm8uaW50ZXJmYWNlRGVmKSB7XG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdUeXBlID0gKF9iID0gdHlwZUluZm8uaW50ZXJmYWNlRGVmKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZ2V0SW50ZXJmYWNlcygpLmZpbmQoKHsgbmFtZSB9KSA9PiBuYW1lID09PSBzdGF0ZS5uYW1lKTtcbiAgICAgICAgICBpZiAoZXhpc3RpbmdUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHR5cGUgPSBzY2hlbWEuZ2V0VHlwZShzdGF0ZS5uYW1lKTtcbiAgICAgICAgICBjb25zdCBpbnRlcmZhY2VDb25maWcgPSAoX2MgPSB0eXBlSW5mby5pbnRlcmZhY2VEZWYpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50b0NvbmZpZygpO1xuICAgICAgICAgIHR5cGVJbmZvLmludGVyZmFjZURlZiA9IG5ldyBHcmFwaFFMSW50ZXJmYWNlVHlwZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGludGVyZmFjZUNvbmZpZyksIHsgaW50ZXJmYWNlczogW1xuICAgICAgICAgICAgLi4uaW50ZXJmYWNlQ29uZmlnLmludGVyZmFjZXMsXG4gICAgICAgICAgICB0eXBlIHx8IG5ldyBHcmFwaFFMSW50ZXJmYWNlVHlwZSh7IG5hbWU6IHN0YXRlLm5hbWUsIGZpZWxkczoge30gfSlcbiAgICAgICAgICBdIH0pKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlSW5mby5vYmplY3RUeXBlRGVmKSB7XG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdUeXBlID0gKF9kID0gdHlwZUluZm8ub2JqZWN0VHlwZURlZikgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmdldEludGVyZmFjZXMoKS5maW5kKCh7IG5hbWUgfSkgPT4gbmFtZSA9PT0gc3RhdGUubmFtZSk7XG4gICAgICAgICAgaWYgKGV4aXN0aW5nVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB0eXBlID0gc2NoZW1hLmdldFR5cGUoc3RhdGUubmFtZSk7XG4gICAgICAgICAgY29uc3Qgb2JqZWN0VHlwZUNvbmZpZyA9IChfZSA9IHR5cGVJbmZvLm9iamVjdFR5cGVEZWYpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS50b0NvbmZpZygpO1xuICAgICAgICAgIHR5cGVJbmZvLm9iamVjdFR5cGVEZWYgPSBuZXcgR3JhcGhRTE9iamVjdFR5cGUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvYmplY3RUeXBlQ29uZmlnKSwgeyBpbnRlcmZhY2VzOiBbXG4gICAgICAgICAgICAuLi5vYmplY3RUeXBlQ29uZmlnLmludGVyZmFjZXMsXG4gICAgICAgICAgICB0eXBlIHx8IG5ldyBHcmFwaFFMSW50ZXJmYWNlVHlwZSh7IG5hbWU6IHN0YXRlLm5hbWUsIGZpZWxkczoge30gfSlcbiAgICAgICAgICBdIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGNvbnN0IGN1cnJlbnRUeXBlVG9FeHRlbmQgPSB0eXBlSW5mby5pbnRlcmZhY2VEZWYgfHwgdHlwZUluZm8ub2JqZWN0VHlwZURlZjtcbiAgY29uc3Qgc2libGluZ0ludGVyZmFjZXMgPSAoY3VycmVudFR5cGVUb0V4dGVuZCA9PT0gbnVsbCB8fCBjdXJyZW50VHlwZVRvRXh0ZW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50VHlwZVRvRXh0ZW5kLmdldEludGVyZmFjZXMoKSkgfHwgW107XG4gIGNvbnN0IHNpYmxpbmdJbnRlcmZhY2VOYW1lcyA9IHNpYmxpbmdJbnRlcmZhY2VzLm1hcCgoeyBuYW1lIH0pID0+IG5hbWUpO1xuICBjb25zdCBwb3NzaWJsZUludGVyZmFjZXMgPSBzY2hlbWFJbnRlcmZhY2VzLmNvbmNhdChbLi4uaW5saW5lSW50ZXJmYWNlc10ubWFwKChuYW1lKSA9PiAoeyBuYW1lIH0pKSkuZmlsdGVyKCh7IG5hbWUgfSkgPT4gbmFtZSAhPT0gKGN1cnJlbnRUeXBlVG9FeHRlbmQgPT09IG51bGwgfHwgY3VycmVudFR5cGVUb0V4dGVuZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudFR5cGVUb0V4dGVuZC5uYW1lKSAmJiAhc2libGluZ0ludGVyZmFjZU5hbWVzLmluY2x1ZGVzKG5hbWUpKTtcbiAgcmV0dXJuIGhpbnRMaXN0KHRva2VuLCBwb3NzaWJsZUludGVyZmFjZXMubWFwKCh0eXBlKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgbGFiZWw6IHR5cGUubmFtZSxcbiAgICAgIGtpbmQ6IENvbXBsZXRpb25JdGVtS2luZC5JbnRlcmZhY2UsXG4gICAgICB0eXBlXG4gICAgfTtcbiAgICBpZiAodHlwZSA9PT0gbnVsbCB8fCB0eXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0eXBlLmRlc2NyaXB0aW9uKSB7XG4gICAgICByZXN1bHQuZG9jdW1lbnRhdGlvbiA9IHR5cGUuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pKTtcbn1cbl9fbmFtZShnZXRTdWdnZXN0aW9uc0ZvckltcGxlbWVudHMsIFwiZ2V0U3VnZ2VzdGlvbnNGb3JJbXBsZW1lbnRzXCIpO1xuZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnNGb3JGcmFnbWVudFR5cGVDb25kaXRpb25zKHRva2VuLCB0eXBlSW5mbywgc2NoZW1hLCBfa2luZCkge1xuICBsZXQgcG9zc2libGVUeXBlcztcbiAgaWYgKHR5cGVJbmZvLnBhcmVudFR5cGUpIHtcbiAgICBpZiAoaXNBYnN0cmFjdFR5cGUodHlwZUluZm8ucGFyZW50VHlwZSkpIHtcbiAgICAgIGNvbnN0IGFic3RyYWN0VHlwZSA9IGFzc2VydEFic3RyYWN0VHlwZSh0eXBlSW5mby5wYXJlbnRUeXBlKTtcbiAgICAgIGNvbnN0IHBvc3NpYmxlT2JqVHlwZXMgPSBzY2hlbWEuZ2V0UG9zc2libGVUeXBlcyhhYnN0cmFjdFR5cGUpO1xuICAgICAgY29uc3QgcG9zc2libGVJZmFjZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgcG9zc2libGVPYmpUeXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgICAgIHR5cGUuZ2V0SW50ZXJmYWNlcygpLmZvckVhY2goKGlmYWNlKSA9PiB7XG4gICAgICAgICAgcG9zc2libGVJZmFjZU1hcFtpZmFjZS5uYW1lXSA9IGlmYWNlO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcG9zc2libGVUeXBlcyA9IHBvc3NpYmxlT2JqVHlwZXMuY29uY2F0KG9iamVjdFZhbHVlcyhwb3NzaWJsZUlmYWNlTWFwKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvc3NpYmxlVHlwZXMgPSBbdHlwZUluZm8ucGFyZW50VHlwZV07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHR5cGVNYXAgPSBzY2hlbWEuZ2V0VHlwZU1hcCgpO1xuICAgIHBvc3NpYmxlVHlwZXMgPSBvYmplY3RWYWx1ZXModHlwZU1hcCkuZmlsdGVyKGlzQ29tcG9zaXRlVHlwZSk7XG4gIH1cbiAgcmV0dXJuIGhpbnRMaXN0KHRva2VuLCBwb3NzaWJsZVR5cGVzLm1hcCgodHlwZSkgPT4ge1xuICAgIGNvbnN0IG5hbWVkVHlwZSA9IGdldE5hbWVkVHlwZSh0eXBlKTtcbiAgICByZXR1cm4ge1xuICAgICAgbGFiZWw6IFN0cmluZyh0eXBlKSxcbiAgICAgIGRvY3VtZW50YXRpb246IChuYW1lZFR5cGUgPT09IG51bGwgfHwgbmFtZWRUeXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYW1lZFR5cGUuZGVzY3JpcHRpb24pIHx8IFwiXCIsXG4gICAgICBraW5kOiBDb21wbGV0aW9uSXRlbUtpbmQuRmllbGRcbiAgICB9O1xuICB9KSk7XG59XG5fX25hbWUoZ2V0U3VnZ2VzdGlvbnNGb3JGcmFnbWVudFR5cGVDb25kaXRpb25zLCBcImdldFN1Z2dlc3Rpb25zRm9yRnJhZ21lbnRUeXBlQ29uZGl0aW9uc1wiKTtcbmZ1bmN0aW9uIGdldFN1Z2dlc3Rpb25zRm9yRnJhZ21lbnRTcHJlYWQodG9rZW4sIHR5cGVJbmZvLCBzY2hlbWEsIHF1ZXJ5VGV4dCwgZnJhZ21lbnREZWZzKSB7XG4gIGlmICghcXVlcnlUZXh0KSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IHR5cGVNYXAgPSBzY2hlbWEuZ2V0VHlwZU1hcCgpO1xuICBjb25zdCBkZWZTdGF0ZSA9IGdldERlZmluaXRpb25TdGF0ZSh0b2tlbi5zdGF0ZSk7XG4gIGNvbnN0IGZyYWdtZW50cyA9IGdldEZyYWdtZW50RGVmaW5pdGlvbnMocXVlcnlUZXh0KTtcbiAgaWYgKGZyYWdtZW50RGVmcyAmJiBmcmFnbWVudERlZnMubGVuZ3RoID4gMCkge1xuICAgIGZyYWdtZW50cy5wdXNoKC4uLmZyYWdtZW50RGVmcyk7XG4gIH1cbiAgY29uc3QgcmVsZXZhbnRGcmFncyA9IGZyYWdtZW50cy5maWx0ZXIoKGZyYWcpID0+IHR5cGVNYXBbZnJhZy50eXBlQ29uZGl0aW9uLm5hbWUudmFsdWVdICYmICEoZGVmU3RhdGUgJiYgZGVmU3RhdGUua2luZCA9PT0gUnVsZUtpbmRzLkZSQUdNRU5UX0RFRklOSVRJT04gJiYgZGVmU3RhdGUubmFtZSA9PT0gZnJhZy5uYW1lLnZhbHVlKSAmJiBpc0NvbXBvc2l0ZVR5cGUodHlwZUluZm8ucGFyZW50VHlwZSkgJiYgaXNDb21wb3NpdGVUeXBlKHR5cGVNYXBbZnJhZy50eXBlQ29uZGl0aW9uLm5hbWUudmFsdWVdKSAmJiBkb1R5cGVzT3ZlcmxhcChzY2hlbWEsIHR5cGVJbmZvLnBhcmVudFR5cGUsIHR5cGVNYXBbZnJhZy50eXBlQ29uZGl0aW9uLm5hbWUudmFsdWVdKSk7XG4gIHJldHVybiBoaW50TGlzdCh0b2tlbiwgcmVsZXZhbnRGcmFncy5tYXAoKGZyYWcpID0+ICh7XG4gICAgbGFiZWw6IGZyYWcubmFtZS52YWx1ZSxcbiAgICBkZXRhaWw6IFN0cmluZyh0eXBlTWFwW2ZyYWcudHlwZUNvbmRpdGlvbi5uYW1lLnZhbHVlXSksXG4gICAgZG9jdW1lbnRhdGlvbjogYGZyYWdtZW50ICR7ZnJhZy5uYW1lLnZhbHVlfSBvbiAke2ZyYWcudHlwZUNvbmRpdGlvbi5uYW1lLnZhbHVlfWAsXG4gICAga2luZDogQ29tcGxldGlvbkl0ZW1LaW5kLkZpZWxkLFxuICAgIHR5cGU6IHR5cGVNYXBbZnJhZy50eXBlQ29uZGl0aW9uLm5hbWUudmFsdWVdXG4gIH0pKSk7XG59XG5fX25hbWUoZ2V0U3VnZ2VzdGlvbnNGb3JGcmFnbWVudFNwcmVhZCwgXCJnZXRTdWdnZXN0aW9uc0ZvckZyYWdtZW50U3ByZWFkXCIpO1xuY29uc3QgZ2V0UGFyZW50RGVmaW5pdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHN0YXRlLCBraW5kKSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaztcbiAgaWYgKCgoX2EgPSBzdGF0ZS5wcmV2U3RhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5raW5kKSA9PT0ga2luZCkge1xuICAgIHJldHVybiBzdGF0ZS5wcmV2U3RhdGU7XG4gIH1cbiAgaWYgKCgoX2MgPSAoX2IgPSBzdGF0ZS5wcmV2U3RhdGUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5wcmV2U3RhdGUpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5raW5kKSA9PT0ga2luZCkge1xuICAgIHJldHVybiBzdGF0ZS5wcmV2U3RhdGUucHJldlN0YXRlO1xuICB9XG4gIGlmICgoKF9mID0gKF9lID0gKF9kID0gc3RhdGUucHJldlN0YXRlKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QucHJldlN0YXRlKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UucHJldlN0YXRlKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Yua2luZCkgPT09IGtpbmQpIHtcbiAgICByZXR1cm4gc3RhdGUucHJldlN0YXRlLnByZXZTdGF0ZS5wcmV2U3RhdGU7XG4gIH1cbiAgaWYgKCgoX2sgPSAoX2ogPSAoX2ggPSAoX2cgPSBzdGF0ZS5wcmV2U3RhdGUpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5wcmV2U3RhdGUpID09PSBudWxsIHx8IF9oID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaC5wcmV2U3RhdGUpID09PSBudWxsIHx8IF9qID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfai5wcmV2U3RhdGUpID09PSBudWxsIHx8IF9rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfay5raW5kKSA9PT0ga2luZCkge1xuICAgIHJldHVybiBzdGF0ZS5wcmV2U3RhdGUucHJldlN0YXRlLnByZXZTdGF0ZS5wcmV2U3RhdGU7XG4gIH1cbn0sIFwiZ2V0UGFyZW50RGVmaW5pdGlvblwiKTtcbmZ1bmN0aW9uIGdldFZhcmlhYmxlQ29tcGxldGlvbnMocXVlcnlUZXh0LCBzY2hlbWEsIHRva2VuKSB7XG4gIGxldCB2YXJpYWJsZU5hbWUgPSBudWxsO1xuICBsZXQgdmFyaWFibGVUeXBlO1xuICBjb25zdCBkZWZpbml0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKHt9KTtcbiAgcnVuT25saW5lUGFyc2VyKHF1ZXJ5VGV4dCwgKF8sIHN0YXRlKSA9PiB7XG4gICAgaWYgKChzdGF0ZSA9PT0gbnVsbCB8fCBzdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3RhdGUua2luZCkgPT09IFJ1bGVLaW5kcy5WQVJJQUJMRSAmJiBzdGF0ZS5uYW1lKSB7XG4gICAgICB2YXJpYWJsZU5hbWUgPSBzdGF0ZS5uYW1lO1xuICAgIH1cbiAgICBpZiAoKHN0YXRlID09PSBudWxsIHx8IHN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdGF0ZS5raW5kKSA9PT0gUnVsZUtpbmRzLk5BTUVEX1RZUEUgJiYgdmFyaWFibGVOYW1lKSB7XG4gICAgICBjb25zdCBwYXJlbnREZWZpbml0aW9uID0gZ2V0UGFyZW50RGVmaW5pdGlvbihzdGF0ZSwgUnVsZUtpbmRzLlRZUEUpO1xuICAgICAgaWYgKHBhcmVudERlZmluaXRpb24gPT09IG51bGwgfHwgcGFyZW50RGVmaW5pdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50RGVmaW5pdGlvbi50eXBlKSB7XG4gICAgICAgIHZhcmlhYmxlVHlwZSA9IHNjaGVtYS5nZXRUeXBlKHBhcmVudERlZmluaXRpb24gPT09IG51bGwgfHwgcGFyZW50RGVmaW5pdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50RGVmaW5pdGlvbi50eXBlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHZhcmlhYmxlTmFtZSAmJiB2YXJpYWJsZVR5cGUpIHtcbiAgICAgIGlmICghZGVmaW5pdGlvbnNbdmFyaWFibGVOYW1lXSkge1xuICAgICAgICBkZWZpbml0aW9uc1t2YXJpYWJsZU5hbWVdID0ge1xuICAgICAgICAgIGRldGFpbDogdmFyaWFibGVUeXBlLnRvU3RyaW5nKCksXG4gICAgICAgICAgaW5zZXJ0VGV4dDogdG9rZW4uc3RyaW5nID09PSBcIiRcIiA/IHZhcmlhYmxlTmFtZSA6IFwiJFwiICsgdmFyaWFibGVOYW1lLFxuICAgICAgICAgIGxhYmVsOiB2YXJpYWJsZU5hbWUsXG4gICAgICAgICAgdHlwZTogdmFyaWFibGVUeXBlLFxuICAgICAgICAgIGtpbmQ6IENvbXBsZXRpb25JdGVtS2luZC5WYXJpYWJsZVxuICAgICAgICB9O1xuICAgICAgICB2YXJpYWJsZU5hbWUgPSBudWxsO1xuICAgICAgICB2YXJpYWJsZVR5cGUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmplY3RWYWx1ZXMoZGVmaW5pdGlvbnMpO1xufVxuX19uYW1lKGdldFZhcmlhYmxlQ29tcGxldGlvbnMsIFwiZ2V0VmFyaWFibGVDb21wbGV0aW9uc1wiKTtcbmZ1bmN0aW9uIGdldEZyYWdtZW50RGVmaW5pdGlvbnMocXVlcnlUZXh0KSB7XG4gIGNvbnN0IGZyYWdtZW50RGVmcyA9IFtdO1xuICBydW5PbmxpbmVQYXJzZXIocXVlcnlUZXh0LCAoXywgc3RhdGUpID0+IHtcbiAgICBpZiAoc3RhdGUua2luZCA9PT0gUnVsZUtpbmRzLkZSQUdNRU5UX0RFRklOSVRJT04gJiYgc3RhdGUubmFtZSAmJiBzdGF0ZS50eXBlKSB7XG4gICAgICBmcmFnbWVudERlZnMucHVzaCh7XG4gICAgICAgIGtpbmQ6IFJ1bGVLaW5kcy5GUkFHTUVOVF9ERUZJTklUSU9OLFxuICAgICAgICBuYW1lOiB7XG4gICAgICAgICAga2luZDogS2luZC5OQU1FLFxuICAgICAgICAgIHZhbHVlOiBzdGF0ZS5uYW1lXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdGlvblNldDoge1xuICAgICAgICAgIGtpbmQ6IFJ1bGVLaW5kcy5TRUxFQ1RJT05fU0VULFxuICAgICAgICAgIHNlbGVjdGlvbnM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGVDb25kaXRpb246IHtcbiAgICAgICAgICBraW5kOiBSdWxlS2luZHMuTkFNRURfVFlQRSxcbiAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICBraW5kOiBLaW5kLk5BTUUsXG4gICAgICAgICAgICB2YWx1ZTogc3RhdGUudHlwZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGZyYWdtZW50RGVmcztcbn1cbl9fbmFtZShnZXRGcmFnbWVudERlZmluaXRpb25zLCBcImdldEZyYWdtZW50RGVmaW5pdGlvbnNcIik7XG5mdW5jdGlvbiBnZXRTdWdnZXN0aW9uc0ZvclZhcmlhYmxlRGVmaW5pdGlvbih0b2tlbiwgc2NoZW1hLCBfa2luZCkge1xuICBjb25zdCBpbnB1dFR5cGVNYXAgPSBzY2hlbWEuZ2V0VHlwZU1hcCgpO1xuICBjb25zdCBpbnB1dFR5cGVzID0gb2JqZWN0VmFsdWVzKGlucHV0VHlwZU1hcCkuZmlsdGVyKGlzSW5wdXRUeXBlKTtcbiAgcmV0dXJuIGhpbnRMaXN0KHRva2VuLCBpbnB1dFR5cGVzLm1hcCgodHlwZSkgPT4gKHtcbiAgICBsYWJlbDogdHlwZS5uYW1lLFxuICAgIGRvY3VtZW50YXRpb246IHR5cGUuZGVzY3JpcHRpb24sXG4gICAga2luZDogQ29tcGxldGlvbkl0ZW1LaW5kLlZhcmlhYmxlXG4gIH0pKSk7XG59XG5fX25hbWUoZ2V0U3VnZ2VzdGlvbnNGb3JWYXJpYWJsZURlZmluaXRpb24sIFwiZ2V0U3VnZ2VzdGlvbnNGb3JWYXJpYWJsZURlZmluaXRpb25cIik7XG5mdW5jdGlvbiBnZXRTdWdnZXN0aW9uc0ZvckRpcmVjdGl2ZSh0b2tlbiwgc3RhdGUsIHNjaGVtYSwgX2tpbmQpIHtcbiAgdmFyIF9hO1xuICBpZiAoKF9hID0gc3RhdGUucHJldlN0YXRlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eua2luZCkge1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSBzY2hlbWEuZ2V0RGlyZWN0aXZlcygpLmZpbHRlcigoZGlyZWN0aXZlKSA9PiBjYW5Vc2VEaXJlY3RpdmUoc3RhdGUucHJldlN0YXRlLCBkaXJlY3RpdmUpKTtcbiAgICByZXR1cm4gaGludExpc3QodG9rZW4sIGRpcmVjdGl2ZXMubWFwKChkaXJlY3RpdmUpID0+ICh7XG4gICAgICBsYWJlbDogZGlyZWN0aXZlLm5hbWUsXG4gICAgICBkb2N1bWVudGF0aW9uOiBkaXJlY3RpdmUuZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgIGtpbmQ6IENvbXBsZXRpb25JdGVtS2luZC5GdW5jdGlvblxuICAgIH0pKSk7XG4gIH1cbiAgcmV0dXJuIFtdO1xufVxuX19uYW1lKGdldFN1Z2dlc3Rpb25zRm9yRGlyZWN0aXZlLCBcImdldFN1Z2dlc3Rpb25zRm9yRGlyZWN0aXZlXCIpO1xuZnVuY3Rpb24gZ2V0VG9rZW5BdFBvc2l0aW9uKHF1ZXJ5VGV4dCwgY3Vyc29yKSB7XG4gIGxldCBzdHlsZUF0Q3Vyc29yID0gbnVsbDtcbiAgbGV0IHN0YXRlQXRDdXJzb3IgPSBudWxsO1xuICBsZXQgc3RyaW5nQXRDdXJzb3IgPSBudWxsO1xuICBjb25zdCB0b2tlbiA9IHJ1bk9ubGluZVBhcnNlcihxdWVyeVRleHQsIChzdHJlYW0sIHN0YXRlLCBzdHlsZSwgaW5kZXgpID0+IHtcbiAgICBpZiAoaW5kZXggPT09IGN1cnNvci5saW5lKSB7XG4gICAgICBpZiAoc3RyZWFtLmdldEN1cnJlbnRQb3NpdGlvbigpID49IGN1cnNvci5jaGFyYWN0ZXIpIHtcbiAgICAgICAgc3R5bGVBdEN1cnNvciA9IHN0eWxlO1xuICAgICAgICBzdGF0ZUF0Q3Vyc29yID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUpO1xuICAgICAgICBzdHJpbmdBdEN1cnNvciA9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgICAgIHJldHVybiBcIkJSRUFLXCI7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBzdGFydDogdG9rZW4uc3RhcnQsXG4gICAgZW5kOiB0b2tlbi5lbmQsXG4gICAgc3RyaW5nOiBzdHJpbmdBdEN1cnNvciB8fCB0b2tlbi5zdHJpbmcsXG4gICAgc3RhdGU6IHN0YXRlQXRDdXJzb3IgfHwgdG9rZW4uc3RhdGUsXG4gICAgc3R5bGU6IHN0eWxlQXRDdXJzb3IgfHwgdG9rZW4uc3R5bGVcbiAgfTtcbn1cbl9fbmFtZShnZXRUb2tlbkF0UG9zaXRpb24sIFwiZ2V0VG9rZW5BdFBvc2l0aW9uXCIpO1xuZnVuY3Rpb24gcnVuT25saW5lUGFyc2VyKHF1ZXJ5VGV4dCwgY2FsbGJhY2spIHtcbiAgY29uc3QgbGluZXMgPSBxdWVyeVRleHQuc3BsaXQoXCJcXG5cIik7XG4gIGNvbnN0IHBhcnNlciA9IG9ubGluZVBhcnNlcigpO1xuICBsZXQgc3RhdGUgPSBwYXJzZXIuc3RhcnRTdGF0ZSgpO1xuICBsZXQgc3R5bGUgPSBcIlwiO1xuICBsZXQgc3RyZWFtID0gbmV3IENoYXJhY3RlclN0cmVhbShcIlwiKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIHN0cmVhbSA9IG5ldyBDaGFyYWN0ZXJTdHJlYW0obGluZXNbaV0pO1xuICAgIHdoaWxlICghc3RyZWFtLmVvbCgpKSB7XG4gICAgICBzdHlsZSA9IHBhcnNlci50b2tlbihzdHJlYW0sIHN0YXRlKTtcbiAgICAgIGNvbnN0IGNvZGUgPSBjYWxsYmFjayhzdHJlYW0sIHN0YXRlLCBzdHlsZSwgaSk7XG4gICAgICBpZiAoY29kZSA9PT0gXCJCUkVBS1wiKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBjYWxsYmFjayhzdHJlYW0sIHN0YXRlLCBzdHlsZSwgaSk7XG4gICAgaWYgKCFzdGF0ZS5raW5kKSB7XG4gICAgICBzdGF0ZSA9IHBhcnNlci5zdGFydFN0YXRlKCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IHN0cmVhbS5nZXRTdGFydE9mVG9rZW4oKSxcbiAgICBlbmQ6IHN0cmVhbS5nZXRDdXJyZW50UG9zaXRpb24oKSxcbiAgICBzdHJpbmc6IHN0cmVhbS5jdXJyZW50KCksXG4gICAgc3RhdGUsXG4gICAgc3R5bGVcbiAgfTtcbn1cbl9fbmFtZShydW5PbmxpbmVQYXJzZXIsIFwicnVuT25saW5lUGFyc2VyXCIpO1xuZnVuY3Rpb24gY2FuVXNlRGlyZWN0aXZlKHN0YXRlLCBkaXJlY3RpdmUpIHtcbiAgdmFyIF9hO1xuICBpZiAoIXN0YXRlIHx8ICFzdGF0ZS5raW5kKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGtpbmQgPSBzdGF0ZS5raW5kO1xuICBjb25zdCBsb2NhdGlvbnMgPSBkaXJlY3RpdmUubG9jYXRpb25zO1xuICBzd2l0Y2ggKGtpbmQpIHtcbiAgICBjYXNlIFJ1bGVLaW5kcy5RVUVSWTpcbiAgICAgIHJldHVybiBsb2NhdGlvbnMuaW5kZXhPZihEaXJlY3RpdmVMb2NhdGlvbi5RVUVSWSkgIT09IC0xO1xuICAgIGNhc2UgUnVsZUtpbmRzLk1VVEFUSU9OOlxuICAgICAgcmV0dXJuIGxvY2F0aW9ucy5pbmRleE9mKERpcmVjdGl2ZUxvY2F0aW9uLk1VVEFUSU9OKSAhPT0gLTE7XG4gICAgY2FzZSBSdWxlS2luZHMuU1VCU0NSSVBUSU9OOlxuICAgICAgcmV0dXJuIGxvY2F0aW9ucy5pbmRleE9mKERpcmVjdGl2ZUxvY2F0aW9uLlNVQlNDUklQVElPTikgIT09IC0xO1xuICAgIGNhc2UgUnVsZUtpbmRzLkZJRUxEOlxuICAgIGNhc2UgUnVsZUtpbmRzLkFMSUFTRURfRklFTEQ6XG4gICAgICByZXR1cm4gbG9jYXRpb25zLmluZGV4T2YoRGlyZWN0aXZlTG9jYXRpb24uRklFTEQpICE9PSAtMTtcbiAgICBjYXNlIFJ1bGVLaW5kcy5GUkFHTUVOVF9ERUZJTklUSU9OOlxuICAgICAgcmV0dXJuIGxvY2F0aW9ucy5pbmRleE9mKERpcmVjdGl2ZUxvY2F0aW9uLkZSQUdNRU5UX0RFRklOSVRJT04pICE9PSAtMTtcbiAgICBjYXNlIFJ1bGVLaW5kcy5GUkFHTUVOVF9TUFJFQUQ6XG4gICAgICByZXR1cm4gbG9jYXRpb25zLmluZGV4T2YoRGlyZWN0aXZlTG9jYXRpb24uRlJBR01FTlRfU1BSRUFEKSAhPT0gLTE7XG4gICAgY2FzZSBSdWxlS2luZHMuSU5MSU5FX0ZSQUdNRU5UOlxuICAgICAgcmV0dXJuIGxvY2F0aW9ucy5pbmRleE9mKERpcmVjdGl2ZUxvY2F0aW9uLklOTElORV9GUkFHTUVOVCkgIT09IC0xO1xuICAgIGNhc2UgUnVsZUtpbmRzLlNDSEVNQV9ERUY6XG4gICAgICByZXR1cm4gbG9jYXRpb25zLmluZGV4T2YoRGlyZWN0aXZlTG9jYXRpb24uU0NIRU1BKSAhPT0gLTE7XG4gICAgY2FzZSBSdWxlS2luZHMuU0NBTEFSX0RFRjpcbiAgICAgIHJldHVybiBsb2NhdGlvbnMuaW5kZXhPZihEaXJlY3RpdmVMb2NhdGlvbi5TQ0FMQVIpICE9PSAtMTtcbiAgICBjYXNlIFJ1bGVLaW5kcy5PQkpFQ1RfVFlQRV9ERUY6XG4gICAgICByZXR1cm4gbG9jYXRpb25zLmluZGV4T2YoRGlyZWN0aXZlTG9jYXRpb24uT0JKRUNUKSAhPT0gLTE7XG4gICAgY2FzZSBSdWxlS2luZHMuRklFTERfREVGOlxuICAgICAgcmV0dXJuIGxvY2F0aW9ucy5pbmRleE9mKERpcmVjdGl2ZUxvY2F0aW9uLkZJRUxEX0RFRklOSVRJT04pICE9PSAtMTtcbiAgICBjYXNlIFJ1bGVLaW5kcy5JTlRFUkZBQ0VfREVGOlxuICAgICAgcmV0dXJuIGxvY2F0aW9ucy5pbmRleE9mKERpcmVjdGl2ZUxvY2F0aW9uLklOVEVSRkFDRSkgIT09IC0xO1xuICAgIGNhc2UgUnVsZUtpbmRzLlVOSU9OX0RFRjpcbiAgICAgIHJldHVybiBsb2NhdGlvbnMuaW5kZXhPZihEaXJlY3RpdmVMb2NhdGlvbi5VTklPTikgIT09IC0xO1xuICAgIGNhc2UgUnVsZUtpbmRzLkVOVU1fREVGOlxuICAgICAgcmV0dXJuIGxvY2F0aW9ucy5pbmRleE9mKERpcmVjdGl2ZUxvY2F0aW9uLkVOVU0pICE9PSAtMTtcbiAgICBjYXNlIFJ1bGVLaW5kcy5FTlVNX1ZBTFVFOlxuICAgICAgcmV0dXJuIGxvY2F0aW9ucy5pbmRleE9mKERpcmVjdGl2ZUxvY2F0aW9uLkVOVU1fVkFMVUUpICE9PSAtMTtcbiAgICBjYXNlIFJ1bGVLaW5kcy5JTlBVVF9ERUY6XG4gICAgICByZXR1cm4gbG9jYXRpb25zLmluZGV4T2YoRGlyZWN0aXZlTG9jYXRpb24uSU5QVVRfT0JKRUNUKSAhPT0gLTE7XG4gICAgY2FzZSBSdWxlS2luZHMuSU5QVVRfVkFMVUVfREVGOlxuICAgICAgY29uc3QgcHJldlN0YXRlS2luZCA9IChfYSA9IHN0YXRlLnByZXZTdGF0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmtpbmQ7XG4gICAgICBzd2l0Y2ggKHByZXZTdGF0ZUtpbmQpIHtcbiAgICAgICAgY2FzZSBSdWxlS2luZHMuQVJHVU1FTlRTX0RFRjpcbiAgICAgICAgICByZXR1cm4gbG9jYXRpb25zLmluZGV4T2YoRGlyZWN0aXZlTG9jYXRpb24uQVJHVU1FTlRfREVGSU5JVElPTikgIT09IC0xO1xuICAgICAgICBjYXNlIFJ1bGVLaW5kcy5JTlBVVF9ERUY6XG4gICAgICAgICAgcmV0dXJuIGxvY2F0aW9ucy5pbmRleE9mKERpcmVjdGl2ZUxvY2F0aW9uLklOUFVUX0ZJRUxEX0RFRklOSVRJT04pICE9PSAtMTtcbiAgICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5fX25hbWUoY2FuVXNlRGlyZWN0aXZlLCBcImNhblVzZURpcmVjdGl2ZVwiKTtcbmZ1bmN0aW9uIGdldFR5cGVJbmZvKHNjaGVtYSwgdG9rZW5TdGF0ZSkge1xuICBsZXQgYXJnRGVmO1xuICBsZXQgYXJnRGVmcztcbiAgbGV0IGRpcmVjdGl2ZURlZjtcbiAgbGV0IGVudW1WYWx1ZTtcbiAgbGV0IGZpZWxkRGVmO1xuICBsZXQgaW5wdXRUeXBlO1xuICBsZXQgb2JqZWN0VHlwZURlZjtcbiAgbGV0IG9iamVjdEZpZWxkRGVmcztcbiAgbGV0IHBhcmVudFR5cGU7XG4gIGxldCB0eXBlO1xuICBsZXQgaW50ZXJmYWNlRGVmO1xuICBmb3JFYWNoU3RhdGUodG9rZW5TdGF0ZSwgKHN0YXRlKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIHN3aXRjaCAoc3RhdGUua2luZCkge1xuICAgICAgY2FzZSBSdWxlS2luZHMuUVVFUlk6XG4gICAgICBjYXNlIFwiU2hvcnRRdWVyeVwiOlxuICAgICAgICB0eXBlID0gc2NoZW1hLmdldFF1ZXJ5VHlwZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUnVsZUtpbmRzLk1VVEFUSU9OOlxuICAgICAgICB0eXBlID0gc2NoZW1hLmdldE11dGF0aW9uVHlwZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUnVsZUtpbmRzLlNVQlNDUklQVElPTjpcbiAgICAgICAgdHlwZSA9IHNjaGVtYS5nZXRTdWJzY3JpcHRpb25UeXBlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBSdWxlS2luZHMuSU5MSU5FX0ZSQUdNRU5UOlxuICAgICAgY2FzZSBSdWxlS2luZHMuRlJBR01FTlRfREVGSU5JVElPTjpcbiAgICAgICAgaWYgKHN0YXRlLnR5cGUpIHtcbiAgICAgICAgICB0eXBlID0gc2NoZW1hLmdldFR5cGUoc3RhdGUudHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFJ1bGVLaW5kcy5GSUVMRDpcbiAgICAgIGNhc2UgUnVsZUtpbmRzLkFMSUFTRURfRklFTEQ6IHtcbiAgICAgICAgaWYgKCF0eXBlIHx8ICFzdGF0ZS5uYW1lKSB7XG4gICAgICAgICAgZmllbGREZWYgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpZWxkRGVmID0gcGFyZW50VHlwZSA/IGdldEZpZWxkRGVmKHNjaGVtYSwgcGFyZW50VHlwZSwgc3RhdGUubmFtZSkgOiBudWxsO1xuICAgICAgICAgIHR5cGUgPSBmaWVsZERlZiA/IGZpZWxkRGVmLnR5cGUgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBSdWxlS2luZHMuU0VMRUNUSU9OX1NFVDpcbiAgICAgICAgcGFyZW50VHlwZSA9IGdldE5hbWVkVHlwZSh0eXBlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFJ1bGVLaW5kcy5ESVJFQ1RJVkU6XG4gICAgICAgIGRpcmVjdGl2ZURlZiA9IHN0YXRlLm5hbWUgPyBzY2hlbWEuZ2V0RGlyZWN0aXZlKHN0YXRlLm5hbWUpIDogbnVsbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFJ1bGVLaW5kcy5JTlRFUkZBQ0VfREVGOlxuICAgICAgICBpZiAoc3RhdGUubmFtZSkge1xuICAgICAgICAgIG9iamVjdFR5cGVEZWYgPSBudWxsO1xuICAgICAgICAgIGludGVyZmFjZURlZiA9IG5ldyBHcmFwaFFMSW50ZXJmYWNlVHlwZSh7XG4gICAgICAgICAgICBuYW1lOiBzdGF0ZS5uYW1lLFxuICAgICAgICAgICAgaW50ZXJmYWNlczogW10sXG4gICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFJ1bGVLaW5kcy5PQkpFQ1RfVFlQRV9ERUY6XG4gICAgICAgIGlmIChzdGF0ZS5uYW1lKSB7XG4gICAgICAgICAgaW50ZXJmYWNlRGVmID0gbnVsbDtcbiAgICAgICAgICBvYmplY3RUeXBlRGVmID0gbmV3IEdyYXBoUUxPYmplY3RUeXBlKHtcbiAgICAgICAgICAgIG5hbWU6IHN0YXRlLm5hbWUsXG4gICAgICAgICAgICBpbnRlcmZhY2VzOiBbXSxcbiAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUnVsZUtpbmRzLkFSR1VNRU5UUzoge1xuICAgICAgICBpZiAoIXN0YXRlLnByZXZTdGF0ZSkge1xuICAgICAgICAgIGFyZ0RlZnMgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN3aXRjaCAoc3RhdGUucHJldlN0YXRlLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgUnVsZUtpbmRzLkZJRUxEOlxuICAgICAgICAgICAgICBhcmdEZWZzID0gZmllbGREZWYgJiYgZmllbGREZWYuYXJncztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJ1bGVLaW5kcy5ESVJFQ1RJVkU6XG4gICAgICAgICAgICAgIGFyZ0RlZnMgPSBkaXJlY3RpdmVEZWYgJiYgZGlyZWN0aXZlRGVmLmFyZ3M7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSdWxlS2luZHMuQUxJQVNFRF9GSUVMRDoge1xuICAgICAgICAgICAgICBjb25zdCBuYW1lID0gKF9hID0gc3RhdGUucHJldlN0YXRlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubmFtZTtcbiAgICAgICAgICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgICAgICAgICAgYXJnRGVmcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3QgZmllbGQgPSBwYXJlbnRUeXBlID8gZ2V0RmllbGREZWYoc2NoZW1hLCBwYXJlbnRUeXBlLCBuYW1lKSA6IG51bGw7XG4gICAgICAgICAgICAgIGlmICghZmllbGQpIHtcbiAgICAgICAgICAgICAgICBhcmdEZWZzID0gbnVsbDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhcmdEZWZzID0gZmllbGQuYXJncztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBhcmdEZWZzID0gbnVsbDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBSdWxlS2luZHMuQVJHVU1FTlQ6XG4gICAgICAgIGlmIChhcmdEZWZzKSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmdEZWZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYXJnRGVmc1tpXS5uYW1lID09PSBzdGF0ZS5uYW1lKSB7XG4gICAgICAgICAgICAgIGFyZ0RlZiA9IGFyZ0RlZnNbaV07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpbnB1dFR5cGUgPSBhcmdEZWYgPT09IG51bGwgfHwgYXJnRGVmID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcmdEZWYudHlwZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFJ1bGVLaW5kcy5FTlVNX1ZBTFVFOlxuICAgICAgICBjb25zdCBlbnVtVHlwZSA9IGdldE5hbWVkVHlwZShpbnB1dFR5cGUpO1xuICAgICAgICBlbnVtVmFsdWUgPSBlbnVtVHlwZSBpbnN0YW5jZW9mIEdyYXBoUUxFbnVtVHlwZSA/IGVudW1UeXBlLmdldFZhbHVlcygpLmZpbmQoKHZhbCkgPT4gdmFsLnZhbHVlID09PSBzdGF0ZS5uYW1lKSA6IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBSdWxlS2luZHMuTElTVF9WQUxVRTpcbiAgICAgICAgY29uc3QgbnVsbGFibGVUeXBlID0gZ2V0TnVsbGFibGVUeXBlKGlucHV0VHlwZSk7XG4gICAgICAgIGlucHV0VHlwZSA9IG51bGxhYmxlVHlwZSBpbnN0YW5jZW9mIEdyYXBoUUxMaXN0ID8gbnVsbGFibGVUeXBlLm9mVHlwZSA6IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBSdWxlS2luZHMuT0JKRUNUX1ZBTFVFOlxuICAgICAgICBjb25zdCBvYmplY3RUeXBlID0gZ2V0TmFtZWRUeXBlKGlucHV0VHlwZSk7XG4gICAgICAgIG9iamVjdEZpZWxkRGVmcyA9IG9iamVjdFR5cGUgaW5zdGFuY2VvZiBHcmFwaFFMSW5wdXRPYmplY3RUeXBlID8gb2JqZWN0VHlwZS5nZXRGaWVsZHMoKSA6IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBSdWxlS2luZHMuT0JKRUNUX0ZJRUxEOlxuICAgICAgICBjb25zdCBvYmplY3RGaWVsZCA9IHN0YXRlLm5hbWUgJiYgb2JqZWN0RmllbGREZWZzID8gb2JqZWN0RmllbGREZWZzW3N0YXRlLm5hbWVdIDogbnVsbDtcbiAgICAgICAgaW5wdXRUeXBlID0gb2JqZWN0RmllbGQgPT09IG51bGwgfHwgb2JqZWN0RmllbGQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdEZpZWxkLnR5cGU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBSdWxlS2luZHMuTkFNRURfVFlQRTpcbiAgICAgICAgaWYgKHN0YXRlLm5hbWUpIHtcbiAgICAgICAgICB0eXBlID0gc2NoZW1hLmdldFR5cGUoc3RhdGUubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBhcmdEZWYsXG4gICAgYXJnRGVmcyxcbiAgICBkaXJlY3RpdmVEZWYsXG4gICAgZW51bVZhbHVlLFxuICAgIGZpZWxkRGVmLFxuICAgIGlucHV0VHlwZSxcbiAgICBvYmplY3RGaWVsZERlZnMsXG4gICAgcGFyZW50VHlwZSxcbiAgICB0eXBlLFxuICAgIGludGVyZmFjZURlZixcbiAgICBvYmplY3RUeXBlRGVmXG4gIH07XG59XG5fX25hbWUoZ2V0VHlwZUluZm8sIFwiZ2V0VHlwZUluZm9cIik7XG5Db2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKFwiaGludFwiLCBcImdyYXBocWxcIiwgKGVkaXRvciwgb3B0aW9ucykgPT4ge1xuICBjb25zdCBzY2hlbWEgPSBvcHRpb25zLnNjaGVtYTtcbiAgaWYgKCFzY2hlbWEpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY3VyID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICBjb25zdCB0b2tlbiA9IGVkaXRvci5nZXRUb2tlbkF0KGN1cik7XG4gIGNvbnN0IHRva2VuU3RhcnQgPSB0b2tlbi50eXBlICE9PSBudWxsICYmIC9cInxcXHcvLnRlc3QodG9rZW4uc3RyaW5nWzBdKSA/IHRva2VuLnN0YXJ0IDogdG9rZW4uZW5kO1xuICBjb25zdCBwb3NpdGlvbiA9IG5ldyBQb3NpdGlvbihjdXIubGluZSwgdG9rZW5TdGFydCk7XG4gIGNvbnN0IHJhd1Jlc3VsdHMgPSBnZXRBdXRvY29tcGxldGVTdWdnZXN0aW9ucyhzY2hlbWEsIGVkaXRvci5nZXRWYWx1ZSgpLCBwb3NpdGlvbiwgdG9rZW4sIG9wdGlvbnMuZXh0ZXJuYWxGcmFnbWVudHMpO1xuICBjb25zdCByZXN1bHRzID0ge1xuICAgIGxpc3Q6IHJhd1Jlc3VsdHMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgdGV4dDogaXRlbS5sYWJlbCxcbiAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBpdGVtLmRvY3VtZW50YXRpb24sXG4gICAgICBpc0RlcHJlY2F0ZWQ6IGl0ZW0uaXNEZXByZWNhdGVkLFxuICAgICAgZGVwcmVjYXRpb25SZWFzb246IGl0ZW0uZGVwcmVjYXRpb25SZWFzb25cbiAgICB9KSksXG4gICAgZnJvbTogeyBsaW5lOiBjdXIubGluZSwgY2g6IHRva2VuU3RhcnQgfSxcbiAgICB0bzogeyBsaW5lOiBjdXIubGluZSwgY2g6IHRva2VuLmVuZCB9XG4gIH07XG4gIGlmICgocmVzdWx0cyA9PT0gbnVsbCB8fCByZXN1bHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHRzLmxpc3QpICYmIHJlc3VsdHMubGlzdC5sZW5ndGggPiAwKSB7XG4gICAgcmVzdWx0cy5mcm9tID0gQ29kZU1pcnJvci5Qb3MocmVzdWx0cy5mcm9tLmxpbmUsIHJlc3VsdHMuZnJvbS5jaCk7XG4gICAgcmVzdWx0cy50byA9IENvZGVNaXJyb3IuUG9zKHJlc3VsdHMudG8ubGluZSwgcmVzdWx0cy50by5jaCk7XG4gICAgQ29kZU1pcnJvci5zaWduYWwoZWRpdG9yLCBcImhhc0NvbXBsZXRpb25cIiwgZWRpdG9yLCByZXN1bHRzLCB0b2tlbik7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdHM7XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///71441\n')},98007:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "o": () => (/* binding */ onlineParser)\n/* harmony export */ });\n/* harmony import */ var _index_es_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59361);\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97359);\nvar __defProp = Object.defineProperty;\nvar __name = (target, value) => __defProp(target, "name", { value, configurable: true });\n\n\nfunction onlineParser(options = {\n  eatWhitespace: (stream) => stream.eatWhile(_index_es_js__WEBPACK_IMPORTED_MODULE_0__.i),\n  lexRules: _index_es_js__WEBPACK_IMPORTED_MODULE_0__.L,\n  parseRules: _index_es_js__WEBPACK_IMPORTED_MODULE_0__.P,\n  editorConfig: {}\n}) {\n  return {\n    startState() {\n      const initialState = {\n        level: 0,\n        step: 0,\n        name: null,\n        kind: null,\n        type: null,\n        rule: null,\n        needsSeparator: false,\n        prevState: null\n      };\n      pushRule(options.parseRules, initialState, graphql__WEBPACK_IMPORTED_MODULE_1__/* .Kind.DOCUMENT */ .h.DOCUMENT);\n      return initialState;\n    },\n    token(stream, state) {\n      return getToken(stream, state, options);\n    }\n  };\n}\n__name(onlineParser, "onlineParser");\nfunction getToken(stream, state, options) {\n  var _a;\n  if (state.inBlockstring) {\n    if (stream.match(/.*"""/)) {\n      state.inBlockstring = false;\n      return "string";\n    } else {\n      stream.skipToEnd();\n      return "string";\n    }\n  }\n  const { lexRules, parseRules, eatWhitespace, editorConfig } = options;\n  if (state.rule && state.rule.length === 0) {\n    popRule(state);\n  } else if (state.needsAdvance) {\n    state.needsAdvance = false;\n    advanceRule(state, true);\n  }\n  if (stream.sol()) {\n    const tabSize = (editorConfig === null || editorConfig === void 0 ? void 0 : editorConfig.tabSize) || 2;\n    state.indentLevel = Math.floor(stream.indentation() / tabSize);\n  }\n  if (eatWhitespace(stream)) {\n    return "ws";\n  }\n  const token = lex(lexRules, stream);\n  if (!token) {\n    const matchedSomething = stream.match(/\\S+/);\n    if (!matchedSomething) {\n      stream.match(/\\s/);\n    }\n    pushRule(SpecialParseRules, state, "Invalid");\n    return "invalidchar";\n  }\n  if (token.kind === "Comment") {\n    pushRule(SpecialParseRules, state, "Comment");\n    return "comment";\n  }\n  const backupState = assign({}, state);\n  if (token.kind === "Punctuation") {\n    if (/^[{([]/.test(token.value)) {\n      if (state.indentLevel !== void 0) {\n        state.levels = (state.levels || []).concat(state.indentLevel + 1);\n      }\n    } else if (/^[})\\]]/.test(token.value)) {\n      const levels = state.levels = (state.levels || []).slice(0, -1);\n      if (state.indentLevel) {\n        if (levels.length > 0 && levels[levels.length - 1] < state.indentLevel) {\n          state.indentLevel = levels[levels.length - 1];\n        }\n      }\n    }\n  }\n  while (state.rule) {\n    let expected = typeof state.rule === "function" ? state.step === 0 ? state.rule(token, stream) : null : state.rule[state.step];\n    if (state.needsSeparator) {\n      expected = expected === null || expected === void 0 ? void 0 : expected.separator;\n    }\n    if (expected) {\n      if (expected.ofRule) {\n        expected = expected.ofRule;\n      }\n      if (typeof expected === "string") {\n        pushRule(parseRules, state, expected);\n        continue;\n      }\n      if ((_a = expected.match) === null || _a === void 0 ? void 0 : _a.call(expected, token)) {\n        if (expected.update) {\n          expected.update(state, token);\n        }\n        if (token.kind === "Punctuation") {\n          advanceRule(state, true);\n        } else {\n          state.needsAdvance = true;\n        }\n        return expected.style;\n      }\n    }\n    unsuccessful(state);\n  }\n  assign(state, backupState);\n  pushRule(SpecialParseRules, state, "Invalid");\n  return "invalidchar";\n}\n__name(getToken, "getToken");\nfunction assign(to, from) {\n  const keys = Object.keys(from);\n  for (let i = 0; i < keys.length; i++) {\n    to[keys[i]] = from[keys[i]];\n  }\n  return to;\n}\n__name(assign, "assign");\nconst SpecialParseRules = {\n  Invalid: [],\n  Comment: []\n};\nfunction pushRule(rules, state, ruleKind) {\n  if (!rules[ruleKind]) {\n    throw new TypeError("Unknown rule: " + ruleKind);\n  }\n  state.prevState = Object.assign({}, state);\n  state.kind = ruleKind;\n  state.name = null;\n  state.type = null;\n  state.rule = rules[ruleKind];\n  state.step = 0;\n  state.needsSeparator = false;\n}\n__name(pushRule, "pushRule");\nfunction popRule(state) {\n  if (!state.prevState) {\n    return;\n  }\n  state.kind = state.prevState.kind;\n  state.name = state.prevState.name;\n  state.type = state.prevState.type;\n  state.rule = state.prevState.rule;\n  state.step = state.prevState.step;\n  state.needsSeparator = state.prevState.needsSeparator;\n  state.prevState = state.prevState.prevState;\n}\n__name(popRule, "popRule");\nfunction advanceRule(state, successful) {\n  var _a;\n  if (isList(state) && state.rule) {\n    const step = state.rule[state.step];\n    if (step.separator) {\n      const separator = step.separator;\n      state.needsSeparator = !state.needsSeparator;\n      if (!state.needsSeparator && separator.ofRule) {\n        return;\n      }\n    }\n    if (successful) {\n      return;\n    }\n  }\n  state.needsSeparator = false;\n  state.step++;\n  while (state.rule && !(Array.isArray(state.rule) && state.step < state.rule.length)) {\n    popRule(state);\n    if (state.rule) {\n      if (isList(state)) {\n        if ((_a = state.rule) === null || _a === void 0 ? void 0 : _a[state.step].separator) {\n          state.needsSeparator = !state.needsSeparator;\n        }\n      } else {\n        state.needsSeparator = false;\n        state.step++;\n      }\n    }\n  }\n}\n__name(advanceRule, "advanceRule");\nfunction isList(state) {\n  const step = Array.isArray(state.rule) && typeof state.rule[state.step] !== "string" && state.rule[state.step];\n  return step && step.isList;\n}\n__name(isList, "isList");\nfunction unsuccessful(state) {\n  while (state.rule && !(Array.isArray(state.rule) && state.rule[state.step].ofRule)) {\n    popRule(state);\n  }\n  if (state.rule) {\n    advanceRule(state, false);\n  }\n}\n__name(unsuccessful, "unsuccessful");\nfunction lex(lexRules, stream) {\n  const kinds = Object.keys(lexRules);\n  for (let i = 0; i < kinds.length; i++) {\n    const match = stream.match(lexRules[kinds[i]]);\n    if (match && match instanceof Array) {\n      return { kind: kinds[i], value: match[0] };\n    }\n  }\n}\n__name(lex, "lex");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTgwMDcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBLDREQUE0RCwyQkFBMkI7QUFDUjtBQUNoRDtBQUMvQjtBQUNBLDZDQUE2QywyQ0FBUztBQUN0RCxZQUFZLDJDQUFRO0FBQ3BCLGNBQWMsMkNBQVU7QUFDeEI7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELG9FQUFhO0FBQzlEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsb0RBQW9EO0FBQzlEO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxNQUFNLGFBQWE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUJBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQzZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FjaGlxbC1kZW1vLy4vbm9kZV9tb2R1bGVzL0BncmFwaGlxbC9yZWFjdC9kaXN0L29ubGluZVBhcnNlci5lcy5qcz9jZjQ0Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19uYW1lID0gKHRhcmdldCwgdmFsdWUpID0+IF9fZGVmUHJvcCh0YXJnZXQsIFwibmFtZVwiLCB7IHZhbHVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG5pbXBvcnQgeyBpIGFzIGlzSWdub3JlZCwgTCBhcyBMZXhSdWxlcywgUCBhcyBQYXJzZVJ1bGVzIH0gZnJvbSBcIi4vaW5kZXguZXMuanNcIjtcbmltcG9ydCB7IEtpbmQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuZnVuY3Rpb24gb25saW5lUGFyc2VyKG9wdGlvbnMgPSB7XG4gIGVhdFdoaXRlc3BhY2U6IChzdHJlYW0pID0+IHN0cmVhbS5lYXRXaGlsZShpc0lnbm9yZWQpLFxuICBsZXhSdWxlczogTGV4UnVsZXMsXG4gIHBhcnNlUnVsZXM6IFBhcnNlUnVsZXMsXG4gIGVkaXRvckNvbmZpZzoge31cbn0pIHtcbiAgcmV0dXJuIHtcbiAgICBzdGFydFN0YXRlKCkge1xuICAgICAgY29uc3QgaW5pdGlhbFN0YXRlID0ge1xuICAgICAgICBsZXZlbDogMCxcbiAgICAgICAgc3RlcDogMCxcbiAgICAgICAgbmFtZTogbnVsbCxcbiAgICAgICAga2luZDogbnVsbCxcbiAgICAgICAgdHlwZTogbnVsbCxcbiAgICAgICAgcnVsZTogbnVsbCxcbiAgICAgICAgbmVlZHNTZXBhcmF0b3I6IGZhbHNlLFxuICAgICAgICBwcmV2U3RhdGU6IG51bGxcbiAgICAgIH07XG4gICAgICBwdXNoUnVsZShvcHRpb25zLnBhcnNlUnVsZXMsIGluaXRpYWxTdGF0ZSwgS2luZC5ET0NVTUVOVCk7XG4gICAgICByZXR1cm4gaW5pdGlhbFN0YXRlO1xuICAgIH0sXG4gICAgdG9rZW4oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgcmV0dXJuIGdldFRva2VuKHN0cmVhbSwgc3RhdGUsIG9wdGlvbnMpO1xuICAgIH1cbiAgfTtcbn1cbl9fbmFtZShvbmxpbmVQYXJzZXIsIFwib25saW5lUGFyc2VyXCIpO1xuZnVuY3Rpb24gZ2V0VG9rZW4oc3RyZWFtLCBzdGF0ZSwgb3B0aW9ucykge1xuICB2YXIgX2E7XG4gIGlmIChzdGF0ZS5pbkJsb2Nrc3RyaW5nKSB7XG4gICAgaWYgKHN0cmVhbS5tYXRjaCgvLipcIlwiXCIvKSkge1xuICAgICAgc3RhdGUuaW5CbG9ja3N0cmluZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgIH1cbiAgfVxuICBjb25zdCB7IGxleFJ1bGVzLCBwYXJzZVJ1bGVzLCBlYXRXaGl0ZXNwYWNlLCBlZGl0b3JDb25maWcgfSA9IG9wdGlvbnM7XG4gIGlmIChzdGF0ZS5ydWxlICYmIHN0YXRlLnJ1bGUubGVuZ3RoID09PSAwKSB7XG4gICAgcG9wUnVsZShzdGF0ZSk7XG4gIH0gZWxzZSBpZiAoc3RhdGUubmVlZHNBZHZhbmNlKSB7XG4gICAgc3RhdGUubmVlZHNBZHZhbmNlID0gZmFsc2U7XG4gICAgYWR2YW5jZVJ1bGUoc3RhdGUsIHRydWUpO1xuICB9XG4gIGlmIChzdHJlYW0uc29sKCkpIHtcbiAgICBjb25zdCB0YWJTaXplID0gKGVkaXRvckNvbmZpZyA9PT0gbnVsbCB8fCBlZGl0b3JDb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVkaXRvckNvbmZpZy50YWJTaXplKSB8fCAyO1xuICAgIHN0YXRlLmluZGVudExldmVsID0gTWF0aC5mbG9vcihzdHJlYW0uaW5kZW50YXRpb24oKSAvIHRhYlNpemUpO1xuICB9XG4gIGlmIChlYXRXaGl0ZXNwYWNlKHN0cmVhbSkpIHtcbiAgICByZXR1cm4gXCJ3c1wiO1xuICB9XG4gIGNvbnN0IHRva2VuID0gbGV4KGxleFJ1bGVzLCBzdHJlYW0pO1xuICBpZiAoIXRva2VuKSB7XG4gICAgY29uc3QgbWF0Y2hlZFNvbWV0aGluZyA9IHN0cmVhbS5tYXRjaCgvXFxTKy8pO1xuICAgIGlmICghbWF0Y2hlZFNvbWV0aGluZykge1xuICAgICAgc3RyZWFtLm1hdGNoKC9cXHMvKTtcbiAgICB9XG4gICAgcHVzaFJ1bGUoU3BlY2lhbFBhcnNlUnVsZXMsIHN0YXRlLCBcIkludmFsaWRcIik7XG4gICAgcmV0dXJuIFwiaW52YWxpZGNoYXJcIjtcbiAgfVxuICBpZiAodG9rZW4ua2luZCA9PT0gXCJDb21tZW50XCIpIHtcbiAgICBwdXNoUnVsZShTcGVjaWFsUGFyc2VSdWxlcywgc3RhdGUsIFwiQ29tbWVudFwiKTtcbiAgICByZXR1cm4gXCJjb21tZW50XCI7XG4gIH1cbiAgY29uc3QgYmFja3VwU3RhdGUgPSBhc3NpZ24oe30sIHN0YXRlKTtcbiAgaWYgKHRva2VuLmtpbmQgPT09IFwiUHVuY3R1YXRpb25cIikge1xuICAgIGlmICgvXlt7KFtdLy50ZXN0KHRva2VuLnZhbHVlKSkge1xuICAgICAgaWYgKHN0YXRlLmluZGVudExldmVsICE9PSB2b2lkIDApIHtcbiAgICAgICAgc3RhdGUubGV2ZWxzID0gKHN0YXRlLmxldmVscyB8fCBbXSkuY29uY2F0KHN0YXRlLmluZGVudExldmVsICsgMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgvXlt9KVxcXV0vLnRlc3QodG9rZW4udmFsdWUpKSB7XG4gICAgICBjb25zdCBsZXZlbHMgPSBzdGF0ZS5sZXZlbHMgPSAoc3RhdGUubGV2ZWxzIHx8IFtdKS5zbGljZSgwLCAtMSk7XG4gICAgICBpZiAoc3RhdGUuaW5kZW50TGV2ZWwpIHtcbiAgICAgICAgaWYgKGxldmVscy5sZW5ndGggPiAwICYmIGxldmVsc1tsZXZlbHMubGVuZ3RoIC0gMV0gPCBzdGF0ZS5pbmRlbnRMZXZlbCkge1xuICAgICAgICAgIHN0YXRlLmluZGVudExldmVsID0gbGV2ZWxzW2xldmVscy5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICB3aGlsZSAoc3RhdGUucnVsZSkge1xuICAgIGxldCBleHBlY3RlZCA9IHR5cGVvZiBzdGF0ZS5ydWxlID09PSBcImZ1bmN0aW9uXCIgPyBzdGF0ZS5zdGVwID09PSAwID8gc3RhdGUucnVsZSh0b2tlbiwgc3RyZWFtKSA6IG51bGwgOiBzdGF0ZS5ydWxlW3N0YXRlLnN0ZXBdO1xuICAgIGlmIChzdGF0ZS5uZWVkc1NlcGFyYXRvcikge1xuICAgICAgZXhwZWN0ZWQgPSBleHBlY3RlZCA9PT0gbnVsbCB8fCBleHBlY3RlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXhwZWN0ZWQuc2VwYXJhdG9yO1xuICAgIH1cbiAgICBpZiAoZXhwZWN0ZWQpIHtcbiAgICAgIGlmIChleHBlY3RlZC5vZlJ1bGUpIHtcbiAgICAgICAgZXhwZWN0ZWQgPSBleHBlY3RlZC5vZlJ1bGU7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGV4cGVjdGVkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHB1c2hSdWxlKHBhcnNlUnVsZXMsIHN0YXRlLCBleHBlY3RlZCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKChfYSA9IGV4cGVjdGVkLm1hdGNoKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChleHBlY3RlZCwgdG9rZW4pKSB7XG4gICAgICAgIGlmIChleHBlY3RlZC51cGRhdGUpIHtcbiAgICAgICAgICBleHBlY3RlZC51cGRhdGUoc3RhdGUsIHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9rZW4ua2luZCA9PT0gXCJQdW5jdHVhdGlvblwiKSB7XG4gICAgICAgICAgYWR2YW5jZVJ1bGUoc3RhdGUsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXRlLm5lZWRzQWR2YW5jZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4cGVjdGVkLnN0eWxlO1xuICAgICAgfVxuICAgIH1cbiAgICB1bnN1Y2Nlc3NmdWwoc3RhdGUpO1xuICB9XG4gIGFzc2lnbihzdGF0ZSwgYmFja3VwU3RhdGUpO1xuICBwdXNoUnVsZShTcGVjaWFsUGFyc2VSdWxlcywgc3RhdGUsIFwiSW52YWxpZFwiKTtcbiAgcmV0dXJuIFwiaW52YWxpZGNoYXJcIjtcbn1cbl9fbmFtZShnZXRUb2tlbiwgXCJnZXRUb2tlblwiKTtcbmZ1bmN0aW9uIGFzc2lnbih0bywgZnJvbSkge1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gdG87XG59XG5fX25hbWUoYXNzaWduLCBcImFzc2lnblwiKTtcbmNvbnN0IFNwZWNpYWxQYXJzZVJ1bGVzID0ge1xuICBJbnZhbGlkOiBbXSxcbiAgQ29tbWVudDogW11cbn07XG5mdW5jdGlvbiBwdXNoUnVsZShydWxlcywgc3RhdGUsIHJ1bGVLaW5kKSB7XG4gIGlmICghcnVsZXNbcnVsZUtpbmRdKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gcnVsZTogXCIgKyBydWxlS2luZCk7XG4gIH1cbiAgc3RhdGUucHJldlN0YXRlID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUpO1xuICBzdGF0ZS5raW5kID0gcnVsZUtpbmQ7XG4gIHN0YXRlLm5hbWUgPSBudWxsO1xuICBzdGF0ZS50eXBlID0gbnVsbDtcbiAgc3RhdGUucnVsZSA9IHJ1bGVzW3J1bGVLaW5kXTtcbiAgc3RhdGUuc3RlcCA9IDA7XG4gIHN0YXRlLm5lZWRzU2VwYXJhdG9yID0gZmFsc2U7XG59XG5fX25hbWUocHVzaFJ1bGUsIFwicHVzaFJ1bGVcIik7XG5mdW5jdGlvbiBwb3BSdWxlKHN0YXRlKSB7XG4gIGlmICghc3RhdGUucHJldlN0YXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHN0YXRlLmtpbmQgPSBzdGF0ZS5wcmV2U3RhdGUua2luZDtcbiAgc3RhdGUubmFtZSA9IHN0YXRlLnByZXZTdGF0ZS5uYW1lO1xuICBzdGF0ZS50eXBlID0gc3RhdGUucHJldlN0YXRlLnR5cGU7XG4gIHN0YXRlLnJ1bGUgPSBzdGF0ZS5wcmV2U3RhdGUucnVsZTtcbiAgc3RhdGUuc3RlcCA9IHN0YXRlLnByZXZTdGF0ZS5zdGVwO1xuICBzdGF0ZS5uZWVkc1NlcGFyYXRvciA9IHN0YXRlLnByZXZTdGF0ZS5uZWVkc1NlcGFyYXRvcjtcbiAgc3RhdGUucHJldlN0YXRlID0gc3RhdGUucHJldlN0YXRlLnByZXZTdGF0ZTtcbn1cbl9fbmFtZShwb3BSdWxlLCBcInBvcFJ1bGVcIik7XG5mdW5jdGlvbiBhZHZhbmNlUnVsZShzdGF0ZSwgc3VjY2Vzc2Z1bCkge1xuICB2YXIgX2E7XG4gIGlmIChpc0xpc3Qoc3RhdGUpICYmIHN0YXRlLnJ1bGUpIHtcbiAgICBjb25zdCBzdGVwID0gc3RhdGUucnVsZVtzdGF0ZS5zdGVwXTtcbiAgICBpZiAoc3RlcC5zZXBhcmF0b3IpIHtcbiAgICAgIGNvbnN0IHNlcGFyYXRvciA9IHN0ZXAuc2VwYXJhdG9yO1xuICAgICAgc3RhdGUubmVlZHNTZXBhcmF0b3IgPSAhc3RhdGUubmVlZHNTZXBhcmF0b3I7XG4gICAgICBpZiAoIXN0YXRlLm5lZWRzU2VwYXJhdG9yICYmIHNlcGFyYXRvci5vZlJ1bGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3VjY2Vzc2Z1bCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBzdGF0ZS5uZWVkc1NlcGFyYXRvciA9IGZhbHNlO1xuICBzdGF0ZS5zdGVwKys7XG4gIHdoaWxlIChzdGF0ZS5ydWxlICYmICEoQXJyYXkuaXNBcnJheShzdGF0ZS5ydWxlKSAmJiBzdGF0ZS5zdGVwIDwgc3RhdGUucnVsZS5sZW5ndGgpKSB7XG4gICAgcG9wUnVsZShzdGF0ZSk7XG4gICAgaWYgKHN0YXRlLnJ1bGUpIHtcbiAgICAgIGlmIChpc0xpc3Qoc3RhdGUpKSB7XG4gICAgICAgIGlmICgoX2EgPSBzdGF0ZS5ydWxlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Fbc3RhdGUuc3RlcF0uc2VwYXJhdG9yKSB7XG4gICAgICAgICAgc3RhdGUubmVlZHNTZXBhcmF0b3IgPSAhc3RhdGUubmVlZHNTZXBhcmF0b3I7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLm5lZWRzU2VwYXJhdG9yID0gZmFsc2U7XG4gICAgICAgIHN0YXRlLnN0ZXArKztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbl9fbmFtZShhZHZhbmNlUnVsZSwgXCJhZHZhbmNlUnVsZVwiKTtcbmZ1bmN0aW9uIGlzTGlzdChzdGF0ZSkge1xuICBjb25zdCBzdGVwID0gQXJyYXkuaXNBcnJheShzdGF0ZS5ydWxlKSAmJiB0eXBlb2Ygc3RhdGUucnVsZVtzdGF0ZS5zdGVwXSAhPT0gXCJzdHJpbmdcIiAmJiBzdGF0ZS5ydWxlW3N0YXRlLnN0ZXBdO1xuICByZXR1cm4gc3RlcCAmJiBzdGVwLmlzTGlzdDtcbn1cbl9fbmFtZShpc0xpc3QsIFwiaXNMaXN0XCIpO1xuZnVuY3Rpb24gdW5zdWNjZXNzZnVsKHN0YXRlKSB7XG4gIHdoaWxlIChzdGF0ZS5ydWxlICYmICEoQXJyYXkuaXNBcnJheShzdGF0ZS5ydWxlKSAmJiBzdGF0ZS5ydWxlW3N0YXRlLnN0ZXBdLm9mUnVsZSkpIHtcbiAgICBwb3BSdWxlKHN0YXRlKTtcbiAgfVxuICBpZiAoc3RhdGUucnVsZSkge1xuICAgIGFkdmFuY2VSdWxlKHN0YXRlLCBmYWxzZSk7XG4gIH1cbn1cbl9fbmFtZSh1bnN1Y2Nlc3NmdWwsIFwidW5zdWNjZXNzZnVsXCIpO1xuZnVuY3Rpb24gbGV4KGxleFJ1bGVzLCBzdHJlYW0pIHtcbiAgY29uc3Qga2luZHMgPSBPYmplY3Qua2V5cyhsZXhSdWxlcyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2luZHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBtYXRjaCA9IHN0cmVhbS5tYXRjaChsZXhSdWxlc1traW5kc1tpXV0pO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICByZXR1cm4geyBraW5kOiBraW5kc1tpXSwgdmFsdWU6IG1hdGNoWzBdIH07XG4gICAgfVxuICB9XG59XG5fX25hbWUobGV4LCBcImxleFwiKTtcbmV4cG9ydCB7IG9ubGluZVBhcnNlciBhcyBvIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///98007\n')}}]);