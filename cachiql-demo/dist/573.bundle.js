"use strict";(self.webpackChunkcachiql_demo=self.webpackChunkcachiql_demo||[]).push([[573,105,744],{19744:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "a": () => (/* binding */ dialog$2),\n/* harmony export */   "d": () => (/* binding */ dialog$1)\n/* harmony export */ });\n/* harmony import */ var _codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97480);\nvar __defProp = Object.defineProperty;\nvar __name = (target, value) => __defProp(target, "name", { value, configurable: true });\n\nfunction _mergeNamespaces(n, m) {\n  m.forEach(function(e) {\n    e && typeof e !== "string" && !Array.isArray(e) && Object.keys(e).forEach(function(k) {\n      if (k !== "default" && !(k in n)) {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function() {\n            return e[k];\n          }\n        });\n      }\n    });\n  });\n  return Object.freeze(n);\n}\n__name(_mergeNamespaces, "_mergeNamespaces");\nvar dialog$2 = { exports: {} };\n(function(module, exports) {\n  (function(mod) {\n    mod(_codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__.a.exports);\n  })(function(CodeMirror) {\n    function dialogDiv(cm, template, bottom) {\n      var wrap = cm.getWrapperElement();\n      var dialog2;\n      dialog2 = wrap.appendChild(document.createElement("div"));\n      if (bottom)\n        dialog2.className = "CodeMirror-dialog CodeMirror-dialog-bottom";\n      else\n        dialog2.className = "CodeMirror-dialog CodeMirror-dialog-top";\n      if (typeof template == "string") {\n        dialog2.innerHTML = template;\n      } else {\n        dialog2.appendChild(template);\n      }\n      CodeMirror.addClass(wrap, "dialog-opened");\n      return dialog2;\n    }\n    __name(dialogDiv, "dialogDiv");\n    function closeNotification(cm, newVal) {\n      if (cm.state.currentNotificationClose)\n        cm.state.currentNotificationClose();\n      cm.state.currentNotificationClose = newVal;\n    }\n    __name(closeNotification, "closeNotification");\n    CodeMirror.defineExtension("openDialog", function(template, callback, options) {\n      if (!options)\n        options = {};\n      closeNotification(this, null);\n      var dialog2 = dialogDiv(this, template, options.bottom);\n      var closed = false, me = this;\n      function close(newVal) {\n        if (typeof newVal == "string") {\n          inp.value = newVal;\n        } else {\n          if (closed)\n            return;\n          closed = true;\n          CodeMirror.rmClass(dialog2.parentNode, "dialog-opened");\n          dialog2.parentNode.removeChild(dialog2);\n          me.focus();\n          if (options.onClose)\n            options.onClose(dialog2);\n        }\n      }\n      __name(close, "close");\n      var inp = dialog2.getElementsByTagName("input")[0], button;\n      if (inp) {\n        inp.focus();\n        if (options.value) {\n          inp.value = options.value;\n          if (options.selectValueOnOpen !== false) {\n            inp.select();\n          }\n        }\n        if (options.onInput)\n          CodeMirror.on(inp, "input", function(e) {\n            options.onInput(e, inp.value, close);\n          });\n        if (options.onKeyUp)\n          CodeMirror.on(inp, "keyup", function(e) {\n            options.onKeyUp(e, inp.value, close);\n          });\n        CodeMirror.on(inp, "keydown", function(e) {\n          if (options && options.onKeyDown && options.onKeyDown(e, inp.value, close)) {\n            return;\n          }\n          if (e.keyCode == 27 || options.closeOnEnter !== false && e.keyCode == 13) {\n            inp.blur();\n            CodeMirror.e_stop(e);\n            close();\n          }\n          if (e.keyCode == 13)\n            callback(inp.value, e);\n        });\n        if (options.closeOnBlur !== false)\n          CodeMirror.on(dialog2, "focusout", function(evt) {\n            if (evt.relatedTarget !== null)\n              close();\n          });\n      } else if (button = dialog2.getElementsByTagName("button")[0]) {\n        CodeMirror.on(button, "click", function() {\n          close();\n          me.focus();\n        });\n        if (options.closeOnBlur !== false)\n          CodeMirror.on(button, "blur", close);\n        button.focus();\n      }\n      return close;\n    });\n    CodeMirror.defineExtension("openConfirm", function(template, callbacks, options) {\n      closeNotification(this, null);\n      var dialog2 = dialogDiv(this, template, options && options.bottom);\n      var buttons = dialog2.getElementsByTagName("button");\n      var closed = false, me = this, blurring = 1;\n      function close() {\n        if (closed)\n          return;\n        closed = true;\n        CodeMirror.rmClass(dialog2.parentNode, "dialog-opened");\n        dialog2.parentNode.removeChild(dialog2);\n        me.focus();\n      }\n      __name(close, "close");\n      buttons[0].focus();\n      for (var i = 0; i < buttons.length; ++i) {\n        var b = buttons[i];\n        (function(callback) {\n          CodeMirror.on(b, "click", function(e) {\n            CodeMirror.e_preventDefault(e);\n            close();\n            if (callback)\n              callback(me);\n          });\n        })(callbacks[i]);\n        CodeMirror.on(b, "blur", function() {\n          --blurring;\n          setTimeout(function() {\n            if (blurring <= 0)\n              close();\n          }, 200);\n        });\n        CodeMirror.on(b, "focus", function() {\n          ++blurring;\n        });\n      }\n    });\n    CodeMirror.defineExtension("openNotification", function(template, options) {\n      closeNotification(this, close);\n      var dialog2 = dialogDiv(this, template, options && options.bottom);\n      var closed = false, doneTimer;\n      var duration = options && typeof options.duration !== "undefined" ? options.duration : 5e3;\n      function close() {\n        if (closed)\n          return;\n        closed = true;\n        clearTimeout(doneTimer);\n        CodeMirror.rmClass(dialog2.parentNode, "dialog-opened");\n        dialog2.parentNode.removeChild(dialog2);\n      }\n      __name(close, "close");\n      CodeMirror.on(dialog2, "click", function(e) {\n        CodeMirror.e_preventDefault(e);\n        close();\n      });\n      if (duration)\n        doneTimer = setTimeout(close, duration);\n      return close;\n    });\n  });\n})();\nvar dialog = dialog$2.exports;\nvar dialog$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ _mergeNamespaces({\n  __proto__: null,\n  [Symbol.toStringTag]: "Module",\n  "default": dialog\n}, [dialog$2.exports]));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk3NDQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQSw0REFBNEQsMkJBQTJCO0FBQ2xDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFFBQVEsd0RBQWtCO0FBQzFCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9CQUFvQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3VDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FjaGlxbC1kZW1vLy4vbm9kZV9tb2R1bGVzL0BncmFwaGlxbC9yZWFjdC9kaXN0L2RpYWxvZy5lcy5qcz84Yjk5Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19uYW1lID0gKHRhcmdldCwgdmFsdWUpID0+IF9fZGVmUHJvcCh0YXJnZXQsIFwibmFtZVwiLCB7IHZhbHVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG5pbXBvcnQgeyBhIGFzIGNvZGVtaXJyb3IgfSBmcm9tIFwiLi9jb2RlbWlycm9yLmVzLmpzXCI7XG5mdW5jdGlvbiBfbWVyZ2VOYW1lc3BhY2VzKG4sIG0pIHtcbiAgbS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHtcbiAgICBlICYmIHR5cGVvZiBlICE9PSBcInN0cmluZ1wiICYmICFBcnJheS5pc0FycmF5KGUpICYmIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24oaykge1xuICAgICAgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmICEoayBpbiBuKSkge1xuICAgICAgICB2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgayk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCBrLCBkLmdldCA/IGQgOiB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVba107XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBPYmplY3QuZnJlZXplKG4pO1xufVxuX19uYW1lKF9tZXJnZU5hbWVzcGFjZXMsIFwiX21lcmdlTmFtZXNwYWNlc1wiKTtcbnZhciBkaWFsb2ckMiA9IHsgZXhwb3J0czoge30gfTtcbihmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcbiAgKGZ1bmN0aW9uKG1vZCkge1xuICAgIG1vZChjb2RlbWlycm9yLmV4cG9ydHMpO1xuICB9KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG4gICAgZnVuY3Rpb24gZGlhbG9nRGl2KGNtLCB0ZW1wbGF0ZSwgYm90dG9tKSB7XG4gICAgICB2YXIgd3JhcCA9IGNtLmdldFdyYXBwZXJFbGVtZW50KCk7XG4gICAgICB2YXIgZGlhbG9nMjtcbiAgICAgIGRpYWxvZzIgPSB3cmFwLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgICAgaWYgKGJvdHRvbSlcbiAgICAgICAgZGlhbG9nMi5jbGFzc05hbWUgPSBcIkNvZGVNaXJyb3ItZGlhbG9nIENvZGVNaXJyb3ItZGlhbG9nLWJvdHRvbVwiO1xuICAgICAgZWxzZVxuICAgICAgICBkaWFsb2cyLmNsYXNzTmFtZSA9IFwiQ29kZU1pcnJvci1kaWFsb2cgQ29kZU1pcnJvci1kaWFsb2ctdG9wXCI7XG4gICAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgZGlhbG9nMi5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpYWxvZzIuYXBwZW5kQ2hpbGQodGVtcGxhdGUpO1xuICAgICAgfVxuICAgICAgQ29kZU1pcnJvci5hZGRDbGFzcyh3cmFwLCBcImRpYWxvZy1vcGVuZWRcIik7XG4gICAgICByZXR1cm4gZGlhbG9nMjtcbiAgICB9XG4gICAgX19uYW1lKGRpYWxvZ0RpdiwgXCJkaWFsb2dEaXZcIik7XG4gICAgZnVuY3Rpb24gY2xvc2VOb3RpZmljYXRpb24oY20sIG5ld1ZhbCkge1xuICAgICAgaWYgKGNtLnN0YXRlLmN1cnJlbnROb3RpZmljYXRpb25DbG9zZSlcbiAgICAgICAgY20uc3RhdGUuY3VycmVudE5vdGlmaWNhdGlvbkNsb3NlKCk7XG4gICAgICBjbS5zdGF0ZS5jdXJyZW50Tm90aWZpY2F0aW9uQ2xvc2UgPSBuZXdWYWw7XG4gICAgfVxuICAgIF9fbmFtZShjbG9zZU5vdGlmaWNhdGlvbiwgXCJjbG9zZU5vdGlmaWNhdGlvblwiKTtcbiAgICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcIm9wZW5EaWFsb2dcIiwgZnVuY3Rpb24odGVtcGxhdGUsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIGNsb3NlTm90aWZpY2F0aW9uKHRoaXMsIG51bGwpO1xuICAgICAgdmFyIGRpYWxvZzIgPSBkaWFsb2dEaXYodGhpcywgdGVtcGxhdGUsIG9wdGlvbnMuYm90dG9tKTtcbiAgICAgIHZhciBjbG9zZWQgPSBmYWxzZSwgbWUgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gY2xvc2UobmV3VmFsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3VmFsID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBpbnAudmFsdWUgPSBuZXdWYWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNsb3NlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgICAgIENvZGVNaXJyb3Iucm1DbGFzcyhkaWFsb2cyLnBhcmVudE5vZGUsIFwiZGlhbG9nLW9wZW5lZFwiKTtcbiAgICAgICAgICBkaWFsb2cyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGlhbG9nMik7XG4gICAgICAgICAgbWUuZm9jdXMoKTtcbiAgICAgICAgICBpZiAob3B0aW9ucy5vbkNsb3NlKVxuICAgICAgICAgICAgb3B0aW9ucy5vbkNsb3NlKGRpYWxvZzIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBfX25hbWUoY2xvc2UsIFwiY2xvc2VcIik7XG4gICAgICB2YXIgaW5wID0gZGlhbG9nMi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdLCBidXR0b247XG4gICAgICBpZiAoaW5wKSB7XG4gICAgICAgIGlucC5mb2N1cygpO1xuICAgICAgICBpZiAob3B0aW9ucy52YWx1ZSkge1xuICAgICAgICAgIGlucC52YWx1ZSA9IG9wdGlvbnMudmFsdWU7XG4gICAgICAgICAgaWYgKG9wdGlvbnMuc2VsZWN0VmFsdWVPbk9wZW4gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpbnAuc2VsZWN0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm9uSW5wdXQpXG4gICAgICAgICAgQ29kZU1pcnJvci5vbihpbnAsIFwiaW5wdXRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgb3B0aW9ucy5vbklucHV0KGUsIGlucC52YWx1ZSwgY2xvc2UpO1xuICAgICAgICAgIH0pO1xuICAgICAgICBpZiAob3B0aW9ucy5vbktleVVwKVxuICAgICAgICAgIENvZGVNaXJyb3Iub24oaW5wLCBcImtleXVwXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIG9wdGlvbnMub25LZXlVcChlLCBpbnAudmFsdWUsIGNsb3NlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgQ29kZU1pcnJvci5vbihpbnAsIFwia2V5ZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5vbktleURvd24gJiYgb3B0aW9ucy5vbktleURvd24oZSwgaW5wLnZhbHVlLCBjbG9zZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAyNyB8fCBvcHRpb25zLmNsb3NlT25FbnRlciAhPT0gZmFsc2UgJiYgZS5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICBpbnAuYmx1cigpO1xuICAgICAgICAgICAgQ29kZU1pcnJvci5lX3N0b3AoZSk7XG4gICAgICAgICAgICBjbG9zZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKVxuICAgICAgICAgICAgY2FsbGJhY2soaW5wLnZhbHVlLCBlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvcHRpb25zLmNsb3NlT25CbHVyICE9PSBmYWxzZSlcbiAgICAgICAgICBDb2RlTWlycm9yLm9uKGRpYWxvZzIsIFwiZm9jdXNvdXRcIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBpZiAoZXZ0LnJlbGF0ZWRUYXJnZXQgIT09IG51bGwpXG4gICAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGJ1dHRvbiA9IGRpYWxvZzIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJidXR0b25cIilbMF0pIHtcbiAgICAgICAgQ29kZU1pcnJvci5vbihidXR0b24sIFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICBtZS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY2xvc2VPbkJsdXIgIT09IGZhbHNlKVxuICAgICAgICAgIENvZGVNaXJyb3Iub24oYnV0dG9uLCBcImJsdXJcIiwgY2xvc2UpO1xuICAgICAgICBidXR0b24uZm9jdXMoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjbG9zZTtcbiAgICB9KTtcbiAgICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcIm9wZW5Db25maXJtXCIsIGZ1bmN0aW9uKHRlbXBsYXRlLCBjYWxsYmFja3MsIG9wdGlvbnMpIHtcbiAgICAgIGNsb3NlTm90aWZpY2F0aW9uKHRoaXMsIG51bGwpO1xuICAgICAgdmFyIGRpYWxvZzIgPSBkaWFsb2dEaXYodGhpcywgdGVtcGxhdGUsIG9wdGlvbnMgJiYgb3B0aW9ucy5ib3R0b20pO1xuICAgICAgdmFyIGJ1dHRvbnMgPSBkaWFsb2cyLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYnV0dG9uXCIpO1xuICAgICAgdmFyIGNsb3NlZCA9IGZhbHNlLCBtZSA9IHRoaXMsIGJsdXJyaW5nID0gMTtcbiAgICAgIGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICBpZiAoY2xvc2VkKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgQ29kZU1pcnJvci5ybUNsYXNzKGRpYWxvZzIucGFyZW50Tm9kZSwgXCJkaWFsb2ctb3BlbmVkXCIpO1xuICAgICAgICBkaWFsb2cyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGlhbG9nMik7XG4gICAgICAgIG1lLmZvY3VzKCk7XG4gICAgICB9XG4gICAgICBfX25hbWUoY2xvc2UsIFwiY2xvc2VcIik7XG4gICAgICBidXR0b25zWzBdLmZvY3VzKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1dHRvbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGIgPSBidXR0b25zW2ldO1xuICAgICAgICAoZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICBDb2RlTWlycm9yLm9uKGIsIFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgQ29kZU1pcnJvci5lX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaylcbiAgICAgICAgICAgICAgY2FsbGJhY2sobWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KShjYWxsYmFja3NbaV0pO1xuICAgICAgICBDb2RlTWlycm9yLm9uKGIsIFwiYmx1clwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAtLWJsdXJyaW5nO1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoYmx1cnJpbmcgPD0gMClcbiAgICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICB9LCAyMDApO1xuICAgICAgICB9KTtcbiAgICAgICAgQ29kZU1pcnJvci5vbihiLCBcImZvY3VzXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICsrYmx1cnJpbmc7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKFwib3Blbk5vdGlmaWNhdGlvblwiLCBmdW5jdGlvbih0ZW1wbGF0ZSwgb3B0aW9ucykge1xuICAgICAgY2xvc2VOb3RpZmljYXRpb24odGhpcywgY2xvc2UpO1xuICAgICAgdmFyIGRpYWxvZzIgPSBkaWFsb2dEaXYodGhpcywgdGVtcGxhdGUsIG9wdGlvbnMgJiYgb3B0aW9ucy5ib3R0b20pO1xuICAgICAgdmFyIGNsb3NlZCA9IGZhbHNlLCBkb25lVGltZXI7XG4gICAgICB2YXIgZHVyYXRpb24gPSBvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLmR1cmF0aW9uICE9PSBcInVuZGVmaW5lZFwiID8gb3B0aW9ucy5kdXJhdGlvbiA6IDVlMztcbiAgICAgIGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICBpZiAoY2xvc2VkKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGRvbmVUaW1lcik7XG4gICAgICAgIENvZGVNaXJyb3Iucm1DbGFzcyhkaWFsb2cyLnBhcmVudE5vZGUsIFwiZGlhbG9nLW9wZW5lZFwiKTtcbiAgICAgICAgZGlhbG9nMi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRpYWxvZzIpO1xuICAgICAgfVxuICAgICAgX19uYW1lKGNsb3NlLCBcImNsb3NlXCIpO1xuICAgICAgQ29kZU1pcnJvci5vbihkaWFsb2cyLCBcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgQ29kZU1pcnJvci5lX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICBjbG9zZSgpO1xuICAgICAgfSk7XG4gICAgICBpZiAoZHVyYXRpb24pXG4gICAgICAgIGRvbmVUaW1lciA9IHNldFRpbWVvdXQoY2xvc2UsIGR1cmF0aW9uKTtcbiAgICAgIHJldHVybiBjbG9zZTtcbiAgICB9KTtcbiAgfSk7XG59KSgpO1xudmFyIGRpYWxvZyA9IGRpYWxvZyQyLmV4cG9ydHM7XG52YXIgZGlhbG9nJDEgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmZyZWV6ZSgvKiBAX19QVVJFX18gKi8gX21lcmdlTmFtZXNwYWNlcyh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgW1N5bWJvbC50b1N0cmluZ1RhZ106IFwiTW9kdWxlXCIsXG4gIFwiZGVmYXVsdFwiOiBkaWFsb2dcbn0sIFtkaWFsb2ckMi5leHBvcnRzXSkpO1xuZXhwb3J0IHsgZGlhbG9nJDIgYXMgYSwgZGlhbG9nJDEgYXMgZCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///19744\n')},32573:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "s": () => (/* binding */ search$1)\n/* harmony export */ });\n/* harmony import */ var _codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97480);\n/* harmony import */ var _searchcursor_es_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(26105);\n/* harmony import */ var _dialog_es_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19744);\nvar __defProp = Object.defineProperty;\nvar __name = (target, value) => __defProp(target, "name", { value, configurable: true });\n\n\n\nfunction _mergeNamespaces(n, m) {\n  m.forEach(function(e) {\n    e && typeof e !== "string" && !Array.isArray(e) && Object.keys(e).forEach(function(k) {\n      if (k !== "default" && !(k in n)) {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function() {\n            return e[k];\n          }\n        });\n      }\n    });\n  });\n  return Object.freeze(n);\n}\n__name(_mergeNamespaces, "_mergeNamespaces");\nvar search$2 = { exports: {} };\n(function(module, exports) {\n  (function(mod) {\n    mod(_codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__.a.exports, _searchcursor_es_js__WEBPACK_IMPORTED_MODULE_1__.a.exports, _dialog_es_js__WEBPACK_IMPORTED_MODULE_2__.a.exports);\n  })(function(CodeMirror) {\n    CodeMirror.defineOption("search", { bottom: false });\n    function searchOverlay(query, caseInsensitive) {\n      if (typeof query == "string")\n        query = new RegExp(query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, "\\\\$&"), caseInsensitive ? "gi" : "g");\n      else if (!query.global)\n        query = new RegExp(query.source, query.ignoreCase ? "gi" : "g");\n      return { token: function(stream) {\n        query.lastIndex = stream.pos;\n        var match = query.exec(stream.string);\n        if (match && match.index == stream.pos) {\n          stream.pos += match[0].length || 1;\n          return "searching";\n        } else if (match) {\n          stream.pos = match.index;\n        } else {\n          stream.skipToEnd();\n        }\n      } };\n    }\n    __name(searchOverlay, "searchOverlay");\n    function SearchState() {\n      this.posFrom = this.posTo = this.lastQuery = this.query = null;\n      this.overlay = null;\n    }\n    __name(SearchState, "SearchState");\n    function getSearchState(cm) {\n      return cm.state.search || (cm.state.search = new SearchState());\n    }\n    __name(getSearchState, "getSearchState");\n    function queryCaseInsensitive(query) {\n      return typeof query == "string" && query == query.toLowerCase();\n    }\n    __name(queryCaseInsensitive, "queryCaseInsensitive");\n    function getSearchCursor(cm, query, pos) {\n      return cm.getSearchCursor(query, pos, { caseFold: queryCaseInsensitive(query), multiline: true });\n    }\n    __name(getSearchCursor, "getSearchCursor");\n    function persistentDialog(cm, text, deflt, onEnter, onKeyDown) {\n      cm.openDialog(text, onEnter, {\n        value: deflt,\n        selectValueOnOpen: true,\n        closeOnEnter: false,\n        onClose: function() {\n          clearSearch(cm);\n        },\n        onKeyDown,\n        bottom: cm.options.search.bottom\n      });\n    }\n    __name(persistentDialog, "persistentDialog");\n    function dialog2(cm, text, shortText, deflt, f) {\n      if (cm.openDialog)\n        cm.openDialog(text, f, { value: deflt, selectValueOnOpen: true, bottom: cm.options.search.bottom });\n      else\n        f(prompt(shortText, deflt));\n    }\n    __name(dialog2, "dialog");\n    function confirmDialog(cm, text, shortText, fs) {\n      if (cm.openConfirm)\n        cm.openConfirm(text, fs);\n      else if (confirm(shortText))\n        fs[0]();\n    }\n    __name(confirmDialog, "confirmDialog");\n    function parseString(string) {\n      return string.replace(/\\\\([nrt\\\\])/g, function(match, ch) {\n        if (ch == "n")\n          return "\\n";\n        if (ch == "r")\n          return "\\r";\n        if (ch == "t")\n          return "\t";\n        if (ch == "\\\\")\n          return "\\\\";\n        return match;\n      });\n    }\n    __name(parseString, "parseString");\n    function parseQuery(query) {\n      var isRE = query.match(/^\\/(.*)\\/([a-z]*)$/);\n      if (isRE) {\n        try {\n          query = new RegExp(isRE[1], isRE[2].indexOf("i") == -1 ? "" : "i");\n        } catch (e) {\n        }\n      } else {\n        query = parseString(query);\n      }\n      if (typeof query == "string" ? query == "" : query.test(""))\n        query = /x^/;\n      return query;\n    }\n    __name(parseQuery, "parseQuery");\n    function startSearch(cm, state, query) {\n      state.queryText = query;\n      state.query = parseQuery(query);\n      cm.removeOverlay(state.overlay, queryCaseInsensitive(state.query));\n      state.overlay = searchOverlay(state.query, queryCaseInsensitive(state.query));\n      cm.addOverlay(state.overlay);\n      if (cm.showMatchesOnScrollbar) {\n        if (state.annotate) {\n          state.annotate.clear();\n          state.annotate = null;\n        }\n        state.annotate = cm.showMatchesOnScrollbar(state.query, queryCaseInsensitive(state.query));\n      }\n    }\n    __name(startSearch, "startSearch");\n    function doSearch(cm, rev, persistent, immediate) {\n      var state = getSearchState(cm);\n      if (state.query)\n        return findNext(cm, rev);\n      var q = cm.getSelection() || state.lastQuery;\n      if (q instanceof RegExp && q.source == "x^")\n        q = null;\n      if (persistent && cm.openDialog) {\n        var hiding = null;\n        var searchNext = /* @__PURE__ */ __name(function(query, event) {\n          CodeMirror.e_stop(event);\n          if (!query)\n            return;\n          if (query != state.queryText) {\n            startSearch(cm, state, query);\n            state.posFrom = state.posTo = cm.getCursor();\n          }\n          if (hiding)\n            hiding.style.opacity = 1;\n          findNext(cm, event.shiftKey, function(_, to) {\n            var dialog3;\n            if (to.line < 3 && document.querySelector && (dialog3 = cm.display.wrapper.querySelector(".CodeMirror-dialog")) && dialog3.getBoundingClientRect().bottom - 4 > cm.cursorCoords(to, "window").top)\n              (hiding = dialog3).style.opacity = 0.4;\n          });\n        }, "searchNext");\n        persistentDialog(cm, getQueryDialog(cm), q, searchNext, function(event, query) {\n          var keyName = CodeMirror.keyName(event);\n          var extra = cm.getOption("extraKeys"), cmd = extra && extra[keyName] || CodeMirror.keyMap[cm.getOption("keyMap")][keyName];\n          if (cmd == "findNext" || cmd == "findPrev" || cmd == "findPersistentNext" || cmd == "findPersistentPrev") {\n            CodeMirror.e_stop(event);\n            startSearch(cm, getSearchState(cm), query);\n            cm.execCommand(cmd);\n          } else if (cmd == "find" || cmd == "findPersistent") {\n            CodeMirror.e_stop(event);\n            searchNext(query, event);\n          }\n        });\n        if (immediate && q) {\n          startSearch(cm, state, q);\n          findNext(cm, rev);\n        }\n      } else {\n        dialog2(cm, getQueryDialog(cm), "Search for:", q, function(query) {\n          if (query && !state.query)\n            cm.operation(function() {\n              startSearch(cm, state, query);\n              state.posFrom = state.posTo = cm.getCursor();\n              findNext(cm, rev);\n            });\n        });\n      }\n    }\n    __name(doSearch, "doSearch");\n    function findNext(cm, rev, callback) {\n      cm.operation(function() {\n        var state = getSearchState(cm);\n        var cursor = getSearchCursor(cm, state.query, rev ? state.posFrom : state.posTo);\n        if (!cursor.find(rev)) {\n          cursor = getSearchCursor(cm, state.query, rev ? CodeMirror.Pos(cm.lastLine()) : CodeMirror.Pos(cm.firstLine(), 0));\n          if (!cursor.find(rev))\n            return;\n        }\n        cm.setSelection(cursor.from(), cursor.to());\n        cm.scrollIntoView({ from: cursor.from(), to: cursor.to() }, 20);\n        state.posFrom = cursor.from();\n        state.posTo = cursor.to();\n        if (callback)\n          callback(cursor.from(), cursor.to());\n      });\n    }\n    __name(findNext, "findNext");\n    function clearSearch(cm) {\n      cm.operation(function() {\n        var state = getSearchState(cm);\n        state.lastQuery = state.query;\n        if (!state.query)\n          return;\n        state.query = state.queryText = null;\n        cm.removeOverlay(state.overlay);\n        if (state.annotate) {\n          state.annotate.clear();\n          state.annotate = null;\n        }\n      });\n    }\n    __name(clearSearch, "clearSearch");\n    function el(tag, attrs) {\n      var element = tag ? document.createElement(tag) : document.createDocumentFragment();\n      for (var key in attrs) {\n        element[key] = attrs[key];\n      }\n      for (var i = 2; i < arguments.length; i++) {\n        var child = arguments[i];\n        element.appendChild(typeof child == "string" ? document.createTextNode(child) : child);\n      }\n      return element;\n    }\n    __name(el, "el");\n    function getQueryDialog(cm) {\n      return el("", null, el("span", { className: "CodeMirror-search-label" }, cm.phrase("Search:")), " ", el("input", { type: "text", "style": "width: 10em", className: "CodeMirror-search-field" }), " ", el("span", { style: "color: #888", className: "CodeMirror-search-hint" }, cm.phrase("(Use /re/ syntax for regexp search)")));\n    }\n    __name(getQueryDialog, "getQueryDialog");\n    function getReplaceQueryDialog(cm) {\n      return el("", null, " ", el("input", { type: "text", "style": "width: 10em", className: "CodeMirror-search-field" }), " ", el("span", { style: "color: #888", className: "CodeMirror-search-hint" }, cm.phrase("(Use /re/ syntax for regexp search)")));\n    }\n    __name(getReplaceQueryDialog, "getReplaceQueryDialog");\n    function getReplacementQueryDialog(cm) {\n      return el("", null, el("span", { className: "CodeMirror-search-label" }, cm.phrase("With:")), " ", el("input", { type: "text", "style": "width: 10em", className: "CodeMirror-search-field" }));\n    }\n    __name(getReplacementQueryDialog, "getReplacementQueryDialog");\n    function getDoReplaceConfirm(cm) {\n      return el("", null, el("span", { className: "CodeMirror-search-label" }, cm.phrase("Replace?")), " ", el("button", {}, cm.phrase("Yes")), " ", el("button", {}, cm.phrase("No")), " ", el("button", {}, cm.phrase("All")), " ", el("button", {}, cm.phrase("Stop")));\n    }\n    __name(getDoReplaceConfirm, "getDoReplaceConfirm");\n    function replaceAll(cm, query, text) {\n      cm.operation(function() {\n        for (var cursor = getSearchCursor(cm, query); cursor.findNext(); ) {\n          if (typeof query != "string") {\n            var match = cm.getRange(cursor.from(), cursor.to()).match(query);\n            cursor.replace(text.replace(/\\$(\\d)/g, function(_, i) {\n              return match[i];\n            }));\n          } else\n            cursor.replace(text);\n        }\n      });\n    }\n    __name(replaceAll, "replaceAll");\n    function replace(cm, all) {\n      if (cm.getOption("readOnly"))\n        return;\n      var query = cm.getSelection() || getSearchState(cm).lastQuery;\n      var dialogText = all ? cm.phrase("Replace all:") : cm.phrase("Replace:");\n      var fragment = el("", null, el("span", { className: "CodeMirror-search-label" }, dialogText), getReplaceQueryDialog(cm));\n      dialog2(cm, fragment, dialogText, query, function(query2) {\n        if (!query2)\n          return;\n        query2 = parseQuery(query2);\n        dialog2(cm, getReplacementQueryDialog(cm), cm.phrase("Replace with:"), "", function(text) {\n          text = parseString(text);\n          if (all) {\n            replaceAll(cm, query2, text);\n          } else {\n            clearSearch(cm);\n            var cursor = getSearchCursor(cm, query2, cm.getCursor("from"));\n            var advance = /* @__PURE__ */ __name(function() {\n              var start = cursor.from(), match;\n              if (!(match = cursor.findNext())) {\n                cursor = getSearchCursor(cm, query2);\n                if (!(match = cursor.findNext()) || start && cursor.from().line == start.line && cursor.from().ch == start.ch)\n                  return;\n              }\n              cm.setSelection(cursor.from(), cursor.to());\n              cm.scrollIntoView({ from: cursor.from(), to: cursor.to() });\n              confirmDialog(cm, getDoReplaceConfirm(cm), cm.phrase("Replace?"), [\n                function() {\n                  doReplace(match);\n                },\n                advance,\n                function() {\n                  replaceAll(cm, query2, text);\n                }\n              ]);\n            }, "advance");\n            var doReplace = /* @__PURE__ */ __name(function(match) {\n              cursor.replace(typeof query2 == "string" ? text : text.replace(/\\$(\\d)/g, function(_, i) {\n                return match[i];\n              }));\n              advance();\n            }, "doReplace");\n            advance();\n          }\n        });\n      });\n    }\n    __name(replace, "replace");\n    CodeMirror.commands.find = function(cm) {\n      clearSearch(cm);\n      doSearch(cm);\n    };\n    CodeMirror.commands.findPersistent = function(cm) {\n      clearSearch(cm);\n      doSearch(cm, false, true);\n    };\n    CodeMirror.commands.findPersistentNext = function(cm) {\n      doSearch(cm, false, true, true);\n    };\n    CodeMirror.commands.findPersistentPrev = function(cm) {\n      doSearch(cm, true, true, true);\n    };\n    CodeMirror.commands.findNext = doSearch;\n    CodeMirror.commands.findPrev = function(cm) {\n      doSearch(cm, true);\n    };\n    CodeMirror.commands.clearSearch = clearSearch;\n    CodeMirror.commands.replace = replace;\n    CodeMirror.commands.replaceAll = function(cm) {\n      replace(cm, true);\n    };\n  });\n})();\nvar search = search$2.exports;\nvar search$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ _mergeNamespaces({\n  __proto__: null,\n  [Symbol.toStringTag]: "Module",\n  "default": search\n}, [search$2.exports]));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msc0NBQXNDO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0NBQXNDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYWNoaXFsLWRlbW8vLi9ub2RlX21vZHVsZXMvQGdyYXBoaXFsL3JlYWN0L2Rpc3Qvc2VhcmNoLmVzLmpzPzE5MzEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX25hbWUgPSAodGFyZ2V0LCB2YWx1ZSkgPT4gX19kZWZQcm9wKHRhcmdldCwgXCJuYW1lXCIsIHsgdmFsdWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcbmltcG9ydCB7IGEgYXMgY29kZW1pcnJvciB9IGZyb20gXCIuL2NvZGVtaXJyb3IuZXMuanNcIjtcbmltcG9ydCB7IGEgYXMgc2VhcmNoY3Vyc29yIH0gZnJvbSBcIi4vc2VhcmNoY3Vyc29yLmVzLmpzXCI7XG5pbXBvcnQgeyBhIGFzIGRpYWxvZyB9IGZyb20gXCIuL2RpYWxvZy5lcy5qc1wiO1xuZnVuY3Rpb24gX21lcmdlTmFtZXNwYWNlcyhuLCBtKSB7XG4gIG0uZm9yRWFjaChmdW5jdGlvbihlKSB7XG4gICAgZSAmJiB0eXBlb2YgZSAhPT0gXCJzdHJpbmdcIiAmJiAhQXJyYXkuaXNBcnJheShlKSAmJiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKGspIHtcbiAgICAgIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiAhKGsgaW4gbikpIHtcbiAgICAgICAgdmFyIGQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIGspO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobiwgaywgZC5nZXQgPyBkIDoge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBlW2tdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gT2JqZWN0LmZyZWV6ZShuKTtcbn1cbl9fbmFtZShfbWVyZ2VOYW1lc3BhY2VzLCBcIl9tZXJnZU5hbWVzcGFjZXNcIik7XG52YXIgc2VhcmNoJDIgPSB7IGV4cG9ydHM6IHt9IH07XG4oZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG4gIChmdW5jdGlvbihtb2QpIHtcbiAgICBtb2QoY29kZW1pcnJvci5leHBvcnRzLCBzZWFyY2hjdXJzb3IuZXhwb3J0cywgZGlhbG9nLmV4cG9ydHMpO1xuICB9KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG4gICAgQ29kZU1pcnJvci5kZWZpbmVPcHRpb24oXCJzZWFyY2hcIiwgeyBib3R0b206IGZhbHNlIH0pO1xuICAgIGZ1bmN0aW9uIHNlYXJjaE92ZXJsYXkocXVlcnksIGNhc2VJbnNlbnNpdGl2ZSkge1xuICAgICAgaWYgKHR5cGVvZiBxdWVyeSA9PSBcInN0cmluZ1wiKVxuICAgICAgICBxdWVyeSA9IG5ldyBSZWdFeHAocXVlcnkucmVwbGFjZSgvW1xcLVxcW1xcXVxcL1xce1xcfVxcKFxcKVxcKlxcK1xcP1xcLlxcXFxcXF5cXCRcXHxdL2csIFwiXFxcXCQmXCIpLCBjYXNlSW5zZW5zaXRpdmUgPyBcImdpXCIgOiBcImdcIik7XG4gICAgICBlbHNlIGlmICghcXVlcnkuZ2xvYmFsKVxuICAgICAgICBxdWVyeSA9IG5ldyBSZWdFeHAocXVlcnkuc291cmNlLCBxdWVyeS5pZ25vcmVDYXNlID8gXCJnaVwiIDogXCJnXCIpO1xuICAgICAgcmV0dXJuIHsgdG9rZW46IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICBxdWVyeS5sYXN0SW5kZXggPSBzdHJlYW0ucG9zO1xuICAgICAgICB2YXIgbWF0Y2ggPSBxdWVyeS5leGVjKHN0cmVhbS5zdHJpbmcpO1xuICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2guaW5kZXggPT0gc3RyZWFtLnBvcykge1xuICAgICAgICAgIHN0cmVhbS5wb3MgKz0gbWF0Y2hbMF0ubGVuZ3RoIHx8IDE7XG4gICAgICAgICAgcmV0dXJuIFwic2VhcmNoaW5nXCI7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBzdHJlYW0ucG9zID0gbWF0Y2guaW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyZWFtLnNraXBUb0VuZCgpO1xuICAgICAgICB9XG4gICAgICB9IH07XG4gICAgfVxuICAgIF9fbmFtZShzZWFyY2hPdmVybGF5LCBcInNlYXJjaE92ZXJsYXlcIik7XG4gICAgZnVuY3Rpb24gU2VhcmNoU3RhdGUoKSB7XG4gICAgICB0aGlzLnBvc0Zyb20gPSB0aGlzLnBvc1RvID0gdGhpcy5sYXN0UXVlcnkgPSB0aGlzLnF1ZXJ5ID0gbnVsbDtcbiAgICAgIHRoaXMub3ZlcmxheSA9IG51bGw7XG4gICAgfVxuICAgIF9fbmFtZShTZWFyY2hTdGF0ZSwgXCJTZWFyY2hTdGF0ZVwiKTtcbiAgICBmdW5jdGlvbiBnZXRTZWFyY2hTdGF0ZShjbSkge1xuICAgICAgcmV0dXJuIGNtLnN0YXRlLnNlYXJjaCB8fCAoY20uc3RhdGUuc2VhcmNoID0gbmV3IFNlYXJjaFN0YXRlKCkpO1xuICAgIH1cbiAgICBfX25hbWUoZ2V0U2VhcmNoU3RhdGUsIFwiZ2V0U2VhcmNoU3RhdGVcIik7XG4gICAgZnVuY3Rpb24gcXVlcnlDYXNlSW5zZW5zaXRpdmUocXVlcnkpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgcXVlcnkgPT0gXCJzdHJpbmdcIiAmJiBxdWVyeSA9PSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBfX25hbWUocXVlcnlDYXNlSW5zZW5zaXRpdmUsIFwicXVlcnlDYXNlSW5zZW5zaXRpdmVcIik7XG4gICAgZnVuY3Rpb24gZ2V0U2VhcmNoQ3Vyc29yKGNtLCBxdWVyeSwgcG9zKSB7XG4gICAgICByZXR1cm4gY20uZ2V0U2VhcmNoQ3Vyc29yKHF1ZXJ5LCBwb3MsIHsgY2FzZUZvbGQ6IHF1ZXJ5Q2FzZUluc2Vuc2l0aXZlKHF1ZXJ5KSwgbXVsdGlsaW5lOiB0cnVlIH0pO1xuICAgIH1cbiAgICBfX25hbWUoZ2V0U2VhcmNoQ3Vyc29yLCBcImdldFNlYXJjaEN1cnNvclwiKTtcbiAgICBmdW5jdGlvbiBwZXJzaXN0ZW50RGlhbG9nKGNtLCB0ZXh0LCBkZWZsdCwgb25FbnRlciwgb25LZXlEb3duKSB7XG4gICAgICBjbS5vcGVuRGlhbG9nKHRleHQsIG9uRW50ZXIsIHtcbiAgICAgICAgdmFsdWU6IGRlZmx0LFxuICAgICAgICBzZWxlY3RWYWx1ZU9uT3BlbjogdHJ1ZSxcbiAgICAgICAgY2xvc2VPbkVudGVyOiBmYWxzZSxcbiAgICAgICAgb25DbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2xlYXJTZWFyY2goY20pO1xuICAgICAgICB9LFxuICAgICAgICBvbktleURvd24sXG4gICAgICAgIGJvdHRvbTogY20ub3B0aW9ucy5zZWFyY2guYm90dG9tXG4gICAgICB9KTtcbiAgICB9XG4gICAgX19uYW1lKHBlcnNpc3RlbnREaWFsb2csIFwicGVyc2lzdGVudERpYWxvZ1wiKTtcbiAgICBmdW5jdGlvbiBkaWFsb2cyKGNtLCB0ZXh0LCBzaG9ydFRleHQsIGRlZmx0LCBmKSB7XG4gICAgICBpZiAoY20ub3BlbkRpYWxvZylcbiAgICAgICAgY20ub3BlbkRpYWxvZyh0ZXh0LCBmLCB7IHZhbHVlOiBkZWZsdCwgc2VsZWN0VmFsdWVPbk9wZW46IHRydWUsIGJvdHRvbTogY20ub3B0aW9ucy5zZWFyY2guYm90dG9tIH0pO1xuICAgICAgZWxzZVxuICAgICAgICBmKHByb21wdChzaG9ydFRleHQsIGRlZmx0KSk7XG4gICAgfVxuICAgIF9fbmFtZShkaWFsb2cyLCBcImRpYWxvZ1wiKTtcbiAgICBmdW5jdGlvbiBjb25maXJtRGlhbG9nKGNtLCB0ZXh0LCBzaG9ydFRleHQsIGZzKSB7XG4gICAgICBpZiAoY20ub3BlbkNvbmZpcm0pXG4gICAgICAgIGNtLm9wZW5Db25maXJtKHRleHQsIGZzKTtcbiAgICAgIGVsc2UgaWYgKGNvbmZpcm0oc2hvcnRUZXh0KSlcbiAgICAgICAgZnNbMF0oKTtcbiAgICB9XG4gICAgX19uYW1lKGNvbmZpcm1EaWFsb2csIFwiY29uZmlybURpYWxvZ1wiKTtcbiAgICBmdW5jdGlvbiBwYXJzZVN0cmluZyhzdHJpbmcpIHtcbiAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxcXChbbnJ0XFxcXF0pL2csIGZ1bmN0aW9uKG1hdGNoLCBjaCkge1xuICAgICAgICBpZiAoY2ggPT0gXCJuXCIpXG4gICAgICAgICAgcmV0dXJuIFwiXFxuXCI7XG4gICAgICAgIGlmIChjaCA9PSBcInJcIilcbiAgICAgICAgICByZXR1cm4gXCJcXHJcIjtcbiAgICAgICAgaWYgKGNoID09IFwidFwiKVxuICAgICAgICAgIHJldHVybiBcIlx0XCI7XG4gICAgICAgIGlmIChjaCA9PSBcIlxcXFxcIilcbiAgICAgICAgICByZXR1cm4gXCJcXFxcXCI7XG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBfX25hbWUocGFyc2VTdHJpbmcsIFwicGFyc2VTdHJpbmdcIik7XG4gICAgZnVuY3Rpb24gcGFyc2VRdWVyeShxdWVyeSkge1xuICAgICAgdmFyIGlzUkUgPSBxdWVyeS5tYXRjaCgvXlxcLyguKilcXC8oW2Etel0qKSQvKTtcbiAgICAgIGlmIChpc1JFKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcXVlcnkgPSBuZXcgUmVnRXhwKGlzUkVbMV0sIGlzUkVbMl0uaW5kZXhPZihcImlcIikgPT0gLTEgPyBcIlwiIDogXCJpXCIpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXJ5ID0gcGFyc2VTdHJpbmcocXVlcnkpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBxdWVyeSA9PSBcInN0cmluZ1wiID8gcXVlcnkgPT0gXCJcIiA6IHF1ZXJ5LnRlc3QoXCJcIikpXG4gICAgICAgIHF1ZXJ5ID0gL3heLztcbiAgICAgIHJldHVybiBxdWVyeTtcbiAgICB9XG4gICAgX19uYW1lKHBhcnNlUXVlcnksIFwicGFyc2VRdWVyeVwiKTtcbiAgICBmdW5jdGlvbiBzdGFydFNlYXJjaChjbSwgc3RhdGUsIHF1ZXJ5KSB7XG4gICAgICBzdGF0ZS5xdWVyeVRleHQgPSBxdWVyeTtcbiAgICAgIHN0YXRlLnF1ZXJ5ID0gcGFyc2VRdWVyeShxdWVyeSk7XG4gICAgICBjbS5yZW1vdmVPdmVybGF5KHN0YXRlLm92ZXJsYXksIHF1ZXJ5Q2FzZUluc2Vuc2l0aXZlKHN0YXRlLnF1ZXJ5KSk7XG4gICAgICBzdGF0ZS5vdmVybGF5ID0gc2VhcmNoT3ZlcmxheShzdGF0ZS5xdWVyeSwgcXVlcnlDYXNlSW5zZW5zaXRpdmUoc3RhdGUucXVlcnkpKTtcbiAgICAgIGNtLmFkZE92ZXJsYXkoc3RhdGUub3ZlcmxheSk7XG4gICAgICBpZiAoY20uc2hvd01hdGNoZXNPblNjcm9sbGJhcikge1xuICAgICAgICBpZiAoc3RhdGUuYW5ub3RhdGUpIHtcbiAgICAgICAgICBzdGF0ZS5hbm5vdGF0ZS5jbGVhcigpO1xuICAgICAgICAgIHN0YXRlLmFubm90YXRlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5hbm5vdGF0ZSA9IGNtLnNob3dNYXRjaGVzT25TY3JvbGxiYXIoc3RhdGUucXVlcnksIHF1ZXJ5Q2FzZUluc2Vuc2l0aXZlKHN0YXRlLnF1ZXJ5KSk7XG4gICAgICB9XG4gICAgfVxuICAgIF9fbmFtZShzdGFydFNlYXJjaCwgXCJzdGFydFNlYXJjaFwiKTtcbiAgICBmdW5jdGlvbiBkb1NlYXJjaChjbSwgcmV2LCBwZXJzaXN0ZW50LCBpbW1lZGlhdGUpIHtcbiAgICAgIHZhciBzdGF0ZSA9IGdldFNlYXJjaFN0YXRlKGNtKTtcbiAgICAgIGlmIChzdGF0ZS5xdWVyeSlcbiAgICAgICAgcmV0dXJuIGZpbmROZXh0KGNtLCByZXYpO1xuICAgICAgdmFyIHEgPSBjbS5nZXRTZWxlY3Rpb24oKSB8fCBzdGF0ZS5sYXN0UXVlcnk7XG4gICAgICBpZiAocSBpbnN0YW5jZW9mIFJlZ0V4cCAmJiBxLnNvdXJjZSA9PSBcInheXCIpXG4gICAgICAgIHEgPSBudWxsO1xuICAgICAgaWYgKHBlcnNpc3RlbnQgJiYgY20ub3BlbkRpYWxvZykge1xuICAgICAgICB2YXIgaGlkaW5nID0gbnVsbDtcbiAgICAgICAgdmFyIHNlYXJjaE5leHQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKHF1ZXJ5LCBldmVudCkge1xuICAgICAgICAgIENvZGVNaXJyb3IuZV9zdG9wKGV2ZW50KTtcbiAgICAgICAgICBpZiAoIXF1ZXJ5KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIGlmIChxdWVyeSAhPSBzdGF0ZS5xdWVyeVRleHQpIHtcbiAgICAgICAgICAgIHN0YXJ0U2VhcmNoKGNtLCBzdGF0ZSwgcXVlcnkpO1xuICAgICAgICAgICAgc3RhdGUucG9zRnJvbSA9IHN0YXRlLnBvc1RvID0gY20uZ2V0Q3Vyc29yKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChoaWRpbmcpXG4gICAgICAgICAgICBoaWRpbmcuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgICAgZmluZE5leHQoY20sIGV2ZW50LnNoaWZ0S2V5LCBmdW5jdGlvbihfLCB0bykge1xuICAgICAgICAgICAgdmFyIGRpYWxvZzM7XG4gICAgICAgICAgICBpZiAodG8ubGluZSA8IDMgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvciAmJiAoZGlhbG9nMyA9IGNtLmRpc3BsYXkud3JhcHBlci5xdWVyeVNlbGVjdG9yKFwiLkNvZGVNaXJyb3ItZGlhbG9nXCIpKSAmJiBkaWFsb2czLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSAtIDQgPiBjbS5jdXJzb3JDb29yZHModG8sIFwid2luZG93XCIpLnRvcClcbiAgICAgICAgICAgICAgKGhpZGluZyA9IGRpYWxvZzMpLnN0eWxlLm9wYWNpdHkgPSAwLjQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIFwic2VhcmNoTmV4dFwiKTtcbiAgICAgICAgcGVyc2lzdGVudERpYWxvZyhjbSwgZ2V0UXVlcnlEaWFsb2coY20pLCBxLCBzZWFyY2hOZXh0LCBmdW5jdGlvbihldmVudCwgcXVlcnkpIHtcbiAgICAgICAgICB2YXIga2V5TmFtZSA9IENvZGVNaXJyb3Iua2V5TmFtZShldmVudCk7XG4gICAgICAgICAgdmFyIGV4dHJhID0gY20uZ2V0T3B0aW9uKFwiZXh0cmFLZXlzXCIpLCBjbWQgPSBleHRyYSAmJiBleHRyYVtrZXlOYW1lXSB8fCBDb2RlTWlycm9yLmtleU1hcFtjbS5nZXRPcHRpb24oXCJrZXlNYXBcIildW2tleU5hbWVdO1xuICAgICAgICAgIGlmIChjbWQgPT0gXCJmaW5kTmV4dFwiIHx8IGNtZCA9PSBcImZpbmRQcmV2XCIgfHwgY21kID09IFwiZmluZFBlcnNpc3RlbnROZXh0XCIgfHwgY21kID09IFwiZmluZFBlcnNpc3RlbnRQcmV2XCIpIHtcbiAgICAgICAgICAgIENvZGVNaXJyb3IuZV9zdG9wKGV2ZW50KTtcbiAgICAgICAgICAgIHN0YXJ0U2VhcmNoKGNtLCBnZXRTZWFyY2hTdGF0ZShjbSksIHF1ZXJ5KTtcbiAgICAgICAgICAgIGNtLmV4ZWNDb21tYW5kKGNtZCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjbWQgPT0gXCJmaW5kXCIgfHwgY21kID09IFwiZmluZFBlcnNpc3RlbnRcIikge1xuICAgICAgICAgICAgQ29kZU1pcnJvci5lX3N0b3AoZXZlbnQpO1xuICAgICAgICAgICAgc2VhcmNoTmV4dChxdWVyeSwgZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpbW1lZGlhdGUgJiYgcSkge1xuICAgICAgICAgIHN0YXJ0U2VhcmNoKGNtLCBzdGF0ZSwgcSk7XG4gICAgICAgICAgZmluZE5leHQoY20sIHJldik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpYWxvZzIoY20sIGdldFF1ZXJ5RGlhbG9nKGNtKSwgXCJTZWFyY2ggZm9yOlwiLCBxLCBmdW5jdGlvbihxdWVyeSkge1xuICAgICAgICAgIGlmIChxdWVyeSAmJiAhc3RhdGUucXVlcnkpXG4gICAgICAgICAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHN0YXJ0U2VhcmNoKGNtLCBzdGF0ZSwgcXVlcnkpO1xuICAgICAgICAgICAgICBzdGF0ZS5wb3NGcm9tID0gc3RhdGUucG9zVG8gPSBjbS5nZXRDdXJzb3IoKTtcbiAgICAgICAgICAgICAgZmluZE5leHQoY20sIHJldik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIF9fbmFtZShkb1NlYXJjaCwgXCJkb1NlYXJjaFwiKTtcbiAgICBmdW5jdGlvbiBmaW5kTmV4dChjbSwgcmV2LCBjYWxsYmFjaykge1xuICAgICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3RhdGUgPSBnZXRTZWFyY2hTdGF0ZShjbSk7XG4gICAgICAgIHZhciBjdXJzb3IgPSBnZXRTZWFyY2hDdXJzb3IoY20sIHN0YXRlLnF1ZXJ5LCByZXYgPyBzdGF0ZS5wb3NGcm9tIDogc3RhdGUucG9zVG8pO1xuICAgICAgICBpZiAoIWN1cnNvci5maW5kKHJldikpIHtcbiAgICAgICAgICBjdXJzb3IgPSBnZXRTZWFyY2hDdXJzb3IoY20sIHN0YXRlLnF1ZXJ5LCByZXYgPyBDb2RlTWlycm9yLlBvcyhjbS5sYXN0TGluZSgpKSA6IENvZGVNaXJyb3IuUG9zKGNtLmZpcnN0TGluZSgpLCAwKSk7XG4gICAgICAgICAgaWYgKCFjdXJzb3IuZmluZChyZXYpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNtLnNldFNlbGVjdGlvbihjdXJzb3IuZnJvbSgpLCBjdXJzb3IudG8oKSk7XG4gICAgICAgIGNtLnNjcm9sbEludG9WaWV3KHsgZnJvbTogY3Vyc29yLmZyb20oKSwgdG86IGN1cnNvci50bygpIH0sIDIwKTtcbiAgICAgICAgc3RhdGUucG9zRnJvbSA9IGN1cnNvci5mcm9tKCk7XG4gICAgICAgIHN0YXRlLnBvc1RvID0gY3Vyc29yLnRvKCk7XG4gICAgICAgIGlmIChjYWxsYmFjaylcbiAgICAgICAgICBjYWxsYmFjayhjdXJzb3IuZnJvbSgpLCBjdXJzb3IudG8oKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgX19uYW1lKGZpbmROZXh0LCBcImZpbmROZXh0XCIpO1xuICAgIGZ1bmN0aW9uIGNsZWFyU2VhcmNoKGNtKSB7XG4gICAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IGdldFNlYXJjaFN0YXRlKGNtKTtcbiAgICAgICAgc3RhdGUubGFzdFF1ZXJ5ID0gc3RhdGUucXVlcnk7XG4gICAgICAgIGlmICghc3RhdGUucXVlcnkpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzdGF0ZS5xdWVyeSA9IHN0YXRlLnF1ZXJ5VGV4dCA9IG51bGw7XG4gICAgICAgIGNtLnJlbW92ZU92ZXJsYXkoc3RhdGUub3ZlcmxheSk7XG4gICAgICAgIGlmIChzdGF0ZS5hbm5vdGF0ZSkge1xuICAgICAgICAgIHN0YXRlLmFubm90YXRlLmNsZWFyKCk7XG4gICAgICAgICAgc3RhdGUuYW5ub3RhdGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgX19uYW1lKGNsZWFyU2VhcmNoLCBcImNsZWFyU2VhcmNoXCIpO1xuICAgIGZ1bmN0aW9uIGVsKHRhZywgYXR0cnMpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gdGFnID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpIDogZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgZm9yICh2YXIga2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGVsZW1lbnRba2V5XSA9IGF0dHJzW2tleV07XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY2hpbGQgPSBhcmd1bWVudHNbaV07XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodHlwZW9mIGNoaWxkID09IFwic3RyaW5nXCIgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjaGlsZCkgOiBjaGlsZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gICAgX19uYW1lKGVsLCBcImVsXCIpO1xuICAgIGZ1bmN0aW9uIGdldFF1ZXJ5RGlhbG9nKGNtKSB7XG4gICAgICByZXR1cm4gZWwoXCJcIiwgbnVsbCwgZWwoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcIkNvZGVNaXJyb3Itc2VhcmNoLWxhYmVsXCIgfSwgY20ucGhyYXNlKFwiU2VhcmNoOlwiKSksIFwiIFwiLCBlbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIFwic3R5bGVcIjogXCJ3aWR0aDogMTBlbVwiLCBjbGFzc05hbWU6IFwiQ29kZU1pcnJvci1zZWFyY2gtZmllbGRcIiB9KSwgXCIgXCIsIGVsKFwic3BhblwiLCB7IHN0eWxlOiBcImNvbG9yOiAjODg4XCIsIGNsYXNzTmFtZTogXCJDb2RlTWlycm9yLXNlYXJjaC1oaW50XCIgfSwgY20ucGhyYXNlKFwiKFVzZSAvcmUvIHN5bnRheCBmb3IgcmVnZXhwIHNlYXJjaClcIikpKTtcbiAgICB9XG4gICAgX19uYW1lKGdldFF1ZXJ5RGlhbG9nLCBcImdldFF1ZXJ5RGlhbG9nXCIpO1xuICAgIGZ1bmN0aW9uIGdldFJlcGxhY2VRdWVyeURpYWxvZyhjbSkge1xuICAgICAgcmV0dXJuIGVsKFwiXCIsIG51bGwsIFwiIFwiLCBlbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIFwic3R5bGVcIjogXCJ3aWR0aDogMTBlbVwiLCBjbGFzc05hbWU6IFwiQ29kZU1pcnJvci1zZWFyY2gtZmllbGRcIiB9KSwgXCIgXCIsIGVsKFwic3BhblwiLCB7IHN0eWxlOiBcImNvbG9yOiAjODg4XCIsIGNsYXNzTmFtZTogXCJDb2RlTWlycm9yLXNlYXJjaC1oaW50XCIgfSwgY20ucGhyYXNlKFwiKFVzZSAvcmUvIHN5bnRheCBmb3IgcmVnZXhwIHNlYXJjaClcIikpKTtcbiAgICB9XG4gICAgX19uYW1lKGdldFJlcGxhY2VRdWVyeURpYWxvZywgXCJnZXRSZXBsYWNlUXVlcnlEaWFsb2dcIik7XG4gICAgZnVuY3Rpb24gZ2V0UmVwbGFjZW1lbnRRdWVyeURpYWxvZyhjbSkge1xuICAgICAgcmV0dXJuIGVsKFwiXCIsIG51bGwsIGVsKFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJDb2RlTWlycm9yLXNlYXJjaC1sYWJlbFwiIH0sIGNtLnBocmFzZShcIldpdGg6XCIpKSwgXCIgXCIsIGVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgXCJzdHlsZVwiOiBcIndpZHRoOiAxMGVtXCIsIGNsYXNzTmFtZTogXCJDb2RlTWlycm9yLXNlYXJjaC1maWVsZFwiIH0pKTtcbiAgICB9XG4gICAgX19uYW1lKGdldFJlcGxhY2VtZW50UXVlcnlEaWFsb2csIFwiZ2V0UmVwbGFjZW1lbnRRdWVyeURpYWxvZ1wiKTtcbiAgICBmdW5jdGlvbiBnZXREb1JlcGxhY2VDb25maXJtKGNtKSB7XG4gICAgICByZXR1cm4gZWwoXCJcIiwgbnVsbCwgZWwoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcIkNvZGVNaXJyb3Itc2VhcmNoLWxhYmVsXCIgfSwgY20ucGhyYXNlKFwiUmVwbGFjZT9cIikpLCBcIiBcIiwgZWwoXCJidXR0b25cIiwge30sIGNtLnBocmFzZShcIlllc1wiKSksIFwiIFwiLCBlbChcImJ1dHRvblwiLCB7fSwgY20ucGhyYXNlKFwiTm9cIikpLCBcIiBcIiwgZWwoXCJidXR0b25cIiwge30sIGNtLnBocmFzZShcIkFsbFwiKSksIFwiIFwiLCBlbChcImJ1dHRvblwiLCB7fSwgY20ucGhyYXNlKFwiU3RvcFwiKSkpO1xuICAgIH1cbiAgICBfX25hbWUoZ2V0RG9SZXBsYWNlQ29uZmlybSwgXCJnZXREb1JlcGxhY2VDb25maXJtXCIpO1xuICAgIGZ1bmN0aW9uIHJlcGxhY2VBbGwoY20sIHF1ZXJ5LCB0ZXh0KSB7XG4gICAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGN1cnNvciA9IGdldFNlYXJjaEN1cnNvcihjbSwgcXVlcnkpOyBjdXJzb3IuZmluZE5leHQoKTsgKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBxdWVyeSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBjbS5nZXRSYW5nZShjdXJzb3IuZnJvbSgpLCBjdXJzb3IudG8oKSkubWF0Y2gocXVlcnkpO1xuICAgICAgICAgICAgY3Vyc29yLnJlcGxhY2UodGV4dC5yZXBsYWNlKC9cXCQoXFxkKS9nLCBmdW5jdGlvbihfLCBpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBtYXRjaFtpXTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGN1cnNvci5yZXBsYWNlKHRleHQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgX19uYW1lKHJlcGxhY2VBbGwsIFwicmVwbGFjZUFsbFwiKTtcbiAgICBmdW5jdGlvbiByZXBsYWNlKGNtLCBhbGwpIHtcbiAgICAgIGlmIChjbS5nZXRPcHRpb24oXCJyZWFkT25seVwiKSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgdmFyIHF1ZXJ5ID0gY20uZ2V0U2VsZWN0aW9uKCkgfHwgZ2V0U2VhcmNoU3RhdGUoY20pLmxhc3RRdWVyeTtcbiAgICAgIHZhciBkaWFsb2dUZXh0ID0gYWxsID8gY20ucGhyYXNlKFwiUmVwbGFjZSBhbGw6XCIpIDogY20ucGhyYXNlKFwiUmVwbGFjZTpcIik7XG4gICAgICB2YXIgZnJhZ21lbnQgPSBlbChcIlwiLCBudWxsLCBlbChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiQ29kZU1pcnJvci1zZWFyY2gtbGFiZWxcIiB9LCBkaWFsb2dUZXh0KSwgZ2V0UmVwbGFjZVF1ZXJ5RGlhbG9nKGNtKSk7XG4gICAgICBkaWFsb2cyKGNtLCBmcmFnbWVudCwgZGlhbG9nVGV4dCwgcXVlcnksIGZ1bmN0aW9uKHF1ZXJ5Mikge1xuICAgICAgICBpZiAoIXF1ZXJ5MilcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHF1ZXJ5MiA9IHBhcnNlUXVlcnkocXVlcnkyKTtcbiAgICAgICAgZGlhbG9nMihjbSwgZ2V0UmVwbGFjZW1lbnRRdWVyeURpYWxvZyhjbSksIGNtLnBocmFzZShcIlJlcGxhY2Ugd2l0aDpcIiksIFwiXCIsIGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgICAgICB0ZXh0ID0gcGFyc2VTdHJpbmcodGV4dCk7XG4gICAgICAgICAgaWYgKGFsbCkge1xuICAgICAgICAgICAgcmVwbGFjZUFsbChjbSwgcXVlcnkyLCB0ZXh0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xlYXJTZWFyY2goY20pO1xuICAgICAgICAgICAgdmFyIGN1cnNvciA9IGdldFNlYXJjaEN1cnNvcihjbSwgcXVlcnkyLCBjbS5nZXRDdXJzb3IoXCJmcm9tXCIpKTtcbiAgICAgICAgICAgIHZhciBhZHZhbmNlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gY3Vyc29yLmZyb20oKSwgbWF0Y2g7XG4gICAgICAgICAgICAgIGlmICghKG1hdGNoID0gY3Vyc29yLmZpbmROZXh0KCkpKSB7XG4gICAgICAgICAgICAgICAgY3Vyc29yID0gZ2V0U2VhcmNoQ3Vyc29yKGNtLCBxdWVyeTIpO1xuICAgICAgICAgICAgICAgIGlmICghKG1hdGNoID0gY3Vyc29yLmZpbmROZXh0KCkpIHx8IHN0YXJ0ICYmIGN1cnNvci5mcm9tKCkubGluZSA9PSBzdGFydC5saW5lICYmIGN1cnNvci5mcm9tKCkuY2ggPT0gc3RhcnQuY2gpXG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY20uc2V0U2VsZWN0aW9uKGN1cnNvci5mcm9tKCksIGN1cnNvci50bygpKTtcbiAgICAgICAgICAgICAgY20uc2Nyb2xsSW50b1ZpZXcoeyBmcm9tOiBjdXJzb3IuZnJvbSgpLCB0bzogY3Vyc29yLnRvKCkgfSk7XG4gICAgICAgICAgICAgIGNvbmZpcm1EaWFsb2coY20sIGdldERvUmVwbGFjZUNvbmZpcm0oY20pLCBjbS5waHJhc2UoXCJSZXBsYWNlP1wiKSwgW1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgZG9SZXBsYWNlKG1hdGNoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFkdmFuY2UsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICByZXBsYWNlQWxsKGNtLCBxdWVyeTIsIHRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9LCBcImFkdmFuY2VcIik7XG4gICAgICAgICAgICB2YXIgZG9SZXBsYWNlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbihtYXRjaCkge1xuICAgICAgICAgICAgICBjdXJzb3IucmVwbGFjZSh0eXBlb2YgcXVlcnkyID09IFwic3RyaW5nXCIgPyB0ZXh0IDogdGV4dC5yZXBsYWNlKC9cXCQoXFxkKS9nLCBmdW5jdGlvbihfLCBpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoW2ldO1xuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgIGFkdmFuY2UoKTtcbiAgICAgICAgICAgIH0sIFwiZG9SZXBsYWNlXCIpO1xuICAgICAgICAgICAgYWR2YW5jZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgX19uYW1lKHJlcGxhY2UsIFwicmVwbGFjZVwiKTtcbiAgICBDb2RlTWlycm9yLmNvbW1hbmRzLmZpbmQgPSBmdW5jdGlvbihjbSkge1xuICAgICAgY2xlYXJTZWFyY2goY20pO1xuICAgICAgZG9TZWFyY2goY20pO1xuICAgIH07XG4gICAgQ29kZU1pcnJvci5jb21tYW5kcy5maW5kUGVyc2lzdGVudCA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbGVhclNlYXJjaChjbSk7XG4gICAgICBkb1NlYXJjaChjbSwgZmFsc2UsIHRydWUpO1xuICAgIH07XG4gICAgQ29kZU1pcnJvci5jb21tYW5kcy5maW5kUGVyc2lzdGVudE5leHQgPSBmdW5jdGlvbihjbSkge1xuICAgICAgZG9TZWFyY2goY20sIGZhbHNlLCB0cnVlLCB0cnVlKTtcbiAgICB9O1xuICAgIENvZGVNaXJyb3IuY29tbWFuZHMuZmluZFBlcnNpc3RlbnRQcmV2ID0gZnVuY3Rpb24oY20pIHtcbiAgICAgIGRvU2VhcmNoKGNtLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgICB9O1xuICAgIENvZGVNaXJyb3IuY29tbWFuZHMuZmluZE5leHQgPSBkb1NlYXJjaDtcbiAgICBDb2RlTWlycm9yLmNvbW1hbmRzLmZpbmRQcmV2ID0gZnVuY3Rpb24oY20pIHtcbiAgICAgIGRvU2VhcmNoKGNtLCB0cnVlKTtcbiAgICB9O1xuICAgIENvZGVNaXJyb3IuY29tbWFuZHMuY2xlYXJTZWFyY2ggPSBjbGVhclNlYXJjaDtcbiAgICBDb2RlTWlycm9yLmNvbW1hbmRzLnJlcGxhY2UgPSByZXBsYWNlO1xuICAgIENvZGVNaXJyb3IuY29tbWFuZHMucmVwbGFjZUFsbCA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgICByZXBsYWNlKGNtLCB0cnVlKTtcbiAgICB9O1xuICB9KTtcbn0pKCk7XG52YXIgc2VhcmNoID0gc2VhcmNoJDIuZXhwb3J0cztcbnZhciBzZWFyY2gkMSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKC8qIEBfX1BVUkVfXyAqLyBfbWVyZ2VOYW1lc3BhY2VzKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogXCJNb2R1bGVcIixcbiAgXCJkZWZhdWx0XCI6IHNlYXJjaFxufSwgW3NlYXJjaCQyLmV4cG9ydHNdKSk7XG5leHBvcnQgeyBzZWFyY2gkMSBhcyBzIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///32573\n')},26105:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "a": () => (/* binding */ searchcursor$2),\n/* harmony export */   "s": () => (/* binding */ searchcursor$1)\n/* harmony export */ });\n/* harmony import */ var _codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97480);\nvar __defProp = Object.defineProperty;\nvar __name = (target, value) => __defProp(target, "name", { value, configurable: true });\n\nfunction _mergeNamespaces(n, m) {\n  m.forEach(function(e) {\n    e && typeof e !== "string" && !Array.isArray(e) && Object.keys(e).forEach(function(k) {\n      if (k !== "default" && !(k in n)) {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function() {\n            return e[k];\n          }\n        });\n      }\n    });\n  });\n  return Object.freeze(n);\n}\n__name(_mergeNamespaces, "_mergeNamespaces");\nvar searchcursor$2 = { exports: {} };\n(function(module, exports) {\n  (function(mod) {\n    mod(_codemirror_es_js__WEBPACK_IMPORTED_MODULE_0__.a.exports);\n  })(function(CodeMirror) {\n    var Pos = CodeMirror.Pos;\n    function regexpFlags(regexp) {\n      var flags = regexp.flags;\n      return flags != null ? flags : (regexp.ignoreCase ? "i" : "") + (regexp.global ? "g" : "") + (regexp.multiline ? "m" : "");\n    }\n    __name(regexpFlags, "regexpFlags");\n    function ensureFlags(regexp, flags) {\n      var current = regexpFlags(regexp), target = current;\n      for (var i = 0; i < flags.length; i++)\n        if (target.indexOf(flags.charAt(i)) == -1)\n          target += flags.charAt(i);\n      return current == target ? regexp : new RegExp(regexp.source, target);\n    }\n    __name(ensureFlags, "ensureFlags");\n    function maybeMultiline(regexp) {\n      return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source);\n    }\n    __name(maybeMultiline, "maybeMultiline");\n    function searchRegexpForward(doc, regexp, start) {\n      regexp = ensureFlags(regexp, "g");\n      for (var line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n        regexp.lastIndex = ch;\n        var string = doc.getLine(line), match = regexp.exec(string);\n        if (match)\n          return {\n            from: Pos(line, match.index),\n            to: Pos(line, match.index + match[0].length),\n            match\n          };\n      }\n    }\n    __name(searchRegexpForward, "searchRegexpForward");\n    function searchRegexpForwardMultiline(doc, regexp, start) {\n      if (!maybeMultiline(regexp))\n        return searchRegexpForward(doc, regexp, start);\n      regexp = ensureFlags(regexp, "gm");\n      var string, chunk = 1;\n      for (var line = start.line, last = doc.lastLine(); line <= last; ) {\n        for (var i = 0; i < chunk; i++) {\n          if (line > last)\n            break;\n          var curLine = doc.getLine(line++);\n          string = string == null ? curLine : string + "\\n" + curLine;\n        }\n        chunk = chunk * 2;\n        regexp.lastIndex = start.ch;\n        var match = regexp.exec(string);\n        if (match) {\n          var before = string.slice(0, match.index).split("\\n"), inside = match[0].split("\\n");\n          var startLine = start.line + before.length - 1, startCh = before[before.length - 1].length;\n          return {\n            from: Pos(startLine, startCh),\n            to: Pos(startLine + inside.length - 1, inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n            match\n          };\n        }\n      }\n    }\n    __name(searchRegexpForwardMultiline, "searchRegexpForwardMultiline");\n    function lastMatchIn(string, regexp, endMargin) {\n      var match, from = 0;\n      while (from <= string.length) {\n        regexp.lastIndex = from;\n        var newMatch = regexp.exec(string);\n        if (!newMatch)\n          break;\n        var end = newMatch.index + newMatch[0].length;\n        if (end > string.length - endMargin)\n          break;\n        if (!match || end > match.index + match[0].length)\n          match = newMatch;\n        from = newMatch.index + 1;\n      }\n      return match;\n    }\n    __name(lastMatchIn, "lastMatchIn");\n    function searchRegexpBackward(doc, regexp, start) {\n      regexp = ensureFlags(regexp, "g");\n      for (var line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n        var string = doc.getLine(line);\n        var match = lastMatchIn(string, regexp, ch < 0 ? 0 : string.length - ch);\n        if (match)\n          return {\n            from: Pos(line, match.index),\n            to: Pos(line, match.index + match[0].length),\n            match\n          };\n      }\n    }\n    __name(searchRegexpBackward, "searchRegexpBackward");\n    function searchRegexpBackwardMultiline(doc, regexp, start) {\n      if (!maybeMultiline(regexp))\n        return searchRegexpBackward(doc, regexp, start);\n      regexp = ensureFlags(regexp, "gm");\n      var string, chunkSize = 1, endMargin = doc.getLine(start.line).length - start.ch;\n      for (var line = start.line, first = doc.firstLine(); line >= first; ) {\n        for (var i = 0; i < chunkSize && line >= first; i++) {\n          var curLine = doc.getLine(line--);\n          string = string == null ? curLine : curLine + "\\n" + string;\n        }\n        chunkSize *= 2;\n        var match = lastMatchIn(string, regexp, endMargin);\n        if (match) {\n          var before = string.slice(0, match.index).split("\\n"), inside = match[0].split("\\n");\n          var startLine = line + before.length, startCh = before[before.length - 1].length;\n          return {\n            from: Pos(startLine, startCh),\n            to: Pos(startLine + inside.length - 1, inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n            match\n          };\n        }\n      }\n    }\n    __name(searchRegexpBackwardMultiline, "searchRegexpBackwardMultiline");\n    var doFold, noFold;\n    if (String.prototype.normalize) {\n      doFold = /* @__PURE__ */ __name(function(str) {\n        return str.normalize("NFD").toLowerCase();\n      }, "doFold");\n      noFold = /* @__PURE__ */ __name(function(str) {\n        return str.normalize("NFD");\n      }, "noFold");\n    } else {\n      doFold = /* @__PURE__ */ __name(function(str) {\n        return str.toLowerCase();\n      }, "doFold");\n      noFold = /* @__PURE__ */ __name(function(str) {\n        return str;\n      }, "noFold");\n    }\n    function adjustPos(orig, folded, pos, foldFunc) {\n      if (orig.length == folded.length)\n        return pos;\n      for (var min = 0, max = pos + Math.max(0, orig.length - folded.length); ; ) {\n        if (min == max)\n          return min;\n        var mid = min + max >> 1;\n        var len = foldFunc(orig.slice(0, mid)).length;\n        if (len == pos)\n          return mid;\n        else if (len > pos)\n          max = mid;\n        else\n          min = mid + 1;\n      }\n    }\n    __name(adjustPos, "adjustPos");\n    function searchStringForward(doc, query, start, caseFold) {\n      if (!query.length)\n        return null;\n      var fold = caseFold ? doFold : noFold;\n      var lines = fold(query).split(/\\r|\\n\\r?/);\n      search:\n        for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {\n          var orig = doc.getLine(line).slice(ch), string = fold(orig);\n          if (lines.length == 1) {\n            var found = string.indexOf(lines[0]);\n            if (found == -1)\n              continue search;\n            var start = adjustPos(orig, string, found, fold) + ch;\n            return {\n              from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n              to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)\n            };\n          } else {\n            var cutFrom = string.length - lines[0].length;\n            if (string.slice(cutFrom) != lines[0])\n              continue search;\n            for (var i = 1; i < lines.length - 1; i++)\n              if (fold(doc.getLine(line + i)) != lines[i])\n                continue search;\n            var end = doc.getLine(line + lines.length - 1), endString = fold(end), lastLine = lines[lines.length - 1];\n            if (endString.slice(0, lastLine.length) != lastLine)\n              continue search;\n            return {\n              from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n              to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))\n            };\n          }\n        }\n    }\n    __name(searchStringForward, "searchStringForward");\n    function searchStringBackward(doc, query, start, caseFold) {\n      if (!query.length)\n        return null;\n      var fold = caseFold ? doFold : noFold;\n      var lines = fold(query).split(/\\r|\\n\\r?/);\n      search:\n        for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {\n          var orig = doc.getLine(line);\n          if (ch > -1)\n            orig = orig.slice(0, ch);\n          var string = fold(orig);\n          if (lines.length == 1) {\n            var found = string.lastIndexOf(lines[0]);\n            if (found == -1)\n              continue search;\n            return {\n              from: Pos(line, adjustPos(orig, string, found, fold)),\n              to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))\n            };\n          } else {\n            var lastLine = lines[lines.length - 1];\n            if (string.slice(0, lastLine.length) != lastLine)\n              continue search;\n            for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++)\n              if (fold(doc.getLine(start + i)) != lines[i])\n                continue search;\n            var top = doc.getLine(line + 1 - lines.length), topString = fold(top);\n            if (topString.slice(topString.length - lines[0].length) != lines[0])\n              continue search;\n            return {\n              from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n              to: Pos(line, adjustPos(orig, string, lastLine.length, fold))\n            };\n          }\n        }\n    }\n    __name(searchStringBackward, "searchStringBackward");\n    function SearchCursor(doc, query, pos, options) {\n      this.atOccurrence = false;\n      this.afterEmptyMatch = false;\n      this.doc = doc;\n      pos = pos ? doc.clipPos(pos) : Pos(0, 0);\n      this.pos = { from: pos, to: pos };\n      var caseFold;\n      if (typeof options == "object") {\n        caseFold = options.caseFold;\n      } else {\n        caseFold = options;\n        options = null;\n      }\n      if (typeof query == "string") {\n        if (caseFold == null)\n          caseFold = false;\n        this.matches = function(reverse, pos2) {\n          return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos2, caseFold);\n        };\n      } else {\n        query = ensureFlags(query, "gm");\n        if (!options || options.multiline !== false)\n          this.matches = function(reverse, pos2) {\n            return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos2);\n          };\n        else\n          this.matches = function(reverse, pos2) {\n            return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos2);\n          };\n      }\n    }\n    __name(SearchCursor, "SearchCursor");\n    SearchCursor.prototype = {\n      findNext: function() {\n        return this.find(false);\n      },\n      findPrevious: function() {\n        return this.find(true);\n      },\n      find: function(reverse) {\n        var head = this.doc.clipPos(reverse ? this.pos.from : this.pos.to);\n        if (this.afterEmptyMatch && this.atOccurrence) {\n          head = Pos(head.line, head.ch);\n          if (reverse) {\n            head.ch--;\n            if (head.ch < 0) {\n              head.line--;\n              head.ch = (this.doc.getLine(head.line) || "").length;\n            }\n          } else {\n            head.ch++;\n            if (head.ch > (this.doc.getLine(head.line) || "").length) {\n              head.ch = 0;\n              head.line++;\n            }\n          }\n          if (CodeMirror.cmpPos(head, this.doc.clipPos(head)) != 0) {\n            return this.atOccurrence = false;\n          }\n        }\n        var result = this.matches(reverse, head);\n        this.afterEmptyMatch = result && CodeMirror.cmpPos(result.from, result.to) == 0;\n        if (result) {\n          this.pos = result;\n          this.atOccurrence = true;\n          return this.pos.match || true;\n        } else {\n          var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0);\n          this.pos = { from: end, to: end };\n          return this.atOccurrence = false;\n        }\n      },\n      from: function() {\n        if (this.atOccurrence)\n          return this.pos.from;\n      },\n      to: function() {\n        if (this.atOccurrence)\n          return this.pos.to;\n      },\n      replace: function(newText, origin) {\n        if (!this.atOccurrence)\n          return;\n        var lines = CodeMirror.splitLines(newText);\n        this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin);\n        this.pos.to = Pos(this.pos.from.line + lines.length - 1, lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0));\n      }\n    };\n    CodeMirror.defineExtension("getSearchCursor", function(query, pos, caseFold) {\n      return new SearchCursor(this.doc, query, pos, caseFold);\n    });\n    CodeMirror.defineDocExtension("getSearchCursor", function(query, pos, caseFold) {\n      return new SearchCursor(this, query, pos, caseFold);\n    });\n    CodeMirror.defineExtension("selectMatches", function(query, caseFold) {\n      var ranges = [];\n      var cur = this.getSearchCursor(query, this.getCursor("from"), caseFold);\n      while (cur.findNext()) {\n        if (CodeMirror.cmpPos(cur.to(), this.getCursor("to")) > 0)\n          break;\n        ranges.push({ anchor: cur.from(), head: cur.to() });\n      }\n      if (ranges.length)\n        this.setSelections(ranges, 0);\n    });\n  });\n})();\nvar searchcursor = searchcursor$2.exports;\nvar searchcursor$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ _mergeNamespaces({\n  __proto__: null,\n  [Symbol.toStringTag]: "Module",\n  "default": searchcursor\n}, [searchcursor$2.exports]));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0NBQW9DO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ21EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FjaGlxbC1kZW1vLy4vbm9kZV9tb2R1bGVzL0BncmFwaGlxbC9yZWFjdC9kaXN0L3NlYXJjaGN1cnNvci5lcy5qcz8xY2JhIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19uYW1lID0gKHRhcmdldCwgdmFsdWUpID0+IF9fZGVmUHJvcCh0YXJnZXQsIFwibmFtZVwiLCB7IHZhbHVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG5pbXBvcnQgeyBhIGFzIGNvZGVtaXJyb3IgfSBmcm9tIFwiLi9jb2RlbWlycm9yLmVzLmpzXCI7XG5mdW5jdGlvbiBfbWVyZ2VOYW1lc3BhY2VzKG4sIG0pIHtcbiAgbS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHtcbiAgICBlICYmIHR5cGVvZiBlICE9PSBcInN0cmluZ1wiICYmICFBcnJheS5pc0FycmF5KGUpICYmIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24oaykge1xuICAgICAgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmICEoayBpbiBuKSkge1xuICAgICAgICB2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgayk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCBrLCBkLmdldCA/IGQgOiB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVba107XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBPYmplY3QuZnJlZXplKG4pO1xufVxuX19uYW1lKF9tZXJnZU5hbWVzcGFjZXMsIFwiX21lcmdlTmFtZXNwYWNlc1wiKTtcbnZhciBzZWFyY2hjdXJzb3IkMiA9IHsgZXhwb3J0czoge30gfTtcbihmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcbiAgKGZ1bmN0aW9uKG1vZCkge1xuICAgIG1vZChjb2RlbWlycm9yLmV4cG9ydHMpO1xuICB9KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG4gICAgdmFyIFBvcyA9IENvZGVNaXJyb3IuUG9zO1xuICAgIGZ1bmN0aW9uIHJlZ2V4cEZsYWdzKHJlZ2V4cCkge1xuICAgICAgdmFyIGZsYWdzID0gcmVnZXhwLmZsYWdzO1xuICAgICAgcmV0dXJuIGZsYWdzICE9IG51bGwgPyBmbGFncyA6IChyZWdleHAuaWdub3JlQ2FzZSA/IFwiaVwiIDogXCJcIikgKyAocmVnZXhwLmdsb2JhbCA/IFwiZ1wiIDogXCJcIikgKyAocmVnZXhwLm11bHRpbGluZSA/IFwibVwiIDogXCJcIik7XG4gICAgfVxuICAgIF9fbmFtZShyZWdleHBGbGFncywgXCJyZWdleHBGbGFnc1wiKTtcbiAgICBmdW5jdGlvbiBlbnN1cmVGbGFncyhyZWdleHAsIGZsYWdzKSB7XG4gICAgICB2YXIgY3VycmVudCA9IHJlZ2V4cEZsYWdzKHJlZ2V4cCksIHRhcmdldCA9IGN1cnJlbnQ7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZsYWdzLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAodGFyZ2V0LmluZGV4T2YoZmxhZ3MuY2hhckF0KGkpKSA9PSAtMSlcbiAgICAgICAgICB0YXJnZXQgKz0gZmxhZ3MuY2hhckF0KGkpO1xuICAgICAgcmV0dXJuIGN1cnJlbnQgPT0gdGFyZ2V0ID8gcmVnZXhwIDogbmV3IFJlZ0V4cChyZWdleHAuc291cmNlLCB0YXJnZXQpO1xuICAgIH1cbiAgICBfX25hbWUoZW5zdXJlRmxhZ3MsIFwiZW5zdXJlRmxhZ3NcIik7XG4gICAgZnVuY3Rpb24gbWF5YmVNdWx0aWxpbmUocmVnZXhwKSB7XG4gICAgICByZXR1cm4gL1xcXFxzfFxcXFxufFxcbnxcXFxcV3xcXFxcRHxcXFtcXF4vLnRlc3QocmVnZXhwLnNvdXJjZSk7XG4gICAgfVxuICAgIF9fbmFtZShtYXliZU11bHRpbGluZSwgXCJtYXliZU11bHRpbGluZVwiKTtcbiAgICBmdW5jdGlvbiBzZWFyY2hSZWdleHBGb3J3YXJkKGRvYywgcmVnZXhwLCBzdGFydCkge1xuICAgICAgcmVnZXhwID0gZW5zdXJlRmxhZ3MocmVnZXhwLCBcImdcIik7XG4gICAgICBmb3IgKHZhciBsaW5lID0gc3RhcnQubGluZSwgY2ggPSBzdGFydC5jaCwgbGFzdCA9IGRvYy5sYXN0TGluZSgpOyBsaW5lIDw9IGxhc3Q7IGxpbmUrKywgY2ggPSAwKSB7XG4gICAgICAgIHJlZ2V4cC5sYXN0SW5kZXggPSBjaDtcbiAgICAgICAgdmFyIHN0cmluZyA9IGRvYy5nZXRMaW5lKGxpbmUpLCBtYXRjaCA9IHJlZ2V4cC5leGVjKHN0cmluZyk7XG4gICAgICAgIGlmIChtYXRjaClcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogUG9zKGxpbmUsIG1hdGNoLmluZGV4KSxcbiAgICAgICAgICAgIHRvOiBQb3MobGluZSwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpLFxuICAgICAgICAgICAgbWF0Y2hcbiAgICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBfX25hbWUoc2VhcmNoUmVnZXhwRm9yd2FyZCwgXCJzZWFyY2hSZWdleHBGb3J3YXJkXCIpO1xuICAgIGZ1bmN0aW9uIHNlYXJjaFJlZ2V4cEZvcndhcmRNdWx0aWxpbmUoZG9jLCByZWdleHAsIHN0YXJ0KSB7XG4gICAgICBpZiAoIW1heWJlTXVsdGlsaW5lKHJlZ2V4cCkpXG4gICAgICAgIHJldHVybiBzZWFyY2hSZWdleHBGb3J3YXJkKGRvYywgcmVnZXhwLCBzdGFydCk7XG4gICAgICByZWdleHAgPSBlbnN1cmVGbGFncyhyZWdleHAsIFwiZ21cIik7XG4gICAgICB2YXIgc3RyaW5nLCBjaHVuayA9IDE7XG4gICAgICBmb3IgKHZhciBsaW5lID0gc3RhcnQubGluZSwgbGFzdCA9IGRvYy5sYXN0TGluZSgpOyBsaW5lIDw9IGxhc3Q7ICkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rOyBpKyspIHtcbiAgICAgICAgICBpZiAobGluZSA+IGxhc3QpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB2YXIgY3VyTGluZSA9IGRvYy5nZXRMaW5lKGxpbmUrKyk7XG4gICAgICAgICAgc3RyaW5nID0gc3RyaW5nID09IG51bGwgPyBjdXJMaW5lIDogc3RyaW5nICsgXCJcXG5cIiArIGN1ckxpbmU7XG4gICAgICAgIH1cbiAgICAgICAgY2h1bmsgPSBjaHVuayAqIDI7XG4gICAgICAgIHJlZ2V4cC5sYXN0SW5kZXggPSBzdGFydC5jaDtcbiAgICAgICAgdmFyIG1hdGNoID0gcmVnZXhwLmV4ZWMoc3RyaW5nKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgdmFyIGJlZm9yZSA9IHN0cmluZy5zbGljZSgwLCBtYXRjaC5pbmRleCkuc3BsaXQoXCJcXG5cIiksIGluc2lkZSA9IG1hdGNoWzBdLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICAgIHZhciBzdGFydExpbmUgPSBzdGFydC5saW5lICsgYmVmb3JlLmxlbmd0aCAtIDEsIHN0YXJ0Q2ggPSBiZWZvcmVbYmVmb3JlLmxlbmd0aCAtIDFdLmxlbmd0aDtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogUG9zKHN0YXJ0TGluZSwgc3RhcnRDaCksXG4gICAgICAgICAgICB0bzogUG9zKHN0YXJ0TGluZSArIGluc2lkZS5sZW5ndGggLSAxLCBpbnNpZGUubGVuZ3RoID09IDEgPyBzdGFydENoICsgaW5zaWRlWzBdLmxlbmd0aCA6IGluc2lkZVtpbnNpZGUubGVuZ3RoIC0gMV0ubGVuZ3RoKSxcbiAgICAgICAgICAgIG1hdGNoXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBfX25hbWUoc2VhcmNoUmVnZXhwRm9yd2FyZE11bHRpbGluZSwgXCJzZWFyY2hSZWdleHBGb3J3YXJkTXVsdGlsaW5lXCIpO1xuICAgIGZ1bmN0aW9uIGxhc3RNYXRjaEluKHN0cmluZywgcmVnZXhwLCBlbmRNYXJnaW4pIHtcbiAgICAgIHZhciBtYXRjaCwgZnJvbSA9IDA7XG4gICAgICB3aGlsZSAoZnJvbSA8PSBzdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgIHJlZ2V4cC5sYXN0SW5kZXggPSBmcm9tO1xuICAgICAgICB2YXIgbmV3TWF0Y2ggPSByZWdleHAuZXhlYyhzdHJpbmcpO1xuICAgICAgICBpZiAoIW5ld01hdGNoKVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB2YXIgZW5kID0gbmV3TWF0Y2guaW5kZXggKyBuZXdNYXRjaFswXS5sZW5ndGg7XG4gICAgICAgIGlmIChlbmQgPiBzdHJpbmcubGVuZ3RoIC0gZW5kTWFyZ2luKVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAoIW1hdGNoIHx8IGVuZCA+IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKVxuICAgICAgICAgIG1hdGNoID0gbmV3TWF0Y2g7XG4gICAgICAgIGZyb20gPSBuZXdNYXRjaC5pbmRleCArIDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfVxuICAgIF9fbmFtZShsYXN0TWF0Y2hJbiwgXCJsYXN0TWF0Y2hJblwiKTtcbiAgICBmdW5jdGlvbiBzZWFyY2hSZWdleHBCYWNrd2FyZChkb2MsIHJlZ2V4cCwgc3RhcnQpIHtcbiAgICAgIHJlZ2V4cCA9IGVuc3VyZUZsYWdzKHJlZ2V4cCwgXCJnXCIpO1xuICAgICAgZm9yICh2YXIgbGluZSA9IHN0YXJ0LmxpbmUsIGNoID0gc3RhcnQuY2gsIGZpcnN0ID0gZG9jLmZpcnN0TGluZSgpOyBsaW5lID49IGZpcnN0OyBsaW5lLS0sIGNoID0gLTEpIHtcbiAgICAgICAgdmFyIHN0cmluZyA9IGRvYy5nZXRMaW5lKGxpbmUpO1xuICAgICAgICB2YXIgbWF0Y2ggPSBsYXN0TWF0Y2hJbihzdHJpbmcsIHJlZ2V4cCwgY2ggPCAwID8gMCA6IHN0cmluZy5sZW5ndGggLSBjaCk7XG4gICAgICAgIGlmIChtYXRjaClcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogUG9zKGxpbmUsIG1hdGNoLmluZGV4KSxcbiAgICAgICAgICAgIHRvOiBQb3MobGluZSwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpLFxuICAgICAgICAgICAgbWF0Y2hcbiAgICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBfX25hbWUoc2VhcmNoUmVnZXhwQmFja3dhcmQsIFwic2VhcmNoUmVnZXhwQmFja3dhcmRcIik7XG4gICAgZnVuY3Rpb24gc2VhcmNoUmVnZXhwQmFja3dhcmRNdWx0aWxpbmUoZG9jLCByZWdleHAsIHN0YXJ0KSB7XG4gICAgICBpZiAoIW1heWJlTXVsdGlsaW5lKHJlZ2V4cCkpXG4gICAgICAgIHJldHVybiBzZWFyY2hSZWdleHBCYWNrd2FyZChkb2MsIHJlZ2V4cCwgc3RhcnQpO1xuICAgICAgcmVnZXhwID0gZW5zdXJlRmxhZ3MocmVnZXhwLCBcImdtXCIpO1xuICAgICAgdmFyIHN0cmluZywgY2h1bmtTaXplID0gMSwgZW5kTWFyZ2luID0gZG9jLmdldExpbmUoc3RhcnQubGluZSkubGVuZ3RoIC0gc3RhcnQuY2g7XG4gICAgICBmb3IgKHZhciBsaW5lID0gc3RhcnQubGluZSwgZmlyc3QgPSBkb2MuZmlyc3RMaW5lKCk7IGxpbmUgPj0gZmlyc3Q7ICkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rU2l6ZSAmJiBsaW5lID49IGZpcnN0OyBpKyspIHtcbiAgICAgICAgICB2YXIgY3VyTGluZSA9IGRvYy5nZXRMaW5lKGxpbmUtLSk7XG4gICAgICAgICAgc3RyaW5nID0gc3RyaW5nID09IG51bGwgPyBjdXJMaW5lIDogY3VyTGluZSArIFwiXFxuXCIgKyBzdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgY2h1bmtTaXplICo9IDI7XG4gICAgICAgIHZhciBtYXRjaCA9IGxhc3RNYXRjaEluKHN0cmluZywgcmVnZXhwLCBlbmRNYXJnaW4pO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICB2YXIgYmVmb3JlID0gc3RyaW5nLnNsaWNlKDAsIG1hdGNoLmluZGV4KS5zcGxpdChcIlxcblwiKSwgaW5zaWRlID0gbWF0Y2hbMF0uc3BsaXQoXCJcXG5cIik7XG4gICAgICAgICAgdmFyIHN0YXJ0TGluZSA9IGxpbmUgKyBiZWZvcmUubGVuZ3RoLCBzdGFydENoID0gYmVmb3JlW2JlZm9yZS5sZW5ndGggLSAxXS5sZW5ndGg7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZyb206IFBvcyhzdGFydExpbmUsIHN0YXJ0Q2gpLFxuICAgICAgICAgICAgdG86IFBvcyhzdGFydExpbmUgKyBpbnNpZGUubGVuZ3RoIC0gMSwgaW5zaWRlLmxlbmd0aCA9PSAxID8gc3RhcnRDaCArIGluc2lkZVswXS5sZW5ndGggOiBpbnNpZGVbaW5zaWRlLmxlbmd0aCAtIDFdLmxlbmd0aCksXG4gICAgICAgICAgICBtYXRjaFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgX19uYW1lKHNlYXJjaFJlZ2V4cEJhY2t3YXJkTXVsdGlsaW5lLCBcInNlYXJjaFJlZ2V4cEJhY2t3YXJkTXVsdGlsaW5lXCIpO1xuICAgIHZhciBkb0ZvbGQsIG5vRm9sZDtcbiAgICBpZiAoU3RyaW5nLnByb3RvdHlwZS5ub3JtYWxpemUpIHtcbiAgICAgIGRvRm9sZCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIubm9ybWFsaXplKFwiTkZEXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9LCBcImRvRm9sZFwiKTtcbiAgICAgIG5vRm9sZCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIubm9ybWFsaXplKFwiTkZEXCIpO1xuICAgICAgfSwgXCJub0ZvbGRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvRm9sZCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgICAgIH0sIFwiZG9Gb2xkXCIpO1xuICAgICAgbm9Gb2xkID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgIH0sIFwibm9Gb2xkXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGp1c3RQb3Mob3JpZywgZm9sZGVkLCBwb3MsIGZvbGRGdW5jKSB7XG4gICAgICBpZiAob3JpZy5sZW5ndGggPT0gZm9sZGVkLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgIGZvciAodmFyIG1pbiA9IDAsIG1heCA9IHBvcyArIE1hdGgubWF4KDAsIG9yaWcubGVuZ3RoIC0gZm9sZGVkLmxlbmd0aCk7IDsgKSB7XG4gICAgICAgIGlmIChtaW4gPT0gbWF4KVxuICAgICAgICAgIHJldHVybiBtaW47XG4gICAgICAgIHZhciBtaWQgPSBtaW4gKyBtYXggPj4gMTtcbiAgICAgICAgdmFyIGxlbiA9IGZvbGRGdW5jKG9yaWcuc2xpY2UoMCwgbWlkKSkubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID09IHBvcylcbiAgICAgICAgICByZXR1cm4gbWlkO1xuICAgICAgICBlbHNlIGlmIChsZW4gPiBwb3MpXG4gICAgICAgICAgbWF4ID0gbWlkO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgbWluID0gbWlkICsgMTtcbiAgICAgIH1cbiAgICB9XG4gICAgX19uYW1lKGFkanVzdFBvcywgXCJhZGp1c3RQb3NcIik7XG4gICAgZnVuY3Rpb24gc2VhcmNoU3RyaW5nRm9yd2FyZChkb2MsIHF1ZXJ5LCBzdGFydCwgY2FzZUZvbGQpIHtcbiAgICAgIGlmICghcXVlcnkubGVuZ3RoKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIHZhciBmb2xkID0gY2FzZUZvbGQgPyBkb0ZvbGQgOiBub0ZvbGQ7XG4gICAgICB2YXIgbGluZXMgPSBmb2xkKHF1ZXJ5KS5zcGxpdCgvXFxyfFxcblxccj8vKTtcbiAgICAgIHNlYXJjaDpcbiAgICAgICAgZm9yICh2YXIgbGluZSA9IHN0YXJ0LmxpbmUsIGNoID0gc3RhcnQuY2gsIGxhc3QgPSBkb2MubGFzdExpbmUoKSArIDEgLSBsaW5lcy5sZW5ndGg7IGxpbmUgPD0gbGFzdDsgbGluZSsrLCBjaCA9IDApIHtcbiAgICAgICAgICB2YXIgb3JpZyA9IGRvYy5nZXRMaW5lKGxpbmUpLnNsaWNlKGNoKSwgc3RyaW5nID0gZm9sZChvcmlnKTtcbiAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIHZhciBmb3VuZCA9IHN0cmluZy5pbmRleE9mKGxpbmVzWzBdKTtcbiAgICAgICAgICAgIGlmIChmb3VuZCA9PSAtMSlcbiAgICAgICAgICAgICAgY29udGludWUgc2VhcmNoO1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgZm91bmQsIGZvbGQpICsgY2g7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBmcm9tOiBQb3MobGluZSwgYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgZm91bmQsIGZvbGQpICsgY2gpLFxuICAgICAgICAgICAgICB0bzogUG9zKGxpbmUsIGFkanVzdFBvcyhvcmlnLCBzdHJpbmcsIGZvdW5kICsgbGluZXNbMF0ubGVuZ3RoLCBmb2xkKSArIGNoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGN1dEZyb20gPSBzdHJpbmcubGVuZ3RoIC0gbGluZXNbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHN0cmluZy5zbGljZShjdXRGcm9tKSAhPSBsaW5lc1swXSlcbiAgICAgICAgICAgICAgY29udGludWUgc2VhcmNoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsaW5lcy5sZW5ndGggLSAxOyBpKyspXG4gICAgICAgICAgICAgIGlmIChmb2xkKGRvYy5nZXRMaW5lKGxpbmUgKyBpKSkgIT0gbGluZXNbaV0pXG4gICAgICAgICAgICAgICAgY29udGludWUgc2VhcmNoO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGRvYy5nZXRMaW5lKGxpbmUgKyBsaW5lcy5sZW5ndGggLSAxKSwgZW5kU3RyaW5nID0gZm9sZChlbmQpLCBsYXN0TGluZSA9IGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKGVuZFN0cmluZy5zbGljZSgwLCBsYXN0TGluZS5sZW5ndGgpICE9IGxhc3RMaW5lKVxuICAgICAgICAgICAgICBjb250aW51ZSBzZWFyY2g7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBmcm9tOiBQb3MobGluZSwgYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgY3V0RnJvbSwgZm9sZCkgKyBjaCksXG4gICAgICAgICAgICAgIHRvOiBQb3MobGluZSArIGxpbmVzLmxlbmd0aCAtIDEsIGFkanVzdFBvcyhlbmQsIGVuZFN0cmluZywgbGFzdExpbmUubGVuZ3RoLCBmb2xkKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF9fbmFtZShzZWFyY2hTdHJpbmdGb3J3YXJkLCBcInNlYXJjaFN0cmluZ0ZvcndhcmRcIik7XG4gICAgZnVuY3Rpb24gc2VhcmNoU3RyaW5nQmFja3dhcmQoZG9jLCBxdWVyeSwgc3RhcnQsIGNhc2VGb2xkKSB7XG4gICAgICBpZiAoIXF1ZXJ5Lmxlbmd0aClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB2YXIgZm9sZCA9IGNhc2VGb2xkID8gZG9Gb2xkIDogbm9Gb2xkO1xuICAgICAgdmFyIGxpbmVzID0gZm9sZChxdWVyeSkuc3BsaXQoL1xccnxcXG5cXHI/Lyk7XG4gICAgICBzZWFyY2g6XG4gICAgICAgIGZvciAodmFyIGxpbmUgPSBzdGFydC5saW5lLCBjaCA9IHN0YXJ0LmNoLCBmaXJzdCA9IGRvYy5maXJzdExpbmUoKSAtIDEgKyBsaW5lcy5sZW5ndGg7IGxpbmUgPj0gZmlyc3Q7IGxpbmUtLSwgY2ggPSAtMSkge1xuICAgICAgICAgIHZhciBvcmlnID0gZG9jLmdldExpbmUobGluZSk7XG4gICAgICAgICAgaWYgKGNoID4gLTEpXG4gICAgICAgICAgICBvcmlnID0gb3JpZy5zbGljZSgwLCBjaCk7XG4gICAgICAgICAgdmFyIHN0cmluZyA9IGZvbGQob3JpZyk7XG4gICAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICB2YXIgZm91bmQgPSBzdHJpbmcubGFzdEluZGV4T2YobGluZXNbMF0pO1xuICAgICAgICAgICAgaWYgKGZvdW5kID09IC0xKVxuICAgICAgICAgICAgICBjb250aW51ZSBzZWFyY2g7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBmcm9tOiBQb3MobGluZSwgYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgZm91bmQsIGZvbGQpKSxcbiAgICAgICAgICAgICAgdG86IFBvcyhsaW5lLCBhZGp1c3RQb3Mob3JpZywgc3RyaW5nLCBmb3VuZCArIGxpbmVzWzBdLmxlbmd0aCwgZm9sZCkpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgbGFzdExpbmUgPSBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChzdHJpbmcuc2xpY2UoMCwgbGFzdExpbmUubGVuZ3RoKSAhPSBsYXN0TGluZSlcbiAgICAgICAgICAgICAgY29udGludWUgc2VhcmNoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDEsIHN0YXJ0ID0gbGluZSAtIGxpbmVzLmxlbmd0aCArIDE7IGkgPCBsaW5lcy5sZW5ndGggLSAxOyBpKyspXG4gICAgICAgICAgICAgIGlmIChmb2xkKGRvYy5nZXRMaW5lKHN0YXJ0ICsgaSkpICE9IGxpbmVzW2ldKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlIHNlYXJjaDtcbiAgICAgICAgICAgIHZhciB0b3AgPSBkb2MuZ2V0TGluZShsaW5lICsgMSAtIGxpbmVzLmxlbmd0aCksIHRvcFN0cmluZyA9IGZvbGQodG9wKTtcbiAgICAgICAgICAgIGlmICh0b3BTdHJpbmcuc2xpY2UodG9wU3RyaW5nLmxlbmd0aCAtIGxpbmVzWzBdLmxlbmd0aCkgIT0gbGluZXNbMF0pXG4gICAgICAgICAgICAgIGNvbnRpbnVlIHNlYXJjaDtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGZyb206IFBvcyhsaW5lICsgMSAtIGxpbmVzLmxlbmd0aCwgYWRqdXN0UG9zKHRvcCwgdG9wU3RyaW5nLCB0b3AubGVuZ3RoIC0gbGluZXNbMF0ubGVuZ3RoLCBmb2xkKSksXG4gICAgICAgICAgICAgIHRvOiBQb3MobGluZSwgYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgbGFzdExpbmUubGVuZ3RoLCBmb2xkKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF9fbmFtZShzZWFyY2hTdHJpbmdCYWNrd2FyZCwgXCJzZWFyY2hTdHJpbmdCYWNrd2FyZFwiKTtcbiAgICBmdW5jdGlvbiBTZWFyY2hDdXJzb3IoZG9jLCBxdWVyeSwgcG9zLCBvcHRpb25zKSB7XG4gICAgICB0aGlzLmF0T2NjdXJyZW5jZSA9IGZhbHNlO1xuICAgICAgdGhpcy5hZnRlckVtcHR5TWF0Y2ggPSBmYWxzZTtcbiAgICAgIHRoaXMuZG9jID0gZG9jO1xuICAgICAgcG9zID0gcG9zID8gZG9jLmNsaXBQb3MocG9zKSA6IFBvcygwLCAwKTtcbiAgICAgIHRoaXMucG9zID0geyBmcm9tOiBwb3MsIHRvOiBwb3MgfTtcbiAgICAgIHZhciBjYXNlRm9sZDtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGNhc2VGb2xkID0gb3B0aW9ucy5jYXNlRm9sZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhc2VGb2xkID0gb3B0aW9ucztcbiAgICAgICAgb3B0aW9ucyA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHF1ZXJ5ID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKGNhc2VGb2xkID09IG51bGwpXG4gICAgICAgICAgY2FzZUZvbGQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXRjaGVzID0gZnVuY3Rpb24ocmV2ZXJzZSwgcG9zMikge1xuICAgICAgICAgIHJldHVybiAocmV2ZXJzZSA/IHNlYXJjaFN0cmluZ0JhY2t3YXJkIDogc2VhcmNoU3RyaW5nRm9yd2FyZCkoZG9jLCBxdWVyeSwgcG9zMiwgY2FzZUZvbGQpO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVlcnkgPSBlbnN1cmVGbGFncyhxdWVyeSwgXCJnbVwiKTtcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8IG9wdGlvbnMubXVsdGlsaW5lICE9PSBmYWxzZSlcbiAgICAgICAgICB0aGlzLm1hdGNoZXMgPSBmdW5jdGlvbihyZXZlcnNlLCBwb3MyKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJldmVyc2UgPyBzZWFyY2hSZWdleHBCYWNrd2FyZE11bHRpbGluZSA6IHNlYXJjaFJlZ2V4cEZvcndhcmRNdWx0aWxpbmUpKGRvYywgcXVlcnksIHBvczIpO1xuICAgICAgICAgIH07XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aGlzLm1hdGNoZXMgPSBmdW5jdGlvbihyZXZlcnNlLCBwb3MyKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJldmVyc2UgPyBzZWFyY2hSZWdleHBCYWNrd2FyZCA6IHNlYXJjaFJlZ2V4cEZvcndhcmQpKGRvYywgcXVlcnksIHBvczIpO1xuICAgICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIF9fbmFtZShTZWFyY2hDdXJzb3IsIFwiU2VhcmNoQ3Vyc29yXCIpO1xuICAgIFNlYXJjaEN1cnNvci5wcm90b3R5cGUgPSB7XG4gICAgICBmaW5kTmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQoZmFsc2UpO1xuICAgICAgfSxcbiAgICAgIGZpbmRQcmV2aW91czogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQodHJ1ZSk7XG4gICAgICB9LFxuICAgICAgZmluZDogZnVuY3Rpb24ocmV2ZXJzZSkge1xuICAgICAgICB2YXIgaGVhZCA9IHRoaXMuZG9jLmNsaXBQb3MocmV2ZXJzZSA/IHRoaXMucG9zLmZyb20gOiB0aGlzLnBvcy50byk7XG4gICAgICAgIGlmICh0aGlzLmFmdGVyRW1wdHlNYXRjaCAmJiB0aGlzLmF0T2NjdXJyZW5jZSkge1xuICAgICAgICAgIGhlYWQgPSBQb3MoaGVhZC5saW5lLCBoZWFkLmNoKTtcbiAgICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgaGVhZC5jaC0tO1xuICAgICAgICAgICAgaWYgKGhlYWQuY2ggPCAwKSB7XG4gICAgICAgICAgICAgIGhlYWQubGluZS0tO1xuICAgICAgICAgICAgICBoZWFkLmNoID0gKHRoaXMuZG9jLmdldExpbmUoaGVhZC5saW5lKSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhlYWQuY2grKztcbiAgICAgICAgICAgIGlmIChoZWFkLmNoID4gKHRoaXMuZG9jLmdldExpbmUoaGVhZC5saW5lKSB8fCBcIlwiKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgaGVhZC5jaCA9IDA7XG4gICAgICAgICAgICAgIGhlYWQubGluZSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoQ29kZU1pcnJvci5jbXBQb3MoaGVhZCwgdGhpcy5kb2MuY2xpcFBvcyhoZWFkKSkgIT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXRPY2N1cnJlbmNlID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm1hdGNoZXMocmV2ZXJzZSwgaGVhZCk7XG4gICAgICAgIHRoaXMuYWZ0ZXJFbXB0eU1hdGNoID0gcmVzdWx0ICYmIENvZGVNaXJyb3IuY21wUG9zKHJlc3VsdC5mcm9tLCByZXN1bHQudG8pID09IDA7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICB0aGlzLnBvcyA9IHJlc3VsdDtcbiAgICAgICAgICB0aGlzLmF0T2NjdXJyZW5jZSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucG9zLm1hdGNoIHx8IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGVuZCA9IFBvcyhyZXZlcnNlID8gdGhpcy5kb2MuZmlyc3RMaW5lKCkgOiB0aGlzLmRvYy5sYXN0TGluZSgpICsgMSwgMCk7XG4gICAgICAgICAgdGhpcy5wb3MgPSB7IGZyb206IGVuZCwgdG86IGVuZCB9O1xuICAgICAgICAgIHJldHVybiB0aGlzLmF0T2NjdXJyZW5jZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZnJvbTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmF0T2NjdXJyZW5jZSlcbiAgICAgICAgICByZXR1cm4gdGhpcy5wb3MuZnJvbTtcbiAgICAgIH0sXG4gICAgICB0bzogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmF0T2NjdXJyZW5jZSlcbiAgICAgICAgICByZXR1cm4gdGhpcy5wb3MudG87XG4gICAgICB9LFxuICAgICAgcmVwbGFjZTogZnVuY3Rpb24obmV3VGV4dCwgb3JpZ2luKSB7XG4gICAgICAgIGlmICghdGhpcy5hdE9jY3VycmVuY2UpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgbGluZXMgPSBDb2RlTWlycm9yLnNwbGl0TGluZXMobmV3VGV4dCk7XG4gICAgICAgIHRoaXMuZG9jLnJlcGxhY2VSYW5nZShsaW5lcywgdGhpcy5wb3MuZnJvbSwgdGhpcy5wb3MudG8sIG9yaWdpbik7XG4gICAgICAgIHRoaXMucG9zLnRvID0gUG9zKHRoaXMucG9zLmZyb20ubGluZSArIGxpbmVzLmxlbmd0aCAtIDEsIGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdLmxlbmd0aCArIChsaW5lcy5sZW5ndGggPT0gMSA/IHRoaXMucG9zLmZyb20uY2ggOiAwKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcImdldFNlYXJjaEN1cnNvclwiLCBmdW5jdGlvbihxdWVyeSwgcG9zLCBjYXNlRm9sZCkge1xuICAgICAgcmV0dXJuIG5ldyBTZWFyY2hDdXJzb3IodGhpcy5kb2MsIHF1ZXJ5LCBwb3MsIGNhc2VGb2xkKTtcbiAgICB9KTtcbiAgICBDb2RlTWlycm9yLmRlZmluZURvY0V4dGVuc2lvbihcImdldFNlYXJjaEN1cnNvclwiLCBmdW5jdGlvbihxdWVyeSwgcG9zLCBjYXNlRm9sZCkge1xuICAgICAgcmV0dXJuIG5ldyBTZWFyY2hDdXJzb3IodGhpcywgcXVlcnksIHBvcywgY2FzZUZvbGQpO1xuICAgIH0pO1xuICAgIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKFwic2VsZWN0TWF0Y2hlc1wiLCBmdW5jdGlvbihxdWVyeSwgY2FzZUZvbGQpIHtcbiAgICAgIHZhciByYW5nZXMgPSBbXTtcbiAgICAgIHZhciBjdXIgPSB0aGlzLmdldFNlYXJjaEN1cnNvcihxdWVyeSwgdGhpcy5nZXRDdXJzb3IoXCJmcm9tXCIpLCBjYXNlRm9sZCk7XG4gICAgICB3aGlsZSAoY3VyLmZpbmROZXh0KCkpIHtcbiAgICAgICAgaWYgKENvZGVNaXJyb3IuY21wUG9zKGN1ci50bygpLCB0aGlzLmdldEN1cnNvcihcInRvXCIpKSA+IDApXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIHJhbmdlcy5wdXNoKHsgYW5jaG9yOiBjdXIuZnJvbSgpLCBoZWFkOiBjdXIudG8oKSB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChyYW5nZXMubGVuZ3RoKVxuICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMocmFuZ2VzLCAwKTtcbiAgICB9KTtcbiAgfSk7XG59KSgpO1xudmFyIHNlYXJjaGN1cnNvciA9IHNlYXJjaGN1cnNvciQyLmV4cG9ydHM7XG52YXIgc2VhcmNoY3Vyc29yJDEgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmZyZWV6ZSgvKiBAX19QVVJFX18gKi8gX21lcmdlTmFtZXNwYWNlcyh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgW1N5bWJvbC50b1N0cmluZ1RhZ106IFwiTW9kdWxlXCIsXG4gIFwiZGVmYXVsdFwiOiBzZWFyY2hjdXJzb3Jcbn0sIFtzZWFyY2hjdXJzb3IkMi5leHBvcnRzXSkpO1xuZXhwb3J0IHsgc2VhcmNoY3Vyc29yJDIgYXMgYSwgc2VhcmNoY3Vyc29yJDEgYXMgcyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///26105\n')}}]);